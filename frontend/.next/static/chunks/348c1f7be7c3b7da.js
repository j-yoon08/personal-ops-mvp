(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},95242,e=>{"use strict";e.s(["Pause",()=>t],95242);let t=(0,e.i(75254).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},63209,e=>{"use strict";e.s(["AlertCircle",()=>t],63209);let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},37727,e=>{"use strict";e.s(["X",()=>t.default]);var t=e.i(41947)},3116,e=>{"use strict";e.s(["Clock",()=>t],3116);let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},69638,e=>{"use strict";e.s(["CheckCircle",()=>t],69638);let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},89271,e=>{"use strict";e.s(["NotificationStatus",()=>l,"NotificationType",()=>s,"TaskState",()=>t,"TemplateType",()=>a]);var t=function(e){return e.BACKLOG="BACKLOG",e.IN_PROGRESS="IN_PROGRESS",e.DONE="DONE",e.PAUSED="PAUSED",e.CANCELED="CANCELED",e}({}),s=function(e){return e.DUE_DATE_REMINDER="DUE_DATE_REMINDER",e.OVERDUE_TASK="OVERDUE_TASK",e.MISSING_BRIEF="MISSING_BRIEF",e.MISSING_DOD="MISSING_DOD",e.STALE_TASK="STALE_TASK",e.REVIEW_SCHEDULE="REVIEW_SCHEDULE",e}({}),l=function(e){return e.PENDING="PENDING",e.SENT="SENT",e.READ="READ",e.DISMISSED="DISMISSED",e}({}),a=function(e){return e.BRIEF="BRIEF",e.DOD="DOD",e.PROJECT="PROJECT",e}({})},8412,e=>{"use strict";e.s(["default",()=>R],8412);var t=e.i(43476),s=e.i(71645),l=e.i(15288),a=e.i(87486),r=e.i(19455),i=e.i(93479),n=e.i(67489),c=e.i(85071),d=e.i(32661),o=e.i(76639),u=e.i(3133),h=e.i(7233),x=e.i(53145),m=e.i(94814),j=e.i(62201),p=e.i(46696);let g=j.object({project_id:j.string().min(1,"프로젝트를 선택해주세요"),title:j.string().min(1,"작업 제목을 입력해주세요"),priority:j.string().min(1,"우선순위를 선택해주세요"),due_date:j.string().optional()});function v(){let[e,l]=(0,s.useState)(!1),a=(0,c.useCreateTask)(),{data:j,isLoading:v}=(0,d.useProjects)(),S=j&&j.length>0,f=(0,x.useForm)({resolver:(0,m.zodResolver)(g),defaultValues:{project_id:"",title:"",priority:"3",due_date:""}}),N=async e=>{try{let t={project_id:parseInt(e.project_id),title:e.title,priority:parseInt(e.priority),due_date:e.due_date||void 0};await a.mutateAsync(t),p.toast.success("작업이 생성되었습니다!"),f.reset(),l(!1)}catch(l){var t,s;let e=(null==l||null==(s=l.response)||null==(t=s.data)?void 0:t.detail)||"작업 생성에 실패했습니다.";p.toast.error(e),console.error("Error creating task:",l)}};return(0,t.jsxs)(o.Dialog,{open:e,onOpenChange:l,children:[(0,t.jsx)(o.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(r.Button,{variant:"outline",disabled:!S,title:S?"":"먼저 프로젝트를 생성해주세요",children:[(0,t.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"새 작업"]})}),(0,t.jsxs)(o.DialogContent,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(o.DialogHeader,{children:[(0,t.jsx)(o.DialogTitle,{children:"새 작업 생성"}),(0,t.jsx)(o.DialogDescription,{children:S?"새로운 작업을 생성합니다. 프로젝트와 작업 제목은 필수입니다.":"작업을 생성하려면 먼저 프로젝트를 생성해주세요."})]}),S?(0,t.jsx)(u.Form,{...f,children:(0,t.jsxs)("form",{onSubmit:f.handleSubmit(N),className:"space-y-4",children:[(0,t.jsx)(u.FormField,{control:f.control,name:"project_id",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.FormItem,{children:[(0,t.jsx)(u.FormLabel,{children:"프로젝트 *"}),(0,t.jsxs)(n.Select,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(u.FormControl,{children:(0,t.jsx)(n.SelectTrigger,{children:(0,t.jsx)(n.SelectValue,{placeholder:"프로젝트를 선택하세요"})})}),(0,t.jsx)(n.SelectContent,{children:null==j?void 0:j.map(e=>(0,t.jsx)(n.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),(0,t.jsx)(u.FormMessage,{})]})}}),(0,t.jsx)(u.FormField,{control:f.control,name:"title",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.FormItem,{children:[(0,t.jsx)(u.FormLabel,{children:"작업 제목 *"}),(0,t.jsx)(u.FormControl,{children:(0,t.jsx)(i.Input,{placeholder:"예: 데이터베이스 설계",...s})}),(0,t.jsx)(u.FormMessage,{})]})}}),(0,t.jsx)(u.FormField,{control:f.control,name:"priority",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.FormItem,{children:[(0,t.jsx)(u.FormLabel,{children:"우선순위 *"}),(0,t.jsxs)(n.Select,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,t.jsx)(u.FormControl,{children:(0,t.jsx)(n.SelectTrigger,{children:(0,t.jsx)(n.SelectValue,{placeholder:"우선순위 선택"})})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"1",children:"1 - 최고"}),(0,t.jsx)(n.SelectItem,{value:"2",children:"2 - 높음"}),(0,t.jsx)(n.SelectItem,{value:"3",children:"3 - 보통"}),(0,t.jsx)(n.SelectItem,{value:"4",children:"4 - 낮음"}),(0,t.jsx)(n.SelectItem,{value:"5",children:"5 - 최하"})]})]}),(0,t.jsx)(u.FormMessage,{})]})}}),(0,t.jsx)(u.FormField,{control:f.control,name:"due_date",render:e=>{let{field:s}=e;return(0,t.jsxs)(u.FormItem,{children:[(0,t.jsx)(u.FormLabel,{children:"마감일 (선택)"}),(0,t.jsx)(u.FormControl,{children:(0,t.jsx)(i.Input,{type:"date",...s})}),(0,t.jsx)(u.FormMessage,{})]})}}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,t.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>l(!1),children:"취소"}),(0,t.jsx)(r.Button,{type:"submit",disabled:a.isPending,children:a.isPending?"생성 중...":"생성"})]})]})}):(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:v?"프로젝트를 불러오는 중...":"생성된 프로젝트가 없습니다."}),(0,t.jsx)(r.Button,{onClick:()=>l(!1),children:"확인"})]})]})]})}var S=e.i(89271),f=e.i(56272),N=e.i(3116),C=e.i(63209),y=e.i(69638),L=e.i(95242),k=e.i(37727),b=e.i(55436),E=e.i(75254);let A=(0,E.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),w=(0,E.default)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),D=(0,E.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var I=e.i(20278),_=e.i(87316),T=e.i(22016),F=e.i(1851);let O={[S.TaskState.BACKLOG]:{label:"대기",icon:N.Clock,color:"bg-gray-500",variant:"secondary"},[S.TaskState.IN_PROGRESS]:{label:"진행중",icon:C.AlertCircle,color:"bg-blue-500",variant:"default"},[S.TaskState.DONE]:{label:"완료",icon:y.CheckCircle,color:"bg-green-500",variant:"secondary"},[S.TaskState.PAUSED]:{label:"중단",icon:L.Pause,color:"bg-yellow-500",variant:"outline"},[S.TaskState.CANCELED]:{label:"취소",icon:k.X,color:"bg-red-500",variant:"destructive"}};function R(){var e;let{data:o,isLoading:u}=(0,c.useTasks)(),{data:h,isLoading:x}=(0,d.useProjects)(),m=(0,c.useUpdateTaskState)(),[j,g]=(0,s.useState)(""),[N,C]=(0,s.useState)("ALL"),[y,L]=(0,s.useState)("ALL"),[E,R]=(0,s.useState)("created"),[P,M]=(0,s.useState)("desc"),B=[...(null==o?void 0:o.filter(e=>{if(j){let t=j.toLowerCase(),s=e.title.toLowerCase().includes(t),l=null==h?void 0:h.find(t=>t.id===e.project_id),a=null==l?void 0:l.name.toLowerCase().includes(t);if(!s&&!a)return!1}return("ALL"===N||e.state===N)&&("ALL"===y||e.project_id===y)}))||[]].sort((e,t)=>{let s,l;switch(E){case"title":s=e.title.toLowerCase(),l=t.title.toLowerCase();break;case"priority":s=e.priority,l=t.priority;break;case"due_date":s=new Date(e.due_date?e.due_date:"9999-12-31"),l=new Date(t.due_date?t.due_date:"9999-12-31");break;default:s=new Date(e.created_at),l=new Date(t.created_at)}return s<l?"asc"===P?-1:1:s>l?"asc"===P?1:-1:0}),V={total:(null==o?void 0:o.length)||0,backlog:(null==o?void 0:o.filter(e=>e.state===S.TaskState.BACKLOG).length)||0,inProgress:(null==o?void 0:o.filter(e=>e.state===S.TaskState.IN_PROGRESS).length)||0,done:(null==o?void 0:o.filter(e=>e.state===S.TaskState.DONE).length)||0,paused:(null==o?void 0:o.filter(e=>e.state===S.TaskState.PAUSED).length)||0,canceled:(null==o?void 0:o.filter(e=>e.state===S.TaskState.CANCELED).length)||0},G={total:B.length,backlog:B.filter(e=>e.state===S.TaskState.BACKLOG).length,inProgress:B.filter(e=>e.state===S.TaskState.IN_PROGRESS).length,done:B.filter(e=>e.state===S.TaskState.DONE).length,paused:B.filter(e=>e.state===S.TaskState.PAUSED).length,canceled:B.filter(e=>e.state===S.TaskState.CANCELED).length},U=e=>O[e]||{label:e,variant:"outline"},K=async(e,t)=>{try{await m.mutateAsync({id:e,data:{state:t}}),p.toast.success("작업 상태가 변경되었습니다")}catch(t){var s,l;let e=(null==t||null==(l=t.response)||null==(s=l.data)?void 0:s.detail)||"상태 변경에 실패했습니다";p.toast.error(e)}};return u||x?(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"작업을 불러오는 중..."})]})})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,t.jsx)(f.CheckSquare,{className:"h-8 w-8"}),"작업 관리"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"전체 작업 현황 및 상태 관리 - 모든 프로젝트의 작업을 한 곳에서"})]}),(0,t.jsx)(v,{})]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(b.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(i.Input,{placeholder:"작업명이나 프로젝트명으로 검색...",value:j,onChange:e=>g(e.target.value),className:"pl-10"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.Select,{value:N.toString(),onValueChange:e=>C(e),children:[(0,t.jsxs)(n.SelectTrigger,{className:"w-[140px]",children:[(0,t.jsx)(A,{className:"mr-2 h-4 w-4"}),(0,t.jsx)(n.SelectValue,{placeholder:"상태"})]}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"ALL",children:"모든 상태"}),Object.entries(S.TaskState).map(e=>{let[s,l]=e,a=O[l];return(0,t.jsx)(n.SelectItem,{value:l,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.icon,{className:"h-4 w-4"}),a.label]})},l)})]})]}),(0,t.jsxs)(n.Select,{value:y.toString(),onValueChange:e=>L("ALL"===e?"ALL":parseInt(e)),children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[180px]",children:(0,t.jsx)(n.SelectValue,{placeholder:"프로젝트"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"ALL",children:"모든 프로젝트"}),null==h?void 0:h.map(e=>(0,t.jsx)(n.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),(0,t.jsxs)(n.Select,{value:"".concat(E,"-").concat(P),onValueChange:e=>{let[t,s]=e.split("-");R(t),M(s)},children:[(0,t.jsxs)(n.SelectTrigger,{className:"w-[140px]",children:[(0,t.jsx)(w,{className:"mr-2 h-4 w-4"}),(0,t.jsx)(n.SelectValue,{placeholder:"정렬"})]}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"created-desc",children:"최신순"}),(0,t.jsx)(n.SelectItem,{value:"created-asc",children:"오래된순"}),(0,t.jsx)(n.SelectItem,{value:"title-asc",children:"이름순 (A-Z)"}),(0,t.jsx)(n.SelectItem,{value:"title-desc",children:"이름순 (Z-A)"}),(0,t.jsx)(n.SelectItem,{value:"priority-asc",children:"우선순위 (낮음)"}),(0,t.jsx)(n.SelectItem,{value:"priority-desc",children:"우선순위 (높음)"}),(0,t.jsx)(n.SelectItem,{value:"due_date-asc",children:"마감일 (빠름)"}),(0,t.jsx)(n.SelectItem,{value:"due_date-desc",children:"마감일 (늦음)"})]})]})]})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:Object.entries(V).map(e=>{let[s,a]=e,r="total"===s?null:O[s],i=(null==r?void 0:r.icon)||f.CheckSquare,n=G[s];return(0,t.jsx)(l.Card,{className:"cursor-pointer hover:shadow-md transition-shadow ".concat("total"===s&&"ALL"===N||N===s.toUpperCase()?"ring-2 ring-primary":""),onClick:()=>C("total"===s?"ALL":s.toUpperCase()),children:(0,t.jsx)(l.CardContent,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"total"===s?"전체":"backlog"===s?"대기":"inProgress"===s?"진행중":"done"===s?"완료":"paused"===s?"중단":"취소"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:j||"ALL"!==y?n:a}),(j||"ALL"!==y)&&a!==n&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["전체: ",a]})]}),(0,t.jsx)(i,{className:"h-8 w-8 text-muted-foreground"})]})})},s)})}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.CardTitle,{children:"작업 목록"}),(0,t.jsx)(l.CardDescription,{children:B.length?(0,t.jsxs)(t.Fragment,{children:[B.length,"개의 작업",(j||"ALL"!==N||"ALL"!==y)&&" (전체 ".concat((null==o?void 0:o.length)||0,"개 중)")]}):"조건에 맞는 작업이 없습니다"})]}),(j||"ALL"!==N||"ALL"!==y)&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[j&&(0,t.jsxs)(a.Badge,{variant:"outline",children:["검색: ",j,(0,t.jsx)(k.X,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>g("")})]}),"ALL"!==N&&(0,t.jsxs)(a.Badge,{variant:"outline",children:["상태: ",O[N].label,(0,t.jsx)(k.X,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>C("ALL")})]}),"ALL"!==y&&(0,t.jsxs)(a.Badge,{variant:"outline",children:["프로젝트: ",null==h||null==(e=h.find(e=>e.id===y))?void 0:e.name,(0,t.jsx)(k.X,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>L("ALL")})]}),(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{g(""),C("ALL"),L("ALL")},children:"전체 초기화"})]})]})}),(0,t.jsx)(l.CardContent,{children:0===B.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(f.CheckSquare,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:(null==o?void 0:o.length)?"조건에 맞는 작업이 없습니다":"작업이 없습니다"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:(null==o?void 0:o.length)?"다른 검색어나 필터를 사용해보세요":"새로운 작업을 생성해보세요"}),!(null==o?void 0:o.length)&&(0,t.jsx)(v,{})]}):(0,t.jsx)("div",{className:"space-y-4",children:B.map(e=>{let s=null==h?void 0:h.find(t=>t.id===e.project_id),i=U(e.state),n=(e=>{switch(e){case 1:return"최고";case 2:return"높음";case 3:return"보통";case 4:return"낮음";case 5:return"최하";default:return e.toString()}})(e.priority);return(0,t.jsxs)(l.Card,{className:"border-l-4 border-l-blue-500 hover:shadow-sm transition-shadow",children:[(0,t.jsx)(l.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:e.title}),(0,t.jsx)(a.Badge,{variant:i.variant,children:i.label})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(D,{className:"h-4 w-4"}),(0,t.jsx)(T.default,{href:"/projects/".concat(e.project_id),className:"hover:underline",children:(null==s?void 0:s.name)||"프로젝트 ".concat(e.project_id)})]}),e.due_date&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(_.Calendar,{className:"h-4 w-4"}),(0,F.format)(new Date(e.due_date),"yyyy-MM-dd")]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(I.Target,{className:"h-4 w-4"}),"우선순위: ",n]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,t.jsx)(T.default,{href:"/tasks/".concat(e.id),children:"상세보기"})}),(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,t.jsx)(T.default,{href:"/projects/".concat(e.project_id),children:"프로젝트 보기"})})]})]})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["생성: ",(0,F.format)(new Date(e.created_at),"MM/dd")]}),(0,t.jsxs)("span",{children:["컨텍스트 스위치: ",e.context_switch_count||0,"회"]}),(0,t.jsxs)("span",{children:["재작업: ",e.rework_count||0,"회"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:Object.values(S.TaskState).map(s=>(0,t.jsx)(r.Button,{variant:e.state===s?"default":"outline",size:"sm",onClick:()=>K(e.id,s),disabled:m.isPending,className:"min-w-[80px]",children:U(s).label},s))})]})})]},e.id)})})})]})]})}}]);