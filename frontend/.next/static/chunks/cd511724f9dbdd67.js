(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85071,e=>{"use strict";e.s(["useCreateTask",()=>c,"useTasks",()=>d,"useUpdateTaskState",()=>u]);var t=e.i(66027),s=e.i(54616),a=e.i(12598),r=e.i(16973),i=e.i(32661),l=e.i(93272);let n={all:["tasks"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),{filters:e}],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e]};function d(){return(0,t.useQuery)({queryKey:n.lists(),queryFn:()=>r.tasksApi.getAll().then(e=>e.data)})}function c(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:e=>r.tasksApi.create(e).then(e=>e.data),onSuccess:()=>{e.invalidateQueries({queryKey:n.lists()}),e.invalidateQueries({queryKey:i.projectKeys.lists()}),e.invalidateQueries({queryKey:l.dashboardKeys.kpis()})}})}function u(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:e=>{let{id:t,data:s}=e;return r.tasksApi.updateState(t,s).then(e=>e.data)},onSuccess:t=>{e.invalidateQueries({queryKey:n.lists()}),e.setQueryData(n.detail(t.id),t),e.invalidateQueries({queryKey:l.dashboardKeys.kpis()})}})}},26514,e=>{"use strict";e.s(["parseISO",()=>r]);var t=e.i(34662),s=e.i(77241),a=e.i(81092);function r(e,r){var x;let h,f,j=()=>(0,s.constructFrom)(null==r?void 0:r.in,NaN),p=null!=(x=null==r?void 0:r.additionalDigits)?x:2,N=function(e){let t,s={},a=e.split(i.dateTimeDelimiter);if(a.length>2)return s;if(/:/.test(a[0])?t=a[0]:(s.date=a[0],t=a[1],i.timeZoneDelimiter.test(s.date)&&(s.date=e.split(i.timeZoneDelimiter)[0],t=e.substr(s.date.length,e.length))),t){let e=i.timezone.exec(t);e?(s.time=t.replace(e[1],""),s.timezone=e[1]):s.time=t}return s}(e);if(N.date){let e=function(e,t){let s=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(s);if(!a)return{year:NaN,restDateString:""};let r=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?r:100*i,restDateString:e.slice((a[1]||a[2]).length)}}(N.date,p);h=function(e,t){var s,a,r,i,n,d,u;if(null===t)return new Date(NaN);let x=e.match(l);if(!x)return new Date(NaN);let h=!!x[4],f=c(x[1]),j=c(x[2])-1,p=c(x[3]),N=c(x[4]),g=c(x[5])-1;if(h){return(s=N,a=g,s>=1&&s<=53&&a>=0&&a<=6)?function(e,t,s){let a=new Date(0);a.setUTCFullYear(e,0,4);let r=a.getUTCDay()||7;return a.setUTCDate(a.getUTCDate()+((t-1)*7+s+1-r)),a}(t,N,g):new Date(NaN)}{let e=new Date(0);return(r=t,i=j,n=p,i>=0&&i<=11&&n>=1&&n<=(o[i]||(m(r)?29:28))&&(d=t,(u=f)>=1&&u<=(m(d)?366:365)))?(e.setUTCFullYear(t,j,Math.max(f,p)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!h||isNaN(+h))return j();let g=+h,v=0;if(N.time&&isNaN(v=function(e){var s,a,r;let i=e.match(n);if(!i)return NaN;let l=u(i[1]),d=u(i[2]),c=u(i[3]);return(s=l,a=d,r=c,24===s?0===a&&0===r:r>=0&&r<60&&a>=0&&a<60&&s>=0&&s<25)?l*t.millisecondsInHour+d*t.millisecondsInMinute+1e3*c:NaN}(N.time)))return j();if(N.timezone){if(isNaN(f=function(e){var s;if("Z"===e)return 0;let a=e.match(d);if(!a)return 0;let r="+"===a[1]?-1:1,i=parseInt(a[2]),l=a[3]&&parseInt(a[3])||0;return(s=l)>=0&&s<=59?r*(i*t.millisecondsInHour+l*t.millisecondsInMinute):NaN}(N.timezone)))return j()}else{let e=new Date(g+v),t=(0,a.toDate)(0,null==r?void 0:r.in);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return(0,a.toDate)(g+v+f,null==r?void 0:r.in)}let i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,n=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(e){return e?parseInt(e):1}function u(e){return e&&parseFloat(e.replace(",","."))||0}let o=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}},70934,e=>{"use strict";e.s(["createBrief",()=>s,"deleteBrief",()=>i,"getBriefByTask",()=>a,"updateBrief",()=>r]);var t=e.i(16973);let s=async e=>{try{let s=await t.default.post("/briefs",e,{validateStatus:e=>200===e||201===e||409===e});return 409===s.status?null:s.data}catch(e){return null}},a=async e=>{try{let s=await t.default.get("/briefs/task/".concat(e),{validateStatus:e=>200===e||404===e});return 200===s.status?s.data:null}catch(e){return null}},r=(e,s)=>t.default.patch("/briefs/".concat(e),s).then(e=>e.data),i=e=>t.default.delete("/briefs/".concat(e)).then(e=>e.data)},51261,e=>{"use strict";e.s(["default",()=>N]);var t=e.i(43476),s=e.i(71645),a=e.i(15288),r=e.i(87486),i=e.i(19455),l=e.i(93479),n=e.i(66027),d=e.i(70934),c=e.i(85071),u=e.i(32661),o=e.i(78583),m=e.i(55436),x=e.i(87316),h=e.i(75505),f=e.i(1851),j=e.i(26514),p=e.i(22016);function N(){let[e,N]=(0,s.useState)(""),{data:g,isLoading:v}=(0,c.useTasks)(),{data:y,isLoading:C}=(0,u.useProjects)(),b=(null==y?void 0:y.reduce((e,t)=>(e[t.id]=t,e),{}))||{},T=(0,n.useQuery)({queryKey:["all-briefs",null==g?void 0:g.map(e=>e.id).join(",")],queryFn:async()=>g?(await Promise.allSettled(g.map(async e=>{let t=await (0,d.getBriefByTask)(e.id);return t?{task:e,brief:t,project:b[e.project_id]}:null}))).filter(e=>"fulfilled"===e.status&&null!==e.value).map(e=>e.value):[],enabled:!!g&&!!y,retry:!1}),w=T.data||[],D=w.filter(t=>{var s,a;if(!e)return!0;let r=e.toLowerCase();return t.task.title.toLowerCase().includes(r)||t.brief.purpose.toLowerCase().includes(r)||t.brief.success_criteria.toLowerCase().includes(r)||t.brief.constraints.toLowerCase().includes(r)||t.brief.priority.toLowerCase().includes(r)||t.brief.validation.toLowerCase().includes(r)||(null!=(a=null==(s=t.project)?void 0:s.name)?a:"").toLowerCase().includes(r)});return v||C||T.isLoading?(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"5SB를 불러오는 중..."})]})})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,t.jsx)(o.FileText,{className:"h-8 w-8"}),"5문장 브리프 (5SB)"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"작성된 모든 5문장 브리프를 한 곳에서 관리"})]}),(0,t.jsxs)("div",{className:"relative max-w-md",children:[(0,t.jsx)(m.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(l.Input,{placeholder:"브리프 내용, 작업명, 프로젝트명으로 검색...",value:e,onChange:e=>N(e.target.value),className:"pl-10"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-lg",children:"전체 5SB"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold",children:w.length})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-lg",children:"전체 작업"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold",children:(null==g?void 0:g.length)||0})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-lg",children:"작성율"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsxs)("div",{className:"text-3xl font-bold",children:[(null==g?void 0:g.length)?Math.round(w.length/g.length*100):0,"%"]})})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"5SB 목록"}),(0,t.jsx)(a.CardDescription,{children:D.length?"".concat(D.length,"개의 5문장 브리프"):"검색 조건에 맞는 5SB가 없습니다"})]}),(0,t.jsx)(a.CardContent,{children:0===D.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(o.FileText,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:0===w.length?"작성된 5SB가 없습니다":"검색 결과가 없습니다"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:0===w.length?"프로젝트 상세 페이지에서 작업별로 5SB를 작성해보세요":"다른 검색어로 시도해보세요"}),0===w.length&&(0,t.jsx)(i.Button,{asChild:!0,children:(0,t.jsx)(p.default,{href:"/projects",children:"프로젝트 보기"})})]}):(0,t.jsx)("div",{className:"space-y-6",children:D.map(e=>{var s;return(0,t.jsxs)(a.Card,{className:"border-l-4 border-l-blue-500",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.CardTitle,{className:"text-xl mb-2",children:e.task.title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.FolderOpen,{className:"h-4 w-4"}),(0,t.jsx)(p.default,{href:"/projects/".concat(e.task.project_id),className:"hover:underline",children:(null==(s=e.project)?void 0:s.name)||"프로젝트 ".concat(e.task.project_id)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Calendar,{className:"h-4 w-4"}),(0,f.format)((0,j.parseISO)(e.brief.created_at),"yyyy-MM-dd")]})]})]}),(0,t.jsxs)(r.Badge,{variant:"secondary",children:["P",e.task.priority]})]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1",children:"1. 목적 (Purpose)"}),(0,t.jsx)("p",{className:"text-sm",children:e.brief.purpose})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1",children:"2. 성공 기준 (Success Criteria)"}),(0,t.jsx)("p",{className:"text-sm",children:e.brief.success_criteria})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1",children:"3. 제약사항 (Constraints)"}),(0,t.jsx)("p",{className:"text-sm",children:e.brief.constraints})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1",children:"4. 우선순위 (Priority)"}),(0,t.jsx)("p",{className:"text-sm",children:e.brief.priority})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1",children:"5. 검증 방법 (Validation)"}),(0,t.jsx)("p",{className:"text-sm",children:e.brief.validation})]}),(0,t.jsx)("div",{className:"flex justify-end pt-2",children:(0,t.jsx)(i.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,t.jsx)(p.default,{href:"/projects/".concat(e.task.project_id),children:"작업 보기"})})})]})]},e.task.id)})})})]})]})}}]);