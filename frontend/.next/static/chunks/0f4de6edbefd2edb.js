(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";e.s(["AlertTriangle",()=>t],78894);let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},37727,e=>{"use strict";e.s(["X",()=>t.default]);var t=e.i(41947)},3116,e=>{"use strict";e.s(["Clock",()=>t],3116);let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},69638,e=>{"use strict";e.s(["CheckCircle",()=>t],69638);let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},89271,e=>{"use strict";e.s(["NotificationStatus",()=>a,"NotificationType",()=>s,"TaskState",()=>t,"TemplateType",()=>i]);var t=function(e){return e.BACKLOG="BACKLOG",e.IN_PROGRESS="IN_PROGRESS",e.DONE="DONE",e.PAUSED="PAUSED",e.CANCELED="CANCELED",e}({}),s=function(e){return e.DUE_DATE_REMINDER="DUE_DATE_REMINDER",e.OVERDUE_TASK="OVERDUE_TASK",e.MISSING_BRIEF="MISSING_BRIEF",e.MISSING_DOD="MISSING_DOD",e.STALE_TASK="STALE_TASK",e.REVIEW_SCHEDULE="REVIEW_SCHEDULE",e}({}),a=function(e){return e.PENDING="PENDING",e.SENT="SENT",e.READ="READ",e.DISMISSED="DISMISSED",e}({}),i=function(e){return e.BRIEF="BRIEF",e.DOD="DOD",e.PROJECT="PROJECT",e}({})},39616,e=>{"use strict";e.s(["Settings",()=>t],39616);let t=(0,e.i(75254).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},11765,e=>{"use strict";e.s(["default",()=>W],11765);var t=e.i(43476),s=e.i(71645),a=e.i(15288),i=e.i(87486),n=e.i(19455),l=e.i(77572),r=e.i(81140),d=e.i(20783),c=e.i(30030),o=e.i(69340),u=e.i(99682),x=e.i(35804),m=e.i(48425),h="Switch",[f,p]=(0,c.createContextScope)(h),[g,j]=f(h),N=s.forwardRef((e,a)=>{let{__scopeSwitch:i,name:n,checked:l,defaultChecked:c,required:u,disabled:x,value:f="on",onCheckedChange:p,form:j,...N}=e,[v,y]=s.useState(null),_=(0,d.useComposedRefs)(a,e=>y(e)),S=s.useRef(!1),E=!v||j||!!v.closest("form"),[k,D]=(0,o.useControllableState)({prop:l,defaultProp:null!=c&&c,onChange:p,caller:h});return(0,t.jsxs)(g,{scope:i,checked:k,disabled:x,children:[(0,t.jsx)(m.Primitive.button,{type:"button",role:"switch","aria-checked":k,"aria-required":u,"data-state":C(k),"data-disabled":x?"":void 0,disabled:x,value:f,...N,ref:_,onClick:(0,r.composeEventHandlers)(e.onClick,e=>{D(e=>!e),E&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),E&&(0,t.jsx)(b,{control:v,bubbles:!S.current,name:n,value:f,checked:k,required:u,disabled:x,form:j,style:{transform:"translateX(-100%)"}})]})});N.displayName=h;var v="SwitchThumb",y=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...i}=e,n=j(v,a);return(0,t.jsx)(m.Primitive.span,{"data-state":C(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:s})});y.displayName=v;var b=s.forwardRef((e,a)=>{let{__scopeSwitch:i,control:n,checked:l,bubbles:r=!0,...c}=e,o=s.useRef(null),m=(0,d.useComposedRefs)(o,a),h=(0,u.usePrevious)(l),f=(0,x.useSize)(n);return s.useEffect(()=>{let e=o.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==l&&t){let s=new Event("click",{bubbles:r});t.call(e,l),e.dispatchEvent(s)}},[h,l,r]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...c,tabIndex:-1,ref:m,style:{...c.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function C(e){return e?"checked":"unchecked"}b.displayName="SwitchBubbleInput";var _=e.i(75157);let S=s.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)(N,{className:(0,_.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...i,ref:s,children:(0,t.jsx)(y,{className:(0,_.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});S.displayName=N.displayName;var E=e.i(93479),k=e.i(10204),D=e.i(66027),w=e.i(54616),T=e.i(12598),I=e.i(16973),A=e.i(46696);let R={all:["notifications"],lists:()=>[...R.all,"list"],list:(e,t)=>[...R.lists(),{status:e,limit:t}],pending:()=>[...R.all,"pending"],settings:()=>[...R.all,"settings"],stats:()=>[...R.all,"stats"]};var M=e.i(89271),P=e.i(45423),L=e.i(39616),B=e.i(69638),q=e.i(37727),O=e.i(78894),F=e.i(3116),K=e.i(78583),G=e.i(20278),U=e.i(87316),Q=e.i(86311);let H=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var z=e.i(94913),V=e.i(16550);let X={[M.NotificationType.DUE_DATE_REMINDER]:{label:"마감일 알림",icon:U.Calendar,color:"bg-blue-100 text-blue-800"},[M.NotificationType.OVERDUE_TASK]:{label:"지연 작업",icon:O.AlertTriangle,color:"bg-red-100 text-red-800"},[M.NotificationType.MISSING_BRIEF]:{label:"5SB 미작성",icon:K.FileText,color:"bg-yellow-100 text-yellow-800"},[M.NotificationType.MISSING_DOD]:{label:"DoD 미설정",icon:G.Target,color:"bg-orange-100 text-orange-800"},[M.NotificationType.STALE_TASK]:{label:"장기 미진행",icon:F.Clock,color:"bg-gray-100 text-gray-800"},[M.NotificationType.REVIEW_SCHEDULE]:{label:"리뷰 스케줄",icon:Q.MessageSquare,color:"bg-purple-100 text-purple-800"}};function W(){var e,r;let[d,c]=(0,s.useState)("notifications"),[o,u]=(0,s.useState)({}),{data:x,isLoading:m}=(0,D.useQuery)({queryKey:R.list(void 0,void 0),queryFn:()=>I.notificationsApi.getAll(e,r).then(e=>e.data),refetchInterval:3e4}),{data:h}=(0,D.useQuery)({queryKey:R.pending(),queryFn:()=>I.notificationsApi.getPending().then(e=>e.data),refetchInterval:15e3}),{data:f,isLoading:p}=(0,D.useQuery)({queryKey:R.settings(),queryFn:()=>I.notificationsApi.getSettings().then(e=>e.data)}),{data:g}=(0,D.useQuery)({queryKey:R.stats(),queryFn:()=>I.notificationsApi.getStats().then(e=>e.data),refetchInterval:6e4}),j=function(){let e=(0,T.useQueryClient)();return(0,w.useMutation)({mutationFn:()=>I.notificationsApi.generate().then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:R.all}),A.toast.success(t.message)},onError:e=>{var t,s;let a=(null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.detail)||"알림 생성에 실패했습니다";A.toast.error(a)}})}(),N=function(){let e=(0,T.useQueryClient)();return(0,w.useMutation)({mutationFn:e=>I.notificationsApi.markRead(e).then(e=>e.data),onSuccess:()=>{e.invalidateQueries({queryKey:R.all})},onError:e=>{var t,s;let a=(null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.detail)||"알림 처리에 실패했습니다";A.toast.error(a)}})}(),v=function(){let e=(0,T.useQueryClient)();return(0,w.useMutation)({mutationFn:e=>I.notificationsApi.dismiss(e).then(e=>e.data),onSuccess:()=>{e.invalidateQueries({queryKey:R.all})},onError:e=>{var t,s;let a=(null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.detail)||"알림 해제에 실패했습니다";A.toast.error(a)}})}(),y=function(){let e=(0,T.useQueryClient)();return(0,w.useMutation)({mutationFn:e=>I.notificationsApi.updateSettings(e).then(e=>e.data),onSuccess:t=>{e.invalidateQueries({queryKey:R.settings()}),A.toast.success(t.message)},onError:e=>{var t,s;let a=(null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.detail)||"설정 업데이트에 실패했습니다";A.toast.error(a)}})}();(0,s.useEffect)(()=>{f&&u(f)},[f]);let b=e=>{N.mutate(e)},C=e=>{v.mutate(e)},_=(e,t)=>{u(s=>({...s,[e]:t}))};return m||p?(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"알림을 불러오는 중..."})]})})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,t.jsx)(P.Bell,{className:"h-8 w-8"}),"알림 센터"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"작업 관리 알림 및 리마인더 설정"})]}),(0,t.jsxs)(n.Button,{onClick:()=>{j.mutate()},disabled:j.isPending,children:[(0,t.jsx)(H,{className:"mr-2 h-4 w-4"}),j.isPending?"생성 중...":"알림 생성"]})]}),g&&(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsx)(a.Card,{children:(0,t.jsxs)(a.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:g.pending}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"대기 중"})]})}),(0,t.jsx)(a.Card,{children:(0,t.jsxs)(a.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:g.sent}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"발송됨"})]})}),(0,t.jsx)(a.Card,{children:(0,t.jsxs)(a.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:g.read}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"읽음"})]})}),(0,t.jsx)(a.Card,{children:(0,t.jsxs)(a.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:g.dismissed}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"해제됨"})]})}),(0,t.jsx)(a.Card,{children:(0,t.jsxs)(a.CardContent,{className:"p-4 text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:g.total}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"총 알림"})]})})]})]}),(0,t.jsxs)(l.Tabs,{value:d,onValueChange:c,children:[(0,t.jsxs)(l.TabsList,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(l.TabsTrigger,{value:"notifications",children:"알림 목록"}),(0,t.jsx)(l.TabsTrigger,{value:"settings",children:"설정"})]}),(0,t.jsxs)(l.TabsContent,{value:"notifications",className:"space-y-4",children:[h&&h.length>0&&(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(O.AlertTriangle,{className:"h-5 w-5 text-orange-500"}),"대기중인 알림 (",h.length,")"]}),(0,t.jsx)(a.CardDescription,{children:"즉시 확인이 필요한 알림들입니다"})]}),(0,t.jsx)(a.CardContent,{className:"space-y-3",children:h.map(e=>{let s=X[e.type],a=s.icon;return(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-orange-50",children:[(0,t.jsx)(a,{className:"h-5 w-5 text-orange-600 mt-1"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsx)(i.Badge,{variant:"outline",className:s.color,children:s.label})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,z.formatDistanceToNow)(new Date(e.created_at),{addSuffix:!0,locale:V.ko})})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>b(e.id),disabled:N.isPending,children:(0,t.jsx)(B.CheckCircle,{className:"h-4 w-4"})}),(0,t.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>C(e.id),disabled:v.isPending,children:(0,t.jsx)(q.X,{className:"h-4 w-4"})})]})]},e.id)})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"전체 알림"}),(0,t.jsx)(a.CardDescription,{children:(null==x?void 0:x.length)?"".concat(x.length,"개의 알림"):"알림이 없습니다"})]}),(0,t.jsx)(a.CardContent,{children:(null==x?void 0:x.length)?(0,t.jsx)("div",{className:"space-y-3",children:x.map(e=>{let s=X[e.type],a=s.icon;return(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg ".concat(e.status===M.NotificationStatus.READ?"bg-gray-50":"bg-white"),children:[(0,t.jsx)(a,{className:"h-5 w-5 text-muted-foreground mt-1"}),(0,t.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium",children:e.title}),(0,t.jsx)(i.Badge,{variant:"outline",className:s.color,children:s.label}),(0,t.jsxs)(i.Badge,{variant:e.status===M.NotificationStatus.READ?"secondary":"default",children:[e.status===M.NotificationStatus.PENDING&&"대기",e.status===M.NotificationStatus.SENT&&"발송",e.status===M.NotificationStatus.READ&&"읽음",e.status===M.NotificationStatus.DISMISSED&&"해제"]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.message}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,z.formatDistanceToNow)(new Date(e.created_at),{addSuffix:!0,locale:V.ko})})]}),e.status!==M.NotificationStatus.READ&&e.status!==M.NotificationStatus.DISMISSED&&(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>b(e.id),disabled:N.isPending,children:(0,t.jsx)(B.CheckCircle,{className:"h-4 w-4"})}),(0,t.jsx)(n.Button,{size:"sm",variant:"outline",onClick:()=>C(e.id),disabled:v.isPending,children:(0,t.jsx)(q.X,{className:"h-4 w-4"})})]})]},e.id)})}):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(P.Bell,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"알림이 없습니다"})]})})]})]}),(0,t.jsx)(l.TabsContent,{value:"settings",className:"space-y-4",children:(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsxs)(a.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(L.Settings,{className:"h-5 w-5"}),"알림 설정"]}),(0,t.jsx)(a.CardDescription,{children:"알림 유형별 활성화 설정 및 주기 조정"})]}),(0,t.jsx)(a.CardContent,{className:"space-y-6",children:o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{className:"text-base font-medium",children:"마감일 알림"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"작업 마감일 기반 알림"})]}),(0,t.jsx)(S,{checked:o.enable_due_date_reminders,onCheckedChange:e=>_("enable_due_date_reminders",e)})]}),o.enable_due_date_reminders&&(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)(k.Label,{htmlFor:"due_date_days",children:"마감 며칠 전에 알림"}),(0,t.jsx)(E.Input,{id:"due_date_days",type:"number",min:"1",max:"30",value:o.due_date_reminder_days,onChange:e=>_("due_date_reminder_days",parseInt(e.target.value)),className:"w-20 mt-1"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{className:"text-base font-medium",children:"5SB 미작성 알림"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"5문장 브리프가 없는 작업 알림"})]}),(0,t.jsx)(S,{checked:o.enable_missing_brief_alerts,onCheckedChange:e=>_("enable_missing_brief_alerts",e)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{className:"text-base font-medium",children:"DoD 미설정 알림"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"완료 정의가 없는 작업 알림"})]}),(0,t.jsx)(S,{checked:o.enable_missing_dod_alerts,onCheckedChange:e=>_("enable_missing_dod_alerts",e)})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{className:"text-base font-medium",children:"장기 미진행 작업 알림"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"오래된 진행중 작업 알림"})]}),(0,t.jsx)(S,{checked:o.enable_stale_task_alerts,onCheckedChange:e=>_("enable_stale_task_alerts",e)})]}),o.enable_stale_task_alerts&&(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)(k.Label,{htmlFor:"stale_days",children:"며칠 후 장기 미진행으로 간주"}),(0,t.jsx)(E.Input,{id:"stale_days",type:"number",min:"1",max:"30",value:o.stale_task_days,onChange:e=>_("stale_task_days",parseInt(e.target.value)),className:"w-20 mt-1"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k.Label,{className:"text-base font-medium",children:"정기 리뷰 알림"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"프로젝트 정기 리뷰 스케줄 알림"})]}),(0,t.jsx)(S,{checked:o.enable_review_reminders,onCheckedChange:e=>_("enable_review_reminders",e)})]}),o.enable_review_reminders&&(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)(k.Label,{htmlFor:"review_frequency",children:"리뷰 주기 (일)"}),(0,t.jsx)(E.Input,{id:"review_frequency",type:"number",min:"1",max:"30",value:o.review_reminder_frequency_days,onChange:e=>_("review_reminder_frequency_days",parseInt(e.target.value)),className:"w-20 mt-1"})]})]}),(0,t.jsx)(n.Button,{onClick:()=>{y.mutate(o)},disabled:y.isPending,children:y.isPending?"저장 중...":"설정 저장"})]})})]})})]})]})}}]);