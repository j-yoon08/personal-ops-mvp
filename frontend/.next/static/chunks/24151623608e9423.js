(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5456,e=>{"use strict";e.s(["default",()=>tg],5456);var r=e.i(43476),t=e.i(71645),n=e.i(18566),s=e.i(15288),a=e.i(19455),o=e.i(32661),i=e.i(85071),l=e.i(76639),d=e.i(3133),c=e.i(93479),u=e.i(67489),m=e.i(7233),x=e.i(53145),p=e.i(94814),h=e.i(62201),j=e.i(46696);let g=h.object({project_id:h.string().min(1,"프로젝트를 선택해주세요"),title:h.string().min(1,"작업 제목을 입력해주세요"),priority:h.string().min(1,"우선순위를 선택해주세요"),due_date:h.string().optional()});function v(e){let{defaultProjectId:n,triggerText:s="새 작업"}=e,[h,v]=(0,t.useState)(!1),f=(0,i.useCreateTask)(),{data:y,isLoading:b}=(0,o.useProjects)(),F=y&&y.length>0,w=(0,x.useForm)({resolver:(0,p.zodResolver)(g),defaultValues:{project_id:n?n.toString():"",title:"",priority:"3",due_date:""}});(0,t.useState)(()=>{n&&w.setValue("project_id",n.toString())});let C=async e=>{try{let r={project_id:parseInt(e.project_id),title:e.title,priority:parseInt(e.priority),due_date:e.due_date||void 0};await f.mutateAsync(r),j.toast.success("작업이 생성되었습니다!"),w.reset({project_id:n?n.toString():"",title:"",priority:"3",due_date:""}),v(!1)}catch(n){var r,t;let e=(null==n||null==(t=n.response)||null==(r=t.data)?void 0:r.detail)||"작업 생성에 실패했습니다.";j.toast.error(e),console.error("Error creating task:",n)}};return(0,r.jsxs)(l.Dialog,{open:h,onOpenChange:v,children:[(0,r.jsx)(l.DialogTrigger,{asChild:!0,children:(0,r.jsxs)(a.Button,{variant:"outline",disabled:!F,title:F?"":"먼저 프로젝트를 생성해주세요",children:[(0,r.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),s]})}),(0,r.jsxs)(l.DialogContent,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"새 작업 생성"}),(0,r.jsx)(l.DialogDescription,{children:F?"새로운 작업을 생성합니다. 프로젝트와 작업 제목은 필수입니다.":"작업을 생성하려면 먼저 프로젝트를 생성해주세요."})]}),F?(0,r.jsx)(d.Form,{...w,children:(0,r.jsxs)("form",{onSubmit:w.handleSubmit(C),className:"space-y-4",children:[(0,r.jsx)(d.FormField,{control:w.control,name:"project_id",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"프로젝트 *"}),(0,r.jsxs)(u.Select,{onValueChange:t.onChange,value:t.value,disabled:!!n,children:[(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(u.SelectTrigger,{children:(0,r.jsx)(u.SelectValue,{placeholder:"프로젝트를 선택하세요"})})}),(0,r.jsx)(u.SelectContent,{children:null==y?void 0:y.map(e=>(0,r.jsx)(u.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:w.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"작업 제목 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"예: 데이터베이스 설계",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:w.control,name:"priority",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"우선순위 *"}),(0,r.jsxs)(u.Select,{onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(u.SelectTrigger,{children:(0,r.jsx)(u.SelectValue,{placeholder:"우선순위 선택"})})}),(0,r.jsxs)(u.SelectContent,{children:[(0,r.jsx)(u.SelectItem,{value:"1",children:"1 - 최고"}),(0,r.jsx)(u.SelectItem,{value:"2",children:"2 - 높음"}),(0,r.jsx)(u.SelectItem,{value:"3",children:"3 - 보통"}),(0,r.jsx)(u.SelectItem,{value:"4",children:"4 - 낮음"}),(0,r.jsx)(u.SelectItem,{value:"5",children:"5 - 최하"})]})]}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:w.control,name:"due_date",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"마감일 (선택)"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"date",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>v(!1),children:"취소"}),(0,r.jsx)(a.Button,{type:"submit",disabled:f.isPending,children:f.isPending?"생성 중...":"생성"})]})]})}):(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:b?"프로젝트를 불러오는 중...":"생성된 프로젝트가 없습니다."}),(0,r.jsx)(a.Button,{onClick:()=>v(!1),children:"확인"})]})]})]})}var f=e.i(30030),y=e.i(20783),b=e.i(26999),F=e.i(81140),w=e.i(91918),C="AlertDialog",[D,N]=(0,f.createContextScope)(C,[b.createDialogScope]),_=(0,b.createDialogScope)(),k=e=>{let{__scopeAlertDialog:t,...n}=e,s=_(t);return(0,r.jsx)(b.Root,{...s,...n,modal:!0})};k.displayName=C,t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...s}=e,a=_(n);return(0,r.jsx)(b.Trigger,{...a,...s,ref:t})}).displayName="AlertDialogTrigger";var S=e=>{let{__scopeAlertDialog:t,...n}=e,s=_(t);return(0,r.jsx)(b.Portal,{...s,...n})};S.displayName="AlertDialogPortal";var M=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...s}=e,a=_(n);return(0,r.jsx)(b.Overlay,{...a,...s,ref:t})});M.displayName="AlertDialogOverlay";var P="AlertDialogContent",[T,R]=D(P),I=(0,w.createSlottable)("AlertDialogContent"),E=t.forwardRef((e,n)=>{let{__scopeAlertDialog:s,children:a,...o}=e,i=_(s),l=t.useRef(null),d=(0,y.useComposedRefs)(n,l),c=t.useRef(null);return(0,r.jsx)(b.WarningProvider,{contentName:P,titleName:L,docsSlug:"alert-dialog",children:(0,r.jsx)(T,{scope:s,cancelRef:c,children:(0,r.jsxs)(b.Content,{role:"alertdialog",...i,...o,ref:d,onOpenAutoFocus:(0,F.composeEventHandlers)(o.onOpenAutoFocus,e=>{var r;e.preventDefault(),null==(r=c.current)||r.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,r.jsx)(I,{children:a}),(0,r.jsx)(Q,{contentRef:l})]})})})});E.displayName=P;var L="AlertDialogTitle",B=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...s}=e,a=_(n);return(0,r.jsx)(b.Title,{...a,...s,ref:t})});B.displayName=L;var O="AlertDialogDescription",A=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...s}=e,a=_(n);return(0,r.jsx)(b.Description,{...a,...s,ref:t})});A.displayName=O;var K=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...s}=e,a=_(n);return(0,r.jsx)(b.Close,{...a,...s,ref:t})});K.displayName="AlertDialogAction";var q="AlertDialogCancel",H=t.forwardRef((e,t)=>{let{__scopeAlertDialog:n,...s}=e,{cancelRef:a}=R(q,n),o=_(n),i=(0,y.useComposedRefs)(t,a);return(0,r.jsx)(b.Close,{...o,...s,ref:i})});H.displayName=q;var Q=e=>{let{contentRef:r}=e,n="`".concat(P,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(P,"` by passing a `").concat(O,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(P,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return t.useEffect(()=>{var e;document.getElementById(null==(e=r.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(n)},[n,r]),null},z=e.i(75157);function V(e){let{...t}=e;return(0,r.jsx)(k,{"data-slot":"alert-dialog",...t})}function G(e){let{...t}=e;return(0,r.jsx)(S,{"data-slot":"alert-dialog-portal",...t})}function U(e){let{className:t,...n}=e;return(0,r.jsx)(M,{"data-slot":"alert-dialog-overlay",className:(0,z.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...n})}function X(e){let{className:t,...n}=e;return(0,r.jsxs)(G,{children:[(0,r.jsx)(U,{}),(0,r.jsx)(E,{"data-slot":"alert-dialog-content",className:(0,z.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n})]})}function Y(e){let{className:t,...n}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,z.cn)("flex flex-col gap-2 text-center sm:text-left",t),...n})}function W(e){let{className:t,...n}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,z.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...n})}function Z(e){let{className:t,...n}=e;return(0,r.jsx)(B,{"data-slot":"alert-dialog-title",className:(0,z.cn)("text-lg font-semibold",t),...n})}function J(e){let{className:t,...n}=e;return(0,r.jsx)(A,{"data-slot":"alert-dialog-description",className:(0,z.cn)("text-muted-foreground text-sm",t),...n})}function $(e){let{className:t,...n}=e;return(0,r.jsx)(K,{className:(0,z.cn)((0,a.buttonVariants)(),t),...n})}function ee(e){let{className:t,...n}=e;return(0,r.jsx)(H,{className:(0,z.cn)((0,a.buttonVariants)({variant:"outline"}),t),...n})}var er=e.i(69340),et=e.i(48425),en=e.i(75830),es=e.i(86318),ea=e.i(26330),eo=e.i(3536),ei=e.i(65491),el=e.i(10772),ed=e.i(53660),ec=e.i(74606),eu=e.i(96626),em=e.i(42727),ex=e.i(30207),ep=e.i(86312),eh=e.i(85369),ej=["Enter"," "],eg=["ArrowUp","PageDown","End"],ev=["ArrowDown","PageUp","Home",...eg],ef={ltr:[...ej,"ArrowRight"],rtl:[...ej,"ArrowLeft"]},ey={ltr:["ArrowLeft"],rtl:["ArrowRight"]},eb="Menu",[eF,ew,eC]=(0,en.createCollection)(eb),[eD,eN]=(0,f.createContextScope)(eb,[eC,ed.createPopperScope,em.createRovingFocusGroupScope]),e_=(0,ed.createPopperScope)(),ek=(0,em.createRovingFocusGroupScope)(),[eS,eM]=eD(eb),[eP,eT]=eD(eb),eR=e=>{let{__scopeMenu:n,open:s=!1,children:a,dir:o,onOpenChange:i,modal:l=!0}=e,d=e_(n),[c,u]=t.useState(null),m=t.useRef(!1),x=(0,ex.useCallbackRef)(i),p=(0,es.useDirection)(o);return t.useEffect(()=>{let e=()=>{m.current=!0,document.addEventListener("pointerdown",r,{capture:!0,once:!0}),document.addEventListener("pointermove",r,{capture:!0,once:!0})},r=()=>m.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",r,{capture:!0}),document.removeEventListener("pointermove",r,{capture:!0})}},[]),(0,r.jsx)(ed.Root,{...d,children:(0,r.jsx)(eS,{scope:n,open:s,onOpenChange:x,content:c,onContentChange:u,children:(0,r.jsx)(eP,{scope:n,onClose:t.useCallback(()=>x(!1),[x]),isUsingKeyboardRef:m,dir:p,modal:l,children:a})})})};eR.displayName=eb;var eI=t.forwardRef((e,t)=>{let{__scopeMenu:n,...s}=e,a=e_(n);return(0,r.jsx)(ed.Anchor,{...a,...s,ref:t})});eI.displayName="MenuAnchor";var eE="MenuPortal",[eL,eB]=eD(eE,{forceMount:void 0}),eO=e=>{let{__scopeMenu:t,forceMount:n,children:s,container:a}=e,o=eM(eE,t);return(0,r.jsx)(eL,{scope:t,forceMount:n,children:(0,r.jsx)(eu.Presence,{present:n||o.open,children:(0,r.jsx)(ec.Portal,{asChild:!0,container:a,children:s})})})};eO.displayName=eE;var eA="MenuContent",[eK,eq]=eD(eA),eH=t.forwardRef((e,t)=>{let n=eB(eA,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,o=eM(eA,e.__scopeMenu),i=eT(eA,e.__scopeMenu);return(0,r.jsx)(eF.Provider,{scope:e.__scopeMenu,children:(0,r.jsx)(eu.Presence,{present:s||o.open,children:(0,r.jsx)(eF.Slot,{scope:e.__scopeMenu,children:i.modal?(0,r.jsx)(eQ,{...a,ref:t}):(0,r.jsx)(ez,{...a,ref:t})})})})}),eQ=t.forwardRef((e,n)=>{let s=eM(eA,e.__scopeMenu),a=t.useRef(null),o=(0,y.useComposedRefs)(n,a);return t.useEffect(()=>{let e=a.current;if(e)return(0,ep.hideOthers)(e)},[]),(0,r.jsx)(eG,{...e,ref:o,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:(0,F.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)})}),ez=t.forwardRef((e,t)=>{let n=eM(eA,e.__scopeMenu);return(0,r.jsx)(eG,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),eV=(0,w.createSlot)("MenuContent.ScrollLock"),eG=t.forwardRef((e,n)=>{let{__scopeMenu:s,loop:a=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:x,onInteractOutside:p,onDismiss:h,disableOutsideScroll:j,...g}=e,v=eM(eA,s),f=eT(eA,s),b=e_(s),w=ek(s),C=ew(s),[D,N]=t.useState(null),_=t.useRef(null),k=(0,y.useComposedRefs)(n,_,v.onContentChange),S=t.useRef(0),M=t.useRef(""),P=t.useRef(0),T=t.useRef(null),R=t.useRef("right"),I=t.useRef(0),E=j?eh.RemoveScroll:t.Fragment;t.useEffect(()=>()=>window.clearTimeout(S.current),[]),(0,eo.useFocusGuards)();let L=t.useCallback(e=>{var r,t;return R.current===(null==(r=T.current)?void 0:r.side)&&function(e,r){return!!r&&function(e,r){let{x:t,y:n}=e,s=!1;for(let e=0,a=r.length-1;e<r.length;a=e++){let o=r[e],i=r[a],l=o.x,d=o.y,c=i.x,u=i.y;d>n!=u>n&&t<(c-l)*(n-d)/(u-d)+l&&(s=!s)}return s}({x:e.clientX,y:e.clientY},r)}(e,null==(t=T.current)?void 0:t.area)},[]);return(0,r.jsx)(eK,{scope:s,searchRef:M,onItemEnter:t.useCallback(e=>{L(e)&&e.preventDefault()},[L]),onItemLeave:t.useCallback(e=>{var r;L(e)||(null==(r=_.current)||r.focus(),N(null))},[L]),onTriggerLeave:t.useCallback(e=>{L(e)&&e.preventDefault()},[L]),pointerGraceTimerRef:P,onPointerGraceIntentChange:t.useCallback(e=>{T.current=e},[]),children:(0,r.jsx)(E,{...j?{as:eV,allowPinchZoom:!0}:void 0,children:(0,r.jsx)(ei.FocusScope,{asChild:!0,trapped:o,onMountAutoFocus:(0,F.composeEventHandlers)(i,e=>{var r;e.preventDefault(),null==(r=_.current)||r.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:(0,r.jsx)(ea.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:u,onPointerDownOutside:m,onFocusOutside:x,onInteractOutside:p,onDismiss:h,children:(0,r.jsx)(em.Root,{asChild:!0,...w,dir:f.dir,orientation:"vertical",loop:a,currentTabStopId:D,onCurrentTabStopIdChange:N,onEntryFocus:(0,F.composeEventHandlers)(c,e=>{f.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,r.jsx)(ed.Content,{role:"menu","aria-orientation":"vertical","data-state":rl(v.open),"data-radix-menu-content":"",dir:f.dir,...b,...g,ref:k,style:{outline:"none",...g.style},onKeyDown:(0,F.composeEventHandlers)(g.onKeyDown,e=>{let r=e.target.closest("[data-radix-menu-content]")===e.currentTarget,t=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;r&&("Tab"===e.key&&e.preventDefault(),!t&&n&&(e=>{var r,t;let n=M.current+e,s=C().filter(e=>!e.disabled),a=document.activeElement,o=null==(r=s.find(e=>e.ref.current===a))?void 0:r.textValue,i=function(e,r,t){var n;let s=r.length>1&&Array.from(r).every(e=>e===r[0])?r[0]:r,a=t?e.indexOf(t):-1,o=(n=Math.max(a,0),e.map((r,t)=>e[(n+t)%e.length]));1===s.length&&(o=o.filter(e=>e!==t));let i=o.find(e=>e.toLowerCase().startsWith(s.toLowerCase()));return i!==t?i:void 0}(s.map(e=>e.textValue),n,o),l=null==(t=s.find(e=>e.textValue===i))?void 0:t.ref.current;!function e(r){M.current=r,window.clearTimeout(S.current),""!==r&&(S.current=window.setTimeout(()=>e(""),1e3))}(n),l&&setTimeout(()=>l.focus())})(e.key));let s=_.current;if(e.target!==s||!ev.includes(e.key))return;e.preventDefault();let a=C().filter(e=>!e.disabled).map(e=>e.ref.current);eg.includes(e.key)&&a.reverse(),function(e){let r=document.activeElement;for(let t of e)if(t===r||(t.focus(),document.activeElement!==r))return}(a)}),onBlur:(0,F.composeEventHandlers)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(S.current),M.current="")}),onPointerMove:(0,F.composeEventHandlers)(e.onPointerMove,ru(e=>{let r=e.target,t=I.current!==e.clientX;e.currentTarget.contains(r)&&t&&(R.current=e.clientX>I.current?"right":"left",I.current=e.clientX)}))})})})})})})});eH.displayName=eA;var eU=t.forwardRef((e,t)=>{let{__scopeMenu:n,...s}=e;return(0,r.jsx)(et.Primitive.div,{role:"group",...s,ref:t})});eU.displayName="MenuGroup";var eX=t.forwardRef((e,t)=>{let{__scopeMenu:n,...s}=e;return(0,r.jsx)(et.Primitive.div,{...s,ref:t})});eX.displayName="MenuLabel";var eY="MenuItem",eW="menu.itemSelect",eZ=t.forwardRef((e,n)=>{let{disabled:s=!1,onSelect:a,...o}=e,i=t.useRef(null),l=eT(eY,e.__scopeMenu),d=eq(eY,e.__scopeMenu),c=(0,y.useComposedRefs)(n,i),u=t.useRef(!1);return(0,r.jsx)(eJ,{...o,ref:c,disabled:s,onClick:(0,F.composeEventHandlers)(e.onClick,()=>{let e=i.current;if(!s&&e){let r=new CustomEvent(eW,{bubbles:!0,cancelable:!0});e.addEventListener(eW,e=>null==a?void 0:a(e),{once:!0}),(0,et.dispatchDiscreteCustomEvent)(e,r),r.defaultPrevented?u.current=!1:l.onClose()}}),onPointerDown:r=>{var t;null==(t=e.onPointerDown)||t.call(e,r),u.current=!0},onPointerUp:(0,F.composeEventHandlers)(e.onPointerUp,e=>{var r;u.current||null==(r=e.currentTarget)||r.click()}),onKeyDown:(0,F.composeEventHandlers)(e.onKeyDown,e=>{let r=""!==d.searchRef.current;s||r&&" "===e.key||ej.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});eZ.displayName=eY;var eJ=t.forwardRef((e,n)=>{let{__scopeMenu:s,disabled:a=!1,textValue:o,...i}=e,l=eq(eY,s),d=ek(s),c=t.useRef(null),u=(0,y.useComposedRefs)(n,c),[m,x]=t.useState(!1),[p,h]=t.useState("");return t.useEffect(()=>{let e=c.current;if(e){var r;h((null!=(r=e.textContent)?r:"").trim())}},[i.children]),(0,r.jsx)(eF.ItemSlot,{scope:s,disabled:a,textValue:null!=o?o:p,children:(0,r.jsx)(em.Item,{asChild:!0,...d,focusable:!a,children:(0,r.jsx)(et.Primitive.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":a||void 0,"data-disabled":a?"":void 0,...i,ref:u,onPointerMove:(0,F.composeEventHandlers)(e.onPointerMove,ru(e=>{a?l.onItemLeave(e):(l.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,F.composeEventHandlers)(e.onPointerLeave,ru(e=>l.onItemLeave(e))),onFocus:(0,F.composeEventHandlers)(e.onFocus,()=>x(!0)),onBlur:(0,F.composeEventHandlers)(e.onBlur,()=>x(!1))})})})}),e$=t.forwardRef((e,t)=>{let{checked:n=!1,onCheckedChange:s,...a}=e;return(0,r.jsx)(e3,{scope:e.__scopeMenu,checked:n,children:(0,r.jsx)(eZ,{role:"menuitemcheckbox","aria-checked":rd(n)?"mixed":n,...a,ref:t,"data-state":rc(n),onSelect:(0,F.composeEventHandlers)(a.onSelect,()=>null==s?void 0:s(!!rd(n)||!n),{checkForDefaultPrevented:!1})})})});e$.displayName="MenuCheckboxItem";var e0="MenuRadioGroup",[e1,e4]=eD(e0,{value:void 0,onValueChange:()=>{}}),e2=t.forwardRef((e,t)=>{let{value:n,onValueChange:s,...a}=e,o=(0,ex.useCallbackRef)(s);return(0,r.jsx)(e1,{scope:e.__scopeMenu,value:n,onValueChange:o,children:(0,r.jsx)(eU,{...a,ref:t})})});e2.displayName=e0;var e5="MenuRadioItem",e8=t.forwardRef((e,t)=>{let{value:n,...s}=e,a=e4(e5,e.__scopeMenu),o=n===a.value;return(0,r.jsx)(e3,{scope:e.__scopeMenu,checked:o,children:(0,r.jsx)(eZ,{role:"menuitemradio","aria-checked":o,...s,ref:t,"data-state":rc(o),onSelect:(0,F.composeEventHandlers)(s.onSelect,()=>{var e;return null==(e=a.onValueChange)?void 0:e.call(a,n)},{checkForDefaultPrevented:!1})})})});e8.displayName=e5;var e6="MenuItemIndicator",[e3,e7]=eD(e6,{checked:!1}),e9=t.forwardRef((e,t)=>{let{__scopeMenu:n,forceMount:s,...a}=e,o=e7(e6,n);return(0,r.jsx)(eu.Presence,{present:s||rd(o.checked)||!0===o.checked,children:(0,r.jsx)(et.Primitive.span,{...a,ref:t,"data-state":rc(o.checked)})})});e9.displayName=e6;var re=t.forwardRef((e,t)=>{let{__scopeMenu:n,...s}=e;return(0,r.jsx)(et.Primitive.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});re.displayName="MenuSeparator";var rr=t.forwardRef((e,t)=>{let{__scopeMenu:n,...s}=e,a=e_(n);return(0,r.jsx)(ed.Arrow,{...a,...s,ref:t})});rr.displayName="MenuArrow";var[rt,rn]=eD("MenuSub"),rs="MenuSubTrigger",ra=t.forwardRef((e,n)=>{let s=eM(rs,e.__scopeMenu),a=eT(rs,e.__scopeMenu),o=rn(rs,e.__scopeMenu),i=eq(rs,e.__scopeMenu),l=t.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},m=t.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return t.useEffect(()=>m,[m]),t.useEffect(()=>{let e=d.current;return()=>{window.clearTimeout(e),c(null)}},[d,c]),(0,r.jsx)(eI,{asChild:!0,...u,children:(0,r.jsx)(eJ,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":o.contentId,"data-state":rl(s.open),...e,ref:(0,y.composeRefs)(n,o.onTriggerChange),onClick:r=>{var t;null==(t=e.onClick)||t.call(e,r),e.disabled||r.defaultPrevented||(r.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:(0,F.composeEventHandlers)(e.onPointerMove,ru(r=>{i.onItemEnter(r),!r.defaultPrevented&&(e.disabled||s.open||l.current||(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{s.onOpenChange(!0),m()},100)))})),onPointerLeave:(0,F.composeEventHandlers)(e.onPointerLeave,ru(e=>{var r,t;m();let n=null==(r=s.content)?void 0:r.getBoundingClientRect();if(n){let r=null==(t=s.content)?void 0:t.dataset.side,a="right"===r,o=n[a?"left":"right"],l=n[a?"right":"left"];i.onPointerGraceIntentChange({area:[{x:e.clientX+(a?-5:5),y:e.clientY},{x:o,y:n.top},{x:l,y:n.top},{x:l,y:n.bottom},{x:o,y:n.bottom}],side:r}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(e),e.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:(0,F.composeEventHandlers)(e.onKeyDown,r=>{let t=""!==i.searchRef.current;if(!e.disabled&&(!t||" "!==r.key)&&ef[a.dir].includes(r.key)){var n;s.onOpenChange(!0),null==(n=s.content)||n.focus(),r.preventDefault()}})})})});ra.displayName=rs;var ro="MenuSubContent",ri=t.forwardRef((e,n)=>{let s=eB(eA,e.__scopeMenu),{forceMount:a=s.forceMount,...o}=e,i=eM(eA,e.__scopeMenu),l=eT(eA,e.__scopeMenu),d=rn(ro,e.__scopeMenu),c=t.useRef(null),u=(0,y.useComposedRefs)(n,c);return(0,r.jsx)(eF.Provider,{scope:e.__scopeMenu,children:(0,r.jsx)(eu.Presence,{present:a||i.open,children:(0,r.jsx)(eF.Slot,{scope:e.__scopeMenu,children:(0,r.jsx)(eG,{id:d.contentId,"aria-labelledby":d.triggerId,...o,ref:u,align:"start",side:"rtl"===l.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var r;l.isUsingKeyboardRef.current&&(null==(r=c.current)||r.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,F.composeEventHandlers)(e.onFocusOutside,e=>{e.target!==d.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:(0,F.composeEventHandlers)(e.onEscapeKeyDown,e=>{l.onClose(),e.preventDefault()}),onKeyDown:(0,F.composeEventHandlers)(e.onKeyDown,e=>{let r=e.currentTarget.contains(e.target),t=ey[l.dir].includes(e.key);if(r&&t){var n;i.onOpenChange(!1),null==(n=d.trigger)||n.focus(),e.preventDefault()}})})})})})});function rl(e){return e?"open":"closed"}function rd(e){return"indeterminate"===e}function rc(e){return rd(e)?"indeterminate":e?"checked":"unchecked"}function ru(e){return r=>"mouse"===r.pointerType?e(r):void 0}ri.displayName=ro;var rm="DropdownMenu",[rx,rp]=(0,f.createContextScope)(rm,[eN]),rh=eN(),[rj,rg]=rx(rm),rv=e=>{let{__scopeDropdownMenu:n,children:s,dir:a,open:o,defaultOpen:i,onOpenChange:l,modal:d=!0}=e,c=rh(n),u=t.useRef(null),[m,x]=(0,er.useControllableState)({prop:o,defaultProp:null!=i&&i,onChange:l,caller:rm});return(0,r.jsx)(rj,{scope:n,triggerId:(0,el.useId)(),triggerRef:u,contentId:(0,el.useId)(),open:m,onOpenChange:x,onOpenToggle:t.useCallback(()=>x(e=>!e),[x]),modal:d,children:(0,r.jsx)(eR,{...c,open:m,onOpenChange:x,dir:a,modal:d,children:s})})};rv.displayName=rm;var rf="DropdownMenuTrigger",ry=t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,o=rg(rf,n),i=rh(n);return(0,r.jsx)(eI,{asChild:!0,...i,children:(0,r.jsx)(et.Primitive.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:(0,y.composeRefs)(t,o.triggerRef),onPointerDown:(0,F.composeEventHandlers)(e.onPointerDown,e=>{!s&&0===e.button&&!1===e.ctrlKey&&(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:(0,F.composeEventHandlers)(e.onKeyDown,e=>{!s&&(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});ry.displayName=rf;var rb=e=>{let{__scopeDropdownMenu:t,...n}=e,s=rh(t);return(0,r.jsx)(eO,{...s,...n})};rb.displayName="DropdownMenuPortal";var rF="DropdownMenuContent",rw=t.forwardRef((e,n)=>{let{__scopeDropdownMenu:s,...a}=e,o=rg(rF,s),i=rh(s),l=t.useRef(!1);return(0,r.jsx)(eH,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...a,ref:n,onCloseAutoFocus:(0,F.composeEventHandlers)(e.onCloseAutoFocus,e=>{var r;l.current||null==(r=o.triggerRef.current)||r.focus(),l.current=!1,e.preventDefault()}),onInteractOutside:(0,F.composeEventHandlers)(e.onInteractOutside,e=>{let r=e.detail.originalEvent,t=0===r.button&&!0===r.ctrlKey,n=2===r.button||t;(!o.modal||n)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});rw.displayName=rF,t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(eU,{...a,...s,ref:t})}).displayName="DropdownMenuGroup",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(eX,{...a,...s,ref:t})}).displayName="DropdownMenuLabel";var rC=t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(eZ,{...a,...s,ref:t})});rC.displayName="DropdownMenuItem",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(e$,{...a,...s,ref:t})}).displayName="DropdownMenuCheckboxItem",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(e2,{...a,...s,ref:t})}).displayName="DropdownMenuRadioGroup",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(e8,{...a,...s,ref:t})}).displayName="DropdownMenuRadioItem",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(e9,{...a,...s,ref:t})}).displayName="DropdownMenuItemIndicator",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(re,{...a,...s,ref:t})}).displayName="DropdownMenuSeparator",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(rr,{...a,...s,ref:t})}).displayName="DropdownMenuArrow",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(ra,{...a,...s,ref:t})}).displayName="DropdownMenuSubTrigger",t.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,a=rh(n);return(0,r.jsx)(ri,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent",e.i(78784);var rD=e.i(75254);function rN(e){let{...t}=e;return(0,r.jsx)(rv,{"data-slot":"dropdown-menu",...t})}function r_(e){let{...t}=e;return(0,r.jsx)(ry,{"data-slot":"dropdown-menu-trigger",...t})}function rk(e){let{className:t,sideOffset:n=4,...s}=e;return(0,r.jsx)(rb,{children:(0,r.jsx)(rw,{"data-slot":"dropdown-menu-content",sideOffset:n,className:(0,z.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...s})})}function rS(e){let{className:t,inset:n,variant:s="default",...a}=e;return(0,r.jsx)(rC,{"data-slot":"dropdown-menu-item","data-inset":n,"data-variant":s,className:(0,z.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}(0,rD.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),(0,rD.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);let rM=(0,rD.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var rP=e.i(88511),rT=e.i(27612);let rR=h.object({name:h.string().min(1,"프로젝트 이름을 입력해주세요"),description:h.string().optional()});function rI(e){let{project:s}=e,[i,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)(!1),g=(0,n.useRouter)(),v=(0,o.useUpdateProject)(),f=(0,o.useDeleteProject)(),y=(0,x.useForm)({resolver:(0,p.zodResolver)(rR),defaultValues:{name:s.name,description:s.description||""}}),b=async e=>{try{await v.mutateAsync({id:s.id,data:{name:e.name,description:e.description||void 0}}),j.toast.success("프로젝트가 수정되었습니다!"),u(!1)}catch(e){j.toast.error("프로젝트 수정에 실패했습니다."),console.error("Error updating project:",e)}},F=async()=>{try{await f.mutateAsync(s.id),j.toast.success("프로젝트가 삭제되었습니다!"),h(!1),g.push("/projects")}catch(e){j.toast.error("프로젝트 삭제에 실패했습니다."),console.error("Error deleting project:",e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(rN,{children:[(0,r.jsx)(r_,{asChild:!0,children:(0,r.jsx)(a.Button,{variant:"outline",size:"icon",children:(0,r.jsx)(rM,{className:"h-4 w-4"})})}),(0,r.jsxs)(rk,{align:"end",children:[(0,r.jsxs)(rS,{onClick:()=>u(!0),children:[(0,r.jsx)(rP.Edit,{className:"mr-2 h-4 w-4"}),"프로젝트 수정"]}),(0,r.jsxs)(rS,{onClick:()=>h(!0),className:"text-red-600",children:[(0,r.jsx)(rT.Trash2,{className:"mr-2 h-4 w-4"}),"프로젝트 삭제"]})]})]}),(0,r.jsx)(l.Dialog,{open:i,onOpenChange:u,children:(0,r.jsxs)(l.DialogContent,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"프로젝트 수정"}),(0,r.jsx)(l.DialogDescription,{children:"프로젝트 정보를 수정합니다."})]}),(0,r.jsx)(d.Form,{...y,children:(0,r.jsxs)("form",{onSubmit:y.handleSubmit(b),className:"space-y-4",children:[(0,r.jsx)(d.FormField,{control:y.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"프로젝트 이름 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"프로젝트 이름",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:y.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"설명 (선택)"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"프로젝트 설명",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>u(!1),children:"취소"}),(0,r.jsx)(a.Button,{type:"submit",disabled:v.isPending,children:v.isPending?"수정 중...":"수정"})]})]})})]})}),(0,r.jsx)(V,{open:m,onOpenChange:h,children:(0,r.jsxs)(X,{children:[(0,r.jsxs)(Y,{children:[(0,r.jsx)(Z,{children:"프로젝트 삭제"}),(0,r.jsxs)(J,{children:["정말로 ",(0,r.jsxs)("strong",{children:['"',s.name,'"']})," 프로젝트를 삭제하시겠습니까?",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-red-600 font-medium",children:"이 작업은 되돌릴 수 없으며, 프로젝트와 관련된 모든 작업도 함께 삭제됩니다."})]})]}),(0,r.jsxs)(W,{children:[(0,r.jsx)(ee,{children:"취소"}),(0,r.jsx)($,{onClick:F,disabled:f.isPending,className:"bg-red-600 hover:bg-red-700",children:f.isPending?"삭제 중...":"삭제"})]})]})})]})}var rE=e.i(87486),rL=e.i(89271),rB=e.i(3116),rO=e.i(63209),rA=e.i(69638),rK=e.i(95242),rq=e.i(37727),rH=e.i(1851),rQ=e.i(26514),rz=e.i(68977),rV=e.i(66027),rG=e.i(70934),rU=e.i(30576),rX=e.i(99532),rY=e.i(81125),rW=e.i(24687),rZ=e.i(78583),rJ=e.i(54616),r$=e.i(12598);let r0=h.object({purpose:h.string().min(1,"목적을 입력해주세요"),success_criteria:h.string().min(1,"성공 기준을 입력해주세요"),constraints:h.string().min(1,"제약사항을 입력해주세요"),priority:h.string().min(1,"우선순위를 입력해주세요"),validation:h.string().min(1,"검증 방법을 입력해주세요")});function r1(e){let{taskId:n,triggerText:s="5SB 작성"}=e,[o,i]=(0,t.useState)(!1),c=(0,r$.useQueryClient)(),u=(0,x.useForm)({resolver:(0,p.zodResolver)(r0),defaultValues:{purpose:"",success_criteria:"",constraints:"",priority:"",validation:""}}),m=(0,rJ.useMutation)({mutationFn:rG.createBrief,onSuccess:e=>{if(null===e)return void j.toast.error("5문장 브리프 생성에 실패했습니다. (이미 존재하거나 서버 오류)");j.toast.success("5문장 브리프가 생성되었습니다!"),c.invalidateQueries({queryKey:["brief",n]}),c.invalidateQueries({queryKey:["dashboard","kpi"]}),c.invalidateQueries({queryKey:["all-briefs"]}),u.reset(),i(!1)},onError:e=>{j.toast.error("브리프 생성 중 오류가 발생했습니다."),console.error("Error creating brief:",e)}}),h=async e=>{let r={task_id:n,...e};m.mutate(r)};return(0,r.jsxs)(l.Dialog,{open:o,onOpenChange:i,children:[(0,r.jsx)(l.DialogTrigger,{asChild:!0,children:(0,r.jsxs)(a.Button,{variant:"outline",size:"sm",children:[(0,r.jsx)(rZ.FileText,{className:"mr-2 h-4 w-4"}),s]})}),(0,r.jsxs)(l.DialogContent,{className:"sm:max-w-[600px]",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"5문장 브리프 (5SB) 작성"}),(0,r.jsx)(l.DialogDescription,{children:"작업의 핵심 내용을 5문장으로 요약합니다. 각 항목을 명확하게 작성해주세요."})]}),(0,r.jsx)(d.Form,{...u,children:(0,r.jsxs)("form",{onSubmit:u.handleSubmit(h),className:"space-y-4",children:[(0,r.jsx)(d.FormField,{control:u.control,name:"purpose",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"1. 목적 (Purpose) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"이 작업의 목적과 배경을 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:u.control,name:"success_criteria",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"2. 성공 기준 (Success Criteria) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"어떤 상태가 되면 성공한 것인지 구체적으로 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:u.control,name:"constraints",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"3. 제약사항 (Constraints) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"시간, 자원, 기술적 제약사항을 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:u.control,name:"priority",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"4. 우선순위 (Priority) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"왜 이 작업이 중요한지, 다른 작업과의 우선순위를 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:u.control,name:"validation",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"5. 검증 방법 (Validation) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"결과물을 어떻게 검증하고 확인할 것인지 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>i(!1),children:"취소"}),(0,r.jsx)(a.Button,{type:"submit",disabled:m.isPending,children:m.isPending?"생성 중...":"생성"})]})]})})]})]})}let r4=h.object({purpose:h.string().min(1,"목적을 입력해주세요"),success_criteria:h.string().min(1,"성공 기준을 입력해주세요"),constraints:h.string().min(1,"제약사항을 입력해주세요"),priority:h.string().min(1,"우선순위를 입력해주세요"),validation:h.string().min(1,"검증 방법을 입력해주세요")});function r2(e){let{taskId:n,triggerText:s="5SB 수정"}=e,[o,i]=(0,t.useState)(!1),c=(0,r$.useQueryClient)(),{data:u,isLoading:m}=(0,rV.useQuery)({queryKey:["brief",n],queryFn:()=>(0,rG.getBriefByTask)(n),enabled:o}),h=(0,x.useForm)({resolver:(0,p.zodResolver)(r4),defaultValues:{purpose:"",success_criteria:"",constraints:"",priority:"",validation:""}});(0,t.useEffect)(()=>{u&&h.reset({purpose:u.purpose,success_criteria:u.success_criteria,constraints:u.constraints,priority:u.priority,validation:u.validation})},[u,h]);let g=(0,rJ.useMutation)({mutationFn:e=>{let{id:r,data:t}=e;return(0,rG.updateBrief)(r,t)},onSuccess:()=>{j.toast.success("5문장 브리프가 수정되었습니다!"),c.invalidateQueries({queryKey:["brief",n]}),c.invalidateQueries({queryKey:["dashboard","kpi"]}),c.invalidateQueries({queryKey:["all-briefs"]}),i(!1)},onError:e=>{var r,t;let n=(null==e||null==(t=e.response)||null==(r=t.data)?void 0:r.detail)||"브리프 수정에 실패했습니다.";j.toast.error(n),console.error("Error updating brief:",e)}}),v=(0,rJ.useMutation)({mutationFn:rG.deleteBrief,onSuccess:()=>{j.toast.success("5문장 브리프가 삭제되었습니다!"),c.invalidateQueries({queryKey:["brief",n]}),c.invalidateQueries({queryKey:["dashboard","kpi"]}),c.invalidateQueries({queryKey:["all-briefs"]}),i(!1)},onError:e=>{var r,t;let n=(null==e||null==(t=e.response)||null==(r=t.data)?void 0:r.detail)||"브리프 삭제에 실패했습니다.";j.toast.error(n),console.error("Error deleting brief:",e)}}),f=async e=>{u&&g.mutate({id:u.id,data:e})};return(0,r.jsxs)(l.Dialog,{open:o,onOpenChange:i,children:[(0,r.jsx)(l.DialogTrigger,{asChild:!0,children:(0,r.jsxs)(a.Button,{variant:"outline",size:"sm",children:[(0,r.jsx)(rP.Edit,{className:"mr-2 h-4 w-4"}),s]})}),(0,r.jsxs)(l.DialogContent,{className:"sm:max-w-[600px]",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"5문장 브리프 (5SB) 수정"}),(0,r.jsx)(l.DialogDescription,{children:"작업의 핵심 내용을 5문장으로 요약합니다. 각 항목을 명확하게 작성해주세요."})]}),m?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-primary border-t-transparent"}),(0,r.jsx)("span",{className:"ml-2",children:"브리프를 불러오는 중..."})]}):(0,r.jsx)(d.Form,{...h,children:(0,r.jsxs)("form",{onSubmit:h.handleSubmit(f),className:"space-y-4",children:[(0,r.jsx)(d.FormField,{control:h.control,name:"purpose",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"1. 목적 (Purpose) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"이 작업의 목적과 배경을 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:h.control,name:"success_criteria",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"2. 성공 기준 (Success Criteria) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"어떤 상태가 되면 성공한 것인지 구체적으로 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:h.control,name:"constraints",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"3. 제약사항 (Constraints) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"시간, 자원, 기술적 제약사항을 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:h.control,name:"priority",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"4. 우선순위 (Priority) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"왜 이 작업이 중요한지, 다른 작업과의 우선순위를 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:h.control,name:"validation",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"5. 검증 방법 (Validation) *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"결과물을 어떻게 검증하고 확인할 것인지 설명하세요",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"destructive",onClick:()=>{u&&window.confirm("정말로 5문장 브리프를 삭제하시겠습니까?")&&v.mutate(u.id)},disabled:v.isPending,children:v.isPending?"삭제 중...":"삭제"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>i(!1),children:"취소"}),(0,r.jsx)(a.Button,{type:"submit",disabled:g.isPending,children:g.isPending?"수정 중...":"수정"})]})]})]})})]})]})}var r5=e.i(20278);let r8=h.object({deliverable_formats:h.string().min(1,"결과물 형식을 입력해주세요"),mandatory_checks:h.array(h.object({value:h.string().min(1,"체크 항목을 입력해주세요")})).min(1,"최소 1개의 체크 항목이 필요합니다"),quality_bar:h.string().min(1,"품질 기준을 입력해주세요"),verification:h.string().min(1,"검증 방법을 입력해주세요"),deadline:h.string().optional(),version_tag:h.string().min(1,"버전 태그를 입력해주세요")});function r6(e){let{taskId:n,triggerText:s="DoD 작성"}=e,[o,i]=(0,t.useState)(!1),u=(0,r$.useQueryClient)(),h=(0,x.useForm)({resolver:(0,p.zodResolver)(r8),defaultValues:{deliverable_formats:"",mandatory_checks:[{value:""}],quality_bar:"",verification:"",deadline:"",version_tag:"v0.1"}}),{fields:g,append:v,remove:f}=(0,x.useFieldArray)({control:h.control,name:"mandatory_checks"}),y=(0,rJ.useMutation)({mutationFn:rU.createDoD,onSuccess:e=>{if(null===e)return void j.toast.error("DoD 생성에 실패했습니다. (이미 존재하거나 서버 오류)");j.toast.success("DoD가 생성되었습니다!"),u.invalidateQueries({queryKey:["dod",n]}),u.invalidateQueries({queryKey:["dashboard","kpi"]}),u.invalidateQueries({queryKey:["all-dods"]}),u.invalidateQueries({queryKey:["tasks"]}),h.reset(),i(!1)},onError:e=>{j.toast.error("DoD 생성 중 오류가 발생했습니다."),console.error("Error creating DoD:",e)}}),b=async e=>{let r={task_id:n,deliverable_formats:e.deliverable_formats,mandatory_checks:e.mandatory_checks.map(e=>e.value).filter(e=>""!==e.trim()),quality_bar:e.quality_bar,verification:e.verification,deadline:e.deadline||void 0,version_tag:e.version_tag};y.mutate(r)};return(0,r.jsxs)(l.Dialog,{open:o,onOpenChange:i,children:[(0,r.jsx)(l.DialogTrigger,{asChild:!0,children:(0,r.jsxs)(a.Button,{variant:"outline",size:"sm",children:[(0,r.jsx)(r5.Target,{className:"mr-2 h-4 w-4"}),s]})}),(0,r.jsxs)(l.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"DoD (Definition of Done) 작성"}),(0,r.jsx)(l.DialogDescription,{children:"작업 완료를 위한 명확한 기준과 체크리스트를 정의합니다."})]}),(0,r.jsx)(d.Form,{...h,children:(0,r.jsxs)("form",{onSubmit:h.handleSubmit(b),className:"space-y-4",children:[(0,r.jsx)(d.FormField,{control:h.control,name:"deliverable_formats",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"결과물 형식 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"예: MD, PDF, PPTX, Code Repository",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.FormLabel,{children:"필수 체크 항목 *"}),(0,r.jsxs)("div",{className:"space-y-2 mt-2",children:[g.map((e,t)=>(0,r.jsx)(d.FormField,{control:h.control,name:"mandatory_checks.".concat(t,".value"),render:e=>{let{field:n}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"체크 항목 ".concat(t+1),...n})}),g.length>1&&(0,r.jsx)(a.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>f(t),children:(0,r.jsx)(rq.X,{className:"h-4 w-4"})})]}),(0,r.jsx)(d.FormMessage,{})]})}},e.id)),(0,r.jsxs)(a.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>v({value:""}),className:"w-full",children:[(0,r.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"체크 항목 추가"]})]})]}),(0,r.jsx)(d.FormField,{control:h.control,name:"quality_bar",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"품질 기준 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"예: 오타율 0%, 최소 2명 리뷰 완료, 모든 테스트 통과",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:h.control,name:"verification",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"검증 방법 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"예: 10% 샘플링 검토, 동료 리뷰, 자동 테스트",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(d.FormField,{control:h.control,name:"deadline",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"마감일"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"date",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:h.control,name:"version_tag",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"버전 태그 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"v0.1",...t})}),(0,r.jsx)(d.FormMessage,{})]})}})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>i(!1),children:"취소"}),(0,r.jsx)(a.Button,{type:"submit",disabled:y.isPending,children:y.isPending?"생성 중...":"생성"})]})]})})]})]})}let r3=h.object({deliverable_formats:h.string().min(1,"결과물 형식을 입력해주세요"),mandatory_checks:h.array(h.object({value:h.string().min(1,"체크 항목을 입력해주세요")})).min(1,"최소 1개의 체크 항목이 필요합니다"),quality_bar:h.string().min(1,"품질 기준을 입력해주세요"),verification:h.string().min(1,"검증 방법을 입력해주세요"),deadline:h.string().optional(),version_tag:h.string().min(1,"버전 태그를 입력해주세요")});function r7(e){let{taskId:n,triggerText:s="DoD 수정"}=e,[o,i]=(0,t.useState)(!1),u=(0,r$.useQueryClient)(),{data:h,isLoading:g}=(0,rV.useQuery)({queryKey:["dod",n],queryFn:()=>(0,rU.getDoDByTask)(n),enabled:o}),v=(0,x.useForm)({resolver:(0,p.zodResolver)(r3),defaultValues:{deliverable_formats:"",mandatory_checks:[{value:""}],quality_bar:"",verification:"",deadline:"",version_tag:"v0.1"}}),{fields:f,append:y,remove:b,replace:F}=(0,x.useFieldArray)({control:v.control,name:"mandatory_checks"});(0,t.useEffect)(()=>{h&&(v.reset({deliverable_formats:h.deliverable_formats,mandatory_checks:h.mandatory_checks.length>0?h.mandatory_checks.map(e=>({value:e})):[{value:""}],quality_bar:h.quality_bar,verification:h.verification,deadline:h.deadline||"",version_tag:h.version_tag}),F(h.mandatory_checks.length>0?h.mandatory_checks.map(e=>({value:e})):[{value:""}]))},[h,v,F]);let w=(0,rJ.useMutation)({mutationFn:e=>{let{id:r,data:t}=e;return(0,rU.updateDoD)(r,t)},onSuccess:()=>{j.toast.success("DoD가 수정되었습니다!"),u.invalidateQueries({queryKey:["dod",n]}),u.invalidateQueries({queryKey:["dashboard","kpi"]}),u.invalidateQueries({queryKey:["all-dods"]}),i(!1)},onError:e=>{var r,t;let n=(null==e||null==(t=e.response)||null==(r=t.data)?void 0:r.detail)||"DoD 수정에 실패했습니다.";j.toast.error(n),console.error("Error updating DoD:",e)}}),C=(0,rJ.useMutation)({mutationFn:rU.deleteDoD,onSuccess:()=>{j.toast.success("DoD가 삭제되었습니다!"),u.invalidateQueries({queryKey:["dod",n]}),u.invalidateQueries({queryKey:["dashboard","kpi"]}),u.invalidateQueries({queryKey:["all-dods"]}),u.invalidateQueries({queryKey:["tasks"]}),i(!1)},onError:e=>{var r,t;let n=(null==e||null==(t=e.response)||null==(r=t.data)?void 0:r.detail)||"DoD 삭제에 실패했습니다.";j.toast.error(n),console.error("Error deleting DoD:",e)}}),D=async e=>{if(!h)return;let r={deliverable_formats:e.deliverable_formats,mandatory_checks:e.mandatory_checks.map(e=>e.value).filter(e=>""!==e.trim()),quality_bar:e.quality_bar,verification:e.verification,deadline:e.deadline||void 0,version_tag:e.version_tag};w.mutate({id:h.id,data:r})};return(0,r.jsxs)(l.Dialog,{open:o,onOpenChange:i,children:[(0,r.jsx)(l.DialogTrigger,{asChild:!0,children:(0,r.jsxs)(a.Button,{variant:"outline",size:"sm",children:[(0,r.jsx)(rP.Edit,{className:"mr-2 h-4 w-4"}),s]})}),(0,r.jsxs)(l.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"DoD (Definition of Done) 수정"}),(0,r.jsx)(l.DialogDescription,{children:"작업 완료를 위한 명확한 기준과 체크리스트를 수정합니다."})]}),g?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-primary border-t-transparent"}),(0,r.jsx)("span",{className:"ml-2",children:"DoD를 불러오는 중..."})]}):(0,r.jsx)(d.Form,{...v,children:(0,r.jsxs)("form",{onSubmit:v.handleSubmit(D),className:"space-y-4",children:[(0,r.jsx)(d.FormField,{control:v.control,name:"deliverable_formats",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"결과물 형식 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"예: MD, PDF, PPTX, Code Repository",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.FormLabel,{children:"필수 체크 항목 *"}),(0,r.jsxs)("div",{className:"space-y-2 mt-2",children:[f.map((e,t)=>(0,r.jsx)(d.FormField,{control:v.control,name:"mandatory_checks.".concat(t,".value"),render:e=>{let{field:n}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"체크 항목 ".concat(t+1),...n})}),f.length>1&&(0,r.jsx)(a.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>b(t),children:(0,r.jsx)(rq.X,{className:"h-4 w-4"})})]}),(0,r.jsx)(d.FormMessage,{})]})}},e.id)),(0,r.jsxs)(a.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>y({value:""}),className:"w-full",children:[(0,r.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"체크 항목 추가"]})]})]}),(0,r.jsx)(d.FormField,{control:v.control,name:"quality_bar",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"품질 기준 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"예: 오타율 0%, 최소 2명 리뷰 완료, 모든 테스트 통과",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:v.control,name:"verification",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"검증 방법 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"예: 10% 샘플링 검토, 동료 리뷰, 자동 테스트",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(d.FormField,{control:v.control,name:"deadline",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"마감일"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"date",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:v.control,name:"version_tag",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"버전 태그 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{placeholder:"v0.1",...t})}),(0,r.jsx)(d.FormMessage,{})]})}})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"destructive",onClick:()=>{h&&window.confirm("정말로 DoD를 삭제하시겠습니까?")&&C.mutate(h.id)},disabled:C.isPending,children:C.isPending?"삭제 중...":"삭제"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>i(!1),children:"취소"}),(0,r.jsx)(a.Button,{type:"submit",disabled:w.isPending,children:w.isPending?"수정 중...":"수정"})]})]})]})})]})]})}var r9=e.i(86311);let te=h.object({date:h.string().min(1,"날짜를 선택해주세요"),problem:h.string().min(1,"문제 상황을 입력해주세요"),options:h.string().min(1,"검토한 옵션들을 입력해주세요"),decision_reason:h.string().min(1,"결정 이유를 입력해주세요"),assumptions_risks:h.string().min(1,"가정사항과 리스크를 입력해주세요")});function tr(e){let{taskId:n,triggerText:s="의사결정 추가"}=e,[o,i]=(0,t.useState)(!1),u=(0,r$.useQueryClient)(),m=(0,x.useForm)({resolver:(0,p.zodResolver)(te),defaultValues:{date:(0,rH.format)(new Date,"yyyy-MM-dd"),problem:"",options:"",decision_reason:"",assumptions_risks:""}}),h=(0,rJ.useMutation)({mutationFn:rX.createDecision,onSuccess:e=>{if(null===e)return void j.toast.error("의사결정 생성에 실패했습니다.");j.toast.success("의사결정이 생성되었습니다!"),u.invalidateQueries({queryKey:["decisions",n]}),u.invalidateQueries({queryKey:["all-decisions"]}),m.reset({date:(0,rH.format)(new Date,"yyyy-MM-dd"),problem:"",options:"",decision_reason:"",assumptions_risks:""}),i(!1)},onError:e=>{j.toast.error("의사결정 생성 중 오류가 발생했습니다."),console.error("Error creating decision:",e)}}),g=async e=>{let r={task_id:n,date:e.date,problem:e.problem,options:e.options,decision_reason:e.decision_reason,assumptions_risks:e.assumptions_risks};h.mutate(r)};return(0,r.jsxs)(l.Dialog,{open:o,onOpenChange:i,children:[(0,r.jsx)(l.DialogTrigger,{asChild:!0,children:(0,r.jsxs)(a.Button,{variant:"outline",size:"sm",children:[(0,r.jsx)(r9.MessageSquare,{className:"mr-2 h-4 w-4"}),s]})}),(0,r.jsxs)(l.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"의사결정 로그 추가"}),(0,r.jsx)(l.DialogDescription,{children:"중요한 의사결정 과정과 결과를 기록합니다. 7일 후 리뷰를 위해 상세히 작성해주세요."})]}),(0,r.jsx)(d.Form,{...m,children:(0,r.jsxs)("form",{onSubmit:m.handleSubmit(g),className:"space-y-4",children:[(0,r.jsx)(d.FormField,{control:m.control,name:"date",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"결정 날짜 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(c.Input,{type:"date",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:m.control,name:"problem",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"문제 상황 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"어떤 문제나 상황에 대해 결정이 필요했나요?",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:m.control,name:"options",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"검토한 옵션들 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"어떤 선택지들을 고려했나요? 각각의 장단점을 포함해서 설명해주세요.",className:"min-h-[100px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:m.control,name:"decision_reason",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"결정 이유 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"왜 이 선택을 했나요? 결정의 근거와 이유를 설명해주세요.",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:m.control,name:"assumptions_risks",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"가정사항 & 리스크 *"}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:"이 결정에 포함된 가정사항들과 예상되는 리스크는 무엇인가요?",className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>i(!1),children:"취소"}),(0,r.jsx)(a.Button,{type:"submit",disabled:h.isPending,children:h.isPending?"추가 중...":"추가"})]})]})})]})]})}var tt=e.i(61911),tn=e.i(60519);let ts=h.object({review_type:h.nativeEnum(tn.ReviewType,{message:"리뷰 타입을 선택해주세요"}),positives:h.string().min(1,"긍정적인 점을 입력해주세요"),negatives:h.string().min(1,"부정적인 점을 입력해주세요"),changes_next:h.string().min(1,"다음에 바꿀 점을 입력해주세요")}),ta={[tn.ReviewType.PREMORTEM]:{label:"사전 검토 (Premortem)",description:"프로젝트 시작 전 위험 요소와 개선점 분석",positiveLabel:"예상되는 장점",positivePlaceholder:"이 작업/프로젝트의 예상되는 장점과 성공 요소는 무엇인가요?",negativeLabel:"예상되는 위험",negativePlaceholder:"어떤 위험 요소나 실패 가능성이 있나요?",changesLabel:"사전 준비사항",changesPlaceholder:"위험을 줄이고 성공 확률을 높이기 위해 미리 준비할 것은 무엇인가요?"},[tn.ReviewType.MIDMORTEM]:{label:"중간 검토 (Midmortem)",description:"프로젝트 진행 중 현황 점검과 조정",positiveLabel:"잘 되고 있는 점",positivePlaceholder:"현재까지 잘 진행되고 있는 부분은 무엇인가요?",negativeLabel:"문제점",negativePlaceholder:"현재 겪고 있는 문제나 우려사항은 무엇인가요?",changesLabel:"조정할 점",changesPlaceholder:"남은 기간 동안 어떤 것을 조정하거나 개선해야 하나요?"},[tn.ReviewType.RETRO]:{label:"회고 (Retrospective)",description:"프로젝트 완료 후 결과 분석과 학습",positiveLabel:"잘했던 점",positivePlaceholder:"이번 작업에서 잘했던 점과 성공 요소는 무엇인가요?",negativeLabel:"아쉬웠던 점",negativePlaceholder:"아쉽거나 개선이 필요했던 점은 무엇인가요?",changesLabel:"다음에 바꿀 점",changesPlaceholder:"다음 비슷한 작업에서는 어떤 것을 다르게 해야 할까요?"}};function to(e){let{taskId:n,triggerText:s="리뷰 추가"}=e,[o,i]=(0,t.useState)(!1),c=(0,r$.useQueryClient)(),m=(0,x.useForm)({resolver:(0,p.zodResolver)(ts),defaultValues:{review_type:void 0,positives:"",negatives:"",changes_next:""}}),h=m.watch("review_type"),g=h?ta[h]:null,v=(0,rJ.useMutation)({mutationFn:rY.createReview,onSuccess:e=>{if(null===e)return void j.toast.error("리뷰 생성에 실패했습니다.");j.toast.success("리뷰가 생성되었습니다!"),c.invalidateQueries({queryKey:["reviews",n]}),c.invalidateQueries({queryKey:["all-reviews"]}),m.reset({review_type:void 0,positives:"",negatives:"",changes_next:""}),i(!1)},onError:e=>{j.toast.error("리뷰 생성 중 오류가 발생했습니다."),console.error("Error creating review:",e)}}),f=async e=>{let r={task_id:n,review_type:e.review_type,positives:e.positives,negatives:e.negatives,changes_next:e.changes_next};v.mutate(r)};return(0,r.jsxs)(l.Dialog,{open:o,onOpenChange:i,children:[(0,r.jsx)(l.DialogTrigger,{asChild:!0,children:(0,r.jsxs)(a.Button,{variant:"outline",size:"sm",children:[(0,r.jsx)(tt.Users,{className:"mr-2 h-4 w-4"}),s]})}),(0,r.jsxs)(l.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[(0,r.jsxs)(l.DialogHeader,{children:[(0,r.jsx)(l.DialogTitle,{children:"리뷰 추가"}),(0,r.jsx)(l.DialogDescription,{children:"체계적인 리뷰를 통해 작업의 품질과 학습을 개선합니다."})]}),(0,r.jsx)(d.Form,{...m,children:(0,r.jsxs)("form",{onSubmit:m.handleSubmit(f),className:"space-y-4",children:[(0,r.jsx)(d.FormField,{control:m.control,name:"review_type",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsx)(d.FormLabel,{children:"리뷰 타입 *"}),(0,r.jsxs)(u.Select,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(u.SelectTrigger,{children:(0,r.jsx)(u.SelectValue,{placeholder:"리뷰 타입을 선택해주세요"})})}),(0,r.jsx)(u.SelectContent,{children:Object.entries(ta).map(e=>{let[t,n]=e;return(0,r.jsx)(u.SelectItem,{value:t,children:n.label},t)})})]}),g&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:g.description}),(0,r.jsx)(d.FormMessage,{})]})}}),g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.FormField,{control:m.control,name:"positives",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsxs)(d.FormLabel,{children:[g.positiveLabel," *"]}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:g.positivePlaceholder,className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:m.control,name:"negatives",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsxs)(d.FormLabel,{children:[g.negativeLabel," *"]}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:g.negativePlaceholder,className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}}),(0,r.jsx)(d.FormField,{control:m.control,name:"changes_next",render:e=>{let{field:t}=e;return(0,r.jsxs)(d.FormItem,{children:[(0,r.jsxs)(d.FormLabel,{children:[g.changesLabel," *"]}),(0,r.jsx)(d.FormControl,{children:(0,r.jsx)(rW.Textarea,{placeholder:g.changesPlaceholder,className:"min-h-[80px]",...t})}),(0,r.jsx)(d.FormMessage,{})]})}})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,r.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>i(!1),children:"취소"}),(0,r.jsx)(a.Button,{type:"submit",disabled:v.isPending,children:v.isPending?"추가 중...":"추가"})]})]})})]})]})}function ti(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"—",n=function(e){if(!e)return null;try{let r="string"==typeof e?(0,rQ.parseISO)(e):e;return(0,rz.isValid)(r)?r:null}catch(e){return null}}(e);return n?(0,rH.format)(n,r):t}let tl={[rL.TaskState.BACKLOG]:{label:"대기",icon:rB.Clock,variant:"secondary"},[rL.TaskState.IN_PROGRESS]:{label:"진행중",icon:rO.AlertCircle,variant:"default"},[rL.TaskState.DONE]:{label:"완료",icon:rA.CheckCircle,variant:"secondary"},[rL.TaskState.PAUSED]:{label:"중단",icon:rK.Pause,variant:"outline"},[rL.TaskState.CANCELED]:{label:"취소",icon:rq.X,variant:"destructive"}};function td(e){let{task:t,onStateChange:n,isUpdating:o}=e,i=tl[t.state],l=i.icon,{data:d}=(0,rV.useQuery)({queryKey:["brief",t.id],queryFn:()=>(0,rG.getBriefByTask)(t.id),retry:!1}),{data:c}=(0,rV.useQuery)({queryKey:["dod",t.id],queryFn:()=>(0,rU.getDoDByTask)(t.id),retry:!1}),{data:u}=(0,rV.useQuery)({queryKey:["decisions",t.id],queryFn:()=>(0,rX.getDecisionsByTask)(t.id),retry:!1}),{data:m}=(0,rV.useQuery)({queryKey:["reviews",t.id],queryFn:()=>(0,rY.getReviewsByTask)(t.id),retry:!1}),x=!!d,p=!!c,h=u&&u.length>0,j=m&&m.length>0;return(0,r.jsx)(s.Card,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[(0,r.jsxs)(rE.Badge,{variant:i.variant,className:"flex items-center gap-1",children:[(0,r.jsx)(l,{className:"h-3 w-3"}),i.label]}),(0,r.jsxs)(rE.Badge,{variant:"outline",children:["P",t.priority]}),p&&(0,r.jsx)(rE.Badge,{variant:"secondary",children:"DoD ✓"}),x&&(0,r.jsx)(rE.Badge,{variant:"secondary",children:"5SB ✓"}),h&&(0,r.jsxs)(rE.Badge,{variant:"secondary",children:["결정 ",(null==u?void 0:u.length)||0]}),j&&(0,r.jsxs)(rE.Badge,{variant:"secondary",children:["리뷰 ",(null==m?void 0:m.length)||0]})]}),(0,r.jsx)("h3",{className:"font-semibold text-lg mb-1",children:t.title}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["생성: ",ti(t.created_at),t.due_date&&(0,r.jsxs)("span",{className:"ml-4",children:["마감: ",ti(t.due_date)]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,r.jsx)("div",{className:"flex gap-1",children:(0,r.jsx)(to,{taskId:t.id,triggerText:"리뷰"})}),(0,r.jsx)("div",{className:"flex gap-1",children:(0,r.jsx)(tr,{taskId:t.id,triggerText:"결정"})}),(0,r.jsx)("div",{className:"flex gap-1",children:p?(0,r.jsx)(r7,{taskId:t.id,triggerText:"DoD"}):(0,r.jsx)(r6,{taskId:t.id,triggerText:"DoD"})}),(0,r.jsx)("div",{className:"flex gap-1",children:x?(0,r.jsx)(r2,{taskId:t.id,triggerText:"5SB"}):(0,r.jsx)(r1,{taskId:t.id,triggerText:"5SB"})}),t.state!==rL.TaskState.DONE&&(0,r.jsxs)(r.Fragment,{children:[t.state===rL.TaskState.BACKLOG&&(0,r.jsx)(a.Button,{size:"sm",onClick:()=>n(t.id,rL.TaskState.IN_PROGRESS),disabled:o,children:"시작"}),t.state===rL.TaskState.IN_PROGRESS&&(0,r.jsx)(a.Button,{size:"sm",variant:"secondary",onClick:()=>n(t.id,rL.TaskState.DONE),disabled:o,children:"완료"})]})]})]})},t.id)}var tc=e.i(75505),tu=e.i(71689),tm=e.i(87316),tx=e.i(56272),tp=e.i(40160),th=e.i(10241);let tj={[rL.TaskState.BACKLOG]:{label:"대기",icon:rB.Clock,variant:"secondary"},[rL.TaskState.IN_PROGRESS]:{label:"진행중",icon:rO.AlertCircle,variant:"default"},[rL.TaskState.DONE]:{label:"완료",icon:rA.CheckCircle,variant:"secondary"},[rL.TaskState.PAUSED]:{label:"중단",icon:rK.Pause,variant:"outline"},[rL.TaskState.CANCELED]:{label:"취소",icon:rq.X,variant:"destructive"}};function tg(){let e=(0,n.useParams)(),l=(0,n.useRouter)(),d=parseInt(e.id),{data:c,isLoading:u}=(0,o.useProject)(d),{data:m,isLoading:x}=(0,i.useTasks)(),p=(0,i.useUpdateTaskState)(),[h,g]=(0,t.useState)("ALL"),f=(null==m?void 0:m.filter(e=>e.project_id===d))||[],y=f.filter(e=>"ALL"===h||e.state===h),b={total:f.length,backlog:f.filter(e=>e.state===rL.TaskState.BACKLOG).length,inProgress:f.filter(e=>e.state===rL.TaskState.IN_PROGRESS).length,done:f.filter(e=>e.state===rL.TaskState.DONE).length,paused:f.filter(e=>e.state===rL.TaskState.PAUSED).length,canceled:f.filter(e=>e.state===rL.TaskState.CANCELED).length},F=b.total>0?b.done/b.total*100:0,w=(0,rJ.useMutation)({mutationFn:async()=>{let e=await (0,th.exportProjectToMarkdown)(d),r="".concat((null==c?void 0:c.name)||"project","_").concat((0,rH.format)(new Date,"yyyy-MM-dd"),".md");return(0,th.downloadMarkdownFile)(e,r),r},onSuccess:e=>{j.toast.success("".concat(e," 파일이 다운로드되었습니다!"))},onError:e=>{var r,t;let n=(null==e||null==(t=e.response)||null==(r=t.data)?void 0:r.detail)||"내보내기에 실패했습니다.";j.toast.error(n),console.error("Export error:",e)}}),C=async(e,r)=>{try{await p.mutateAsync({id:e,data:{state:r}}),j.toast.success("작업 상태가 변경되었습니다")}catch(r){var t,n;let e=(null==r||null==(n=r.response)||null==(t=n.data)?void 0:t.detail)||"상태 변경에 실패했습니다";j.toast.error(e)}};return u||x?(0,r.jsx)("div",{className:"container mx-auto p-6",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"프로젝트 정보를 불러오는 중..."})]})})}):c?(0,r.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(a.Button,{variant:"ghost",onClick:()=>l.push("/projects"),className:"flex items-center space-x-2",children:[(0,r.jsx)(tu.ArrowLeft,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"뒤로"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,r.jsx)(tc.FolderOpen,{className:"h-8 w-8"}),c.name]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:c.description||"설명이 없습니다"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(v,{defaultProjectId:d,triggerText:"작업 추가"}),(0,r.jsxs)(a.Button,{variant:"outline",onClick:()=>{w.mutate()},disabled:w.isPending,children:[(0,r.jsx)(tp.Download,{className:"mr-2 h-4 w-4"}),w.isPending?"내보내는 중...":"MD 내보내기"]}),(0,r.jsx)(rI,{project:c})]})]}),(0,r.jsxs)(s.Card,{children:[(0,r.jsx)(s.CardHeader,{children:(0,r.jsx)(s.CardTitle,{children:"프로젝트 정보"})}),(0,r.jsx)(s.CardContent,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"생성일"}),(0,r.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,r.jsx)(tm.Calendar,{className:"h-4 w-4"}),(0,rH.format)(new Date(c.created_at),"yyyy-MM-dd")]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"총 작업 수"}),(0,r.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,r.jsx)(tx.CheckSquare,{className:"h-4 w-4"}),b.total,"개"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"완료율"}),(0,r.jsxs)("p",{className:"text-lg font-semibold",children:[F.toFixed(1),"%"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"진행중 작업"}),(0,r.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,r.jsx)(rO.AlertCircle,{className:"h-4 w-4"}),b.inProgress,"개"]})]})]})})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(b).filter(e=>{let[r]=e;return"total"!==r}).map(e=>{let[t,n]=e,a=tj["inProgress"===t?rL.TaskState.IN_PROGRESS:"backlog"===t?rL.TaskState.BACKLOG:"done"===t?rL.TaskState.DONE:"paused"===t?rL.TaskState.PAUSED:rL.TaskState.CANCELED],o=a.icon;return(0,r.jsx)(s.Card,{className:"cursor-pointer hover:shadow-md transition-shadow",children:(0,r.jsx)(s.CardContent,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:a.label}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:n})]}),(0,r.jsx)(o,{className:"h-8 w-8 text-muted-foreground"})]})})},t)})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(a.Button,{variant:"ALL"===h?"default":"outline",onClick:()=>g("ALL"),children:["전체 (",b.total,")"]}),Object.entries(rL.TaskState).map(e=>{let[t,n]=e,s=tj[n],o=b["in_progress"===t.toLowerCase()?"inProgress":t.toLowerCase()];return(0,r.jsxs)(a.Button,{variant:h===n?"default":"outline",onClick:()=>g(n),className:"flex items-center gap-1",children:[(0,r.jsx)(s.icon,{className:"h-4 w-4"}),s.label," (",o,")"]},n)})]}),(0,r.jsxs)(s.Card,{children:[(0,r.jsxs)(s.CardHeader,{children:[(0,r.jsx)(s.CardTitle,{children:"작업 목록"}),(0,r.jsx)(s.CardDescription,{children:y.length?"".concat(y.length,"개의 작업"):"작업이 없습니다"})]}),(0,r.jsx)(s.CardContent,{children:0===y.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(tx.CheckSquare,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"작업이 없습니다"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"이 프로젝트에 새로운 작업을 추가해보세요"}),(0,r.jsx)(v,{defaultProjectId:d,triggerText:"작업 추가"})]}):(0,r.jsx)("div",{className:"space-y-4",children:y.map(e=>(0,r.jsx)(td,{task:e,onStateChange:C,isUpdating:p.isPending},e.id))})})]})]}):(0,r.jsx)("div",{className:"container mx-auto p-6",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(tc.FolderOpen,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"프로젝트를 찾을 수 없습니다"}),(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:"요청하신 프로젝트가 존재하지 않습니다."}),(0,r.jsxs)(a.Button,{onClick:()=>l.push("/projects"),children:[(0,r.jsx)(tu.ArrowLeft,{className:"mr-2 h-4 w-4"}),"프로젝트 목록으로 돌아가기"]})]})})}}]);