(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3116,e=>{"use strict";e.s(["Clock",()=>t],3116);let t=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},85071,e=>{"use strict";e.s(["useCreateTask",()=>c,"useTasks",()=>d,"useUpdateTaskState",()=>o]);var t=e.i(66027),s=e.i(54616),a=e.i(12598),l=e.i(16973),i=e.i(32661),r=e.i(93272);let n={all:["tasks"],lists:()=>[...n.all,"list"],list:e=>[...n.lists(),{filters:e}],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e]};function d(){return(0,t.useQuery)({queryKey:n.lists(),queryFn:()=>l.tasksApi.getAll().then(e=>e.data)})}function c(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:e=>l.tasksApi.create(e).then(e=>e.data),onSuccess:()=>{e.invalidateQueries({queryKey:n.lists()}),e.invalidateQueries({queryKey:i.projectKeys.lists()}),e.invalidateQueries({queryKey:r.dashboardKeys.kpis()})}})}function o(){let e=(0,a.useQueryClient)();return(0,s.useMutation)({mutationFn:e=>{let{id:t,data:s}=e;return l.tasksApi.updateState(t,s).then(e=>e.data)},onSuccess:t=>{e.invalidateQueries({queryKey:n.lists()}),e.setQueryData(n.detail(t.id),t),e.invalidateQueries({queryKey:r.dashboardKeys.kpis()})}})}},26514,e=>{"use strict";e.s(["parseISO",()=>l]);var t=e.i(34662),s=e.i(77241),a=e.i(81092);function l(e,l){var x;let h,j,f=()=>(0,s.constructFrom)(null==l?void 0:l.in,NaN),g=null!=(x=null==l?void 0:l.additionalDigits)?x:2,p=function(e){let t,s={},a=e.split(i.dateTimeDelimiter);if(a.length>2)return s;if(/:/.test(a[0])?t=a[0]:(s.date=a[0],t=a[1],i.timeZoneDelimiter.test(s.date)&&(s.date=e.split(i.timeZoneDelimiter)[0],t=e.substr(s.date.length,e.length))),t){let e=i.timezone.exec(t);e?(s.time=t.replace(e[1],""),s.timezone=e[1]):s.time=t}return s}(e);if(p.date){let e=function(e,t){let s=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(s);if(!a)return{year:NaN,restDateString:""};let l=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?l:100*i,restDateString:e.slice((a[1]||a[2]).length)}}(p.date,g);h=function(e,t){var s,a,l,i,n,d,o;if(null===t)return new Date(NaN);let x=e.match(r);if(!x)return new Date(NaN);let h=!!x[4],j=c(x[1]),f=c(x[2])-1,g=c(x[3]),p=c(x[4]),N=c(x[5])-1;if(h){return(s=p,a=N,s>=1&&s<=53&&a>=0&&a<=6)?function(e,t,s){let a=new Date(0);a.setUTCFullYear(e,0,4);let l=a.getUTCDay()||7;return a.setUTCDate(a.getUTCDate()+((t-1)*7+s+1-l)),a}(t,p,N):new Date(NaN)}{let e=new Date(0);return(l=t,i=f,n=g,i>=0&&i<=11&&n>=1&&n<=(u[i]||(m(l)?29:28))&&(d=t,(o=j)>=1&&o<=(m(d)?366:365)))?(e.setUTCFullYear(t,f,Math.max(j,g)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!h||isNaN(+h))return f();let N=+h,v=0;if(p.time&&isNaN(v=function(e){var s,a,l;let i=e.match(n);if(!i)return NaN;let r=o(i[1]),d=o(i[2]),c=o(i[3]);return(s=r,a=d,l=c,24===s?0===a&&0===l:l>=0&&l<60&&a>=0&&a<60&&s>=0&&s<25)?r*t.millisecondsInHour+d*t.millisecondsInMinute+1e3*c:NaN}(p.time)))return f();if(p.timezone){if(isNaN(j=function(e){var s;if("Z"===e)return 0;let a=e.match(d);if(!a)return 0;let l="+"===a[1]?-1:1,i=parseInt(a[2]),r=a[3]&&parseInt(a[3])||0;return(s=r)>=0&&s<=59?l*(i*t.millisecondsInHour+r*t.millisecondsInMinute):NaN}(p.timezone)))return f()}else{let e=new Date(N+v),t=(0,a.toDate)(0,null==l?void 0:l.in);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return(0,a.toDate)(N+v+j,null==l?void 0:l.in)}let i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},r=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,n=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,d=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(e){return e?parseInt(e):1}function o(e){return e&&parseFloat(e.replace(",","."))||0}let u=[31,null,31,30,31,30,31,31,30,31,30,31];function m(e){return e%400==0||e%4==0&&e%100!=0}},30576,e=>{"use strict";e.s(["createDoD",()=>s,"deleteDoD",()=>i,"getDoDByTask",()=>a,"updateDoD",()=>l]);var t=e.i(16973);let s=async e=>{try{let s=await t.default.post("/dod",e,{validateStatus:e=>200===e||201===e||409===e});if(409===s.status)return null;return(await t.default.get("/dod/task/".concat(e.task_id))).data}catch(e){return null}},a=async e=>{try{let s=await t.default.get("/dod/task/".concat(e),{validateStatus:e=>200===e||404===e});return 200===s.status?s.data:null}catch(e){return null}},l=(e,s)=>t.default.patch("/dod/".concat(e),s).then(e=>e.data),i=e=>t.default.delete("/dod/".concat(e)).then(e=>e.data)},63406,e=>{"use strict";e.s(["default",()=>y]);var t=e.i(43476),s=e.i(71645),a=e.i(15288),l=e.i(87486),i=e.i(19455),r=e.i(93479),n=e.i(66027),d=e.i(30576),c=e.i(85071),o=e.i(32661),u=e.i(20278),m=e.i(55436),x=e.i(87316),h=e.i(75505),j=e.i(56272),f=e.i(78583),g=e.i(3116),p=e.i(1851),N=e.i(26514),v=e.i(22016);function y(){let[e,y]=(0,s.useState)(""),{data:C,isLoading:D}=(0,c.useTasks)(),{data:b,isLoading:k}=(0,o.useProjects)(),T=(null==b?void 0:b.reduce((e,t)=>(e[t.id]=t,e),{}))||{},w=(0,n.useQuery)({queryKey:["all-dods",null==C?void 0:C.map(e=>e.id).join(",")],queryFn:async()=>C?(await Promise.allSettled(C.map(async e=>{let t=await (0,d.getDoDByTask)(e.id);return t?{task:e,dod:t,project:T[e.project_id]}:null}))).filter(e=>"fulfilled"===e.status&&null!==e.value).map(e=>e.value):[],enabled:!!C&&!!b,retry:!1}),S=w.data||[],U=S.filter(t=>{var s,a;if(!e)return!0;let l=e.toLowerCase();return t.task.title.toLowerCase().includes(l)||t.dod.deliverable_formats.toLowerCase().includes(l)||t.dod.mandatory_checks.some(e=>e.toLowerCase().includes(l))||t.dod.quality_bar.toLowerCase().includes(l)||t.dod.verification.toLowerCase().includes(l)||(null!=(a=null==(s=t.project)?void 0:s.name)?a:"").toLowerCase().includes(l)});return D||k||w.isLoading?(0,t.jsx)("div",{className:"container mx-auto p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"DoD를 불러오는 중..."})]})})}):(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,t.jsx)(u.Target,{className:"h-8 w-8"}),"DoD (Definition of Done)"]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"작성된 모든 완료 정의를 한 곳에서 관리"})]}),(0,t.jsxs)("div",{className:"relative max-w-md",children:[(0,t.jsx)(m.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(r.Input,{placeholder:"DoD 내용, 작업명, 프로젝트명으로 검색...",value:e,onChange:e=>y(e.target.value),className:"pl-10"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-lg",children:"전체 DoD"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold",children:S.length})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-lg",children:"전체 작업"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsx)("div",{className:"text-3xl font-bold",children:(null==C?void 0:C.length)||0})})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsx)(a.CardHeader,{className:"pb-3",children:(0,t.jsx)(a.CardTitle,{className:"text-lg",children:"작성율"})}),(0,t.jsx)(a.CardContent,{children:(0,t.jsxs)("div",{className:"text-3xl font-bold",children:[(null==C?void 0:C.length)?Math.round(S.length/C.length*100):0,"%"]})})]})]}),(0,t.jsxs)(a.Card,{children:[(0,t.jsxs)(a.CardHeader,{children:[(0,t.jsx)(a.CardTitle,{children:"DoD 목록"}),(0,t.jsx)(a.CardDescription,{children:U.length?"".concat(U.length,"개의 완료 정의"):"검색 조건에 맞는 DoD가 없습니다"})]}),(0,t.jsx)(a.CardContent,{children:0===U.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(u.Target,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:0===S.length?"작성된 DoD가 없습니다":"검색 결과가 없습니다"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:0===S.length?"프로젝트 상세 페이지에서 작업별로 DoD를 작성해보세요":"다른 검색어로 시도해보세요"}),0===S.length&&(0,t.jsx)(i.Button,{asChild:!0,children:(0,t.jsx)(v.default,{href:"/projects",children:"프로젝트 보기"})})]}):(0,t.jsx)("div",{className:"space-y-6",children:U.map(e=>{var s;return(0,t.jsxs)(a.Card,{className:"border-l-4 border-l-green-500",children:[(0,t.jsx)(a.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.CardTitle,{className:"text-xl mb-2",children:e.task.title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(h.FolderOpen,{className:"h-4 w-4"}),(0,t.jsx)(v.default,{href:"/projects/".concat(e.task.project_id),className:"hover:underline",children:(null==(s=e.project)?void 0:s.name)||"프로젝트 ".concat(e.task.project_id)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Calendar,{className:"h-4 w-4"}),(0,p.format)((0,N.parseISO)(e.dod.created_at),"yyyy-MM-dd")]}),(0,t.jsx)(l.Badge,{variant:"outline",children:e.dod.version_tag})]})]}),(0,t.jsxs)(l.Badge,{variant:"secondary",children:["P",e.task.priority]})]})}),(0,t.jsxs)(a.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,t.jsx)(f.FileText,{className:"h-3 w-3"}),"결과물 형식"]}),(0,t.jsx)("p",{className:"text-sm",children:e.dod.deliverable_formats})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,t.jsx)(j.CheckSquare,{className:"h-3 w-3"}),"검증 방법"]}),(0,t.jsx)("p",{className:"text-sm",children:e.dod.verification})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"font-semibold text-sm text-muted-foreground mb-2 flex items-center gap-1",children:[(0,t.jsx)(j.CheckSquare,{className:"h-3 w-3"}),"필수 체크 항목"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.dod.mandatory_checks.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"}),(0,t.jsx)("span",{children:e})]},s))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1",children:"품질 기준"}),(0,t.jsx)("p",{className:"text-sm",children:e.dod.quality_bar})]}),e.dod.deadline&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(g.Clock,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["마감일: ",e.dod.deadline]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-2",children:(0,t.jsx)(i.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,t.jsx)(v.default,{href:"/projects/".concat(e.task.project_id),children:"작업 보기"})})})]})]},e.task.id)})})})]})]})}}]);