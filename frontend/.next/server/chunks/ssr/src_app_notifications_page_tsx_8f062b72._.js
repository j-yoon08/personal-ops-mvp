module.exports=[1116,a=>{"use strict";a.s(["default",()=>X],1116);var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(86304),f=a.i(99570),g=a.i(75083),h=a.i(7554),i=a.i(70121),j=a.i(50104),k=a.i(25152),l=a.i(77994),m=a.i(3688),n=a.i(30553),o="Switch",[p,q]=(0,j.createContextScope)(o),[r,s]=p(o),t=c.forwardRef((a,d)=>{let{__scopeSwitch:e,name:f,checked:g,defaultChecked:j,required:l,disabled:m,value:p="on",onCheckedChange:q,form:s,...t}=a,[u,v]=c.useState(null),y=(0,i.useComposedRefs)(d,a=>v(a)),z=c.useRef(!1),A=!u||s||!!u.closest("form"),[B,C]=(0,k.useControllableState)({prop:g,defaultProp:j??!1,onChange:q,caller:o});return(0,b.jsxs)(r,{scope:e,checked:B,disabled:m,children:[(0,b.jsx)(n.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":l,"data-state":x(B),"data-disabled":m?"":void 0,disabled:m,value:p,...t,ref:y,onClick:(0,h.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,b.jsx)(w,{control:u,bubbles:!z.current,name:f,value:p,checked:B,required:l,disabled:m,form:s,style:{transform:"translateX(-100%)"}})]})});t.displayName=o;var u="SwitchThumb",v=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=s(u,d);return(0,b.jsx)(n.Primitive.span,{"data-state":x(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});v.displayName=u;var w=c.forwardRef(({__scopeSwitch:a,control:d,checked:e,bubbles:f=!0,...g},h)=>{let j=c.useRef(null),k=(0,i.useComposedRefs)(j,h),n=(0,l.usePrevious)(e),o=(0,m.useSize)(d);return c.useEffect(()=>{let a=j.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[n,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:k,style:{...g.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function x(a){return a?"checked":"unchecked"}w.displayName="SwitchBubbleInput";var y=a.i(68114);let z=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(t,{className:(0,y.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...c,ref:d,children:(0,b.jsx)(v,{className:(0,y.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));z.displayName=t.displayName;var A=a.i(66718),B=a.i(70430),C=a.i(33217),D=a.i(70025),E=a.i(37927),F=a.i(84391),G=a.i(23292);let H={all:["notifications"],lists:()=>[...H.all,"list"],list:(a,b)=>[...H.lists(),{status:a,limit:b}],pending:()=>[...H.all,"pending"],settings:()=>[...H.all,"settings"],stats:()=>[...H.all,"stats"]};var I=a.i(35785),J=a.i(23312),K=a.i(21161),L=a.i(16201),M=a.i(33508),N=a.i(73570),O=a.i(41710),P=a.i(4720),Q=a.i(50429),R=a.i(41675),S=a.i(63588);let T=(0,a.i(70106).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var U=a.i(94632),V=a.i(2491);let W={[I.NotificationType.DUE_DATE_REMINDER]:{label:"마감일 알림",icon:R.Calendar,color:"bg-blue-100 text-blue-800"},[I.NotificationType.OVERDUE_TASK]:{label:"지연 작업",icon:N.AlertTriangle,color:"bg-red-100 text-red-800"},[I.NotificationType.MISSING_BRIEF]:{label:"5SB 미작성",icon:P.FileText,color:"bg-yellow-100 text-yellow-800"},[I.NotificationType.MISSING_DOD]:{label:"DoD 미설정",icon:Q.Target,color:"bg-orange-100 text-orange-800"},[I.NotificationType.STALE_TASK]:{label:"장기 미진행",icon:O.Clock,color:"bg-gray-100 text-gray-800"},[I.NotificationType.REVIEW_SCHEDULE]:{label:"리뷰 스케줄",icon:S.MessageSquare,color:"bg-purple-100 text-purple-800"}};function X(){var a,h;let[i,j]=(0,c.useState)("notifications"),[k,l]=(0,c.useState)({}),{data:m,isLoading:n}=(0,C.useQuery)({queryKey:H.list(void 0,void 0),queryFn:()=>F.notificationsApi.getAll(a,h).then(a=>a.data),refetchInterval:3e4}),{data:o}=(0,C.useQuery)({queryKey:H.pending(),queryFn:()=>F.notificationsApi.getPending().then(a=>a.data),refetchInterval:15e3}),{data:p,isLoading:q}=(0,C.useQuery)({queryKey:H.settings(),queryFn:()=>F.notificationsApi.getSettings().then(a=>a.data)}),{data:r}=(0,C.useQuery)({queryKey:H.stats(),queryFn:()=>F.notificationsApi.getStats().then(a=>a.data),refetchInterval:6e4}),s=function(){let a=(0,E.useQueryClient)();return(0,D.useMutation)({mutationFn:()=>F.notificationsApi.generate().then(a=>a.data),onSuccess:b=>{a.invalidateQueries({queryKey:H.all}),G.toast.success(b.message)},onError:a=>{let b=a?.response?.data?.detail||"알림 생성에 실패했습니다";G.toast.error(b)}})}(),t=function(){let a=(0,E.useQueryClient)();return(0,D.useMutation)({mutationFn:a=>F.notificationsApi.markRead(a).then(a=>a.data),onSuccess:()=>{a.invalidateQueries({queryKey:H.all})},onError:a=>{let b=a?.response?.data?.detail||"알림 처리에 실패했습니다";G.toast.error(b)}})}(),u=function(){let a=(0,E.useQueryClient)();return(0,D.useMutation)({mutationFn:a=>F.notificationsApi.dismiss(a).then(a=>a.data),onSuccess:()=>{a.invalidateQueries({queryKey:H.all})},onError:a=>{let b=a?.response?.data?.detail||"알림 해제에 실패했습니다";G.toast.error(b)}})}(),v=function(){let a=(0,E.useQueryClient)();return(0,D.useMutation)({mutationFn:a=>F.notificationsApi.updateSettings(a).then(a=>a.data),onSuccess:b=>{a.invalidateQueries({queryKey:H.settings()}),G.toast.success(b.message)},onError:a=>{let b=a?.response?.data?.detail||"설정 업데이트에 실패했습니다";G.toast.error(b)}})}();(0,c.useEffect)(()=>{p&&l(p)},[p]);let w=a=>{t.mutate(a)},x=a=>{u.mutate(a)},y=(a,b)=>{l(c=>({...c,[a]:b}))};return n||q?(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"알림을 불러오는 중..."})]})})}):(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(J.Bell,{className:"h-8 w-8"}),"알림 센터"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"작업 관리 알림 및 리마인더 설정"})]}),(0,b.jsxs)(f.Button,{onClick:()=>{s.mutate()},disabled:s.isPending,children:[(0,b.jsx)(T,{className:"mr-2 h-4 w-4"}),s.isPending?"생성 중...":"알림 생성"]})]}),r&&(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:r.pending}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"대기 중"})]})}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:r.sent}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"발송됨"})]})}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:r.read}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"읽음"})]})}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:r.dismissed}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"해제됨"})]})}),(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardContent,{className:"p-4 text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:r.total}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"총 알림"})]})})]})]}),(0,b.jsxs)(g.Tabs,{value:i,onValueChange:j,children:[(0,b.jsxs)(g.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(g.TabsTrigger,{value:"notifications",children:"알림 목록"}),(0,b.jsx)(g.TabsTrigger,{value:"settings",children:"설정"})]}),(0,b.jsxs)(g.TabsContent,{value:"notifications",className:"space-y-4",children:[o&&o.length>0&&(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(N.AlertTriangle,{className:"h-5 w-5 text-orange-500"}),"대기중인 알림 (",o.length,")"]}),(0,b.jsx)(d.CardDescription,{children:"즉시 확인이 필요한 알림들입니다"})]}),(0,b.jsx)(d.CardContent,{className:"space-y-3",children:o.map(a=>{let c=W[a.type],d=c.icon;return(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg bg-orange-50",children:[(0,b.jsx)(d,{className:"h-5 w-5 text-orange-600 mt-1"}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"font-medium",children:a.title}),(0,b.jsx)(e.Badge,{variant:"outline",className:c.color,children:c.label})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,U.formatDistanceToNow)(new Date(a.created_at),{addSuffix:!0,locale:V.ko})})]}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>w(a.id),disabled:t.isPending,children:(0,b.jsx)(L.CheckCircle,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>x(a.id),disabled:u.isPending,children:(0,b.jsx)(M.X,{className:"h-4 w-4"})})]})]},a.id)})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"전체 알림"}),(0,b.jsx)(d.CardDescription,{children:m?.length?`${m.length}개의 알림`:"알림이 없습니다"})]}),(0,b.jsx)(d.CardContent,{children:m?.length?(0,b.jsx)("div",{className:"space-y-3",children:m.map(a=>{let c=W[a.type],d=c.icon;return(0,b.jsxs)("div",{className:`flex items-start gap-3 p-3 border rounded-lg ${a.status===I.NotificationStatus.READ?"bg-gray-50":"bg-white"}`,children:[(0,b.jsx)(d,{className:"h-5 w-5 text-muted-foreground mt-1"}),(0,b.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("p",{className:"font-medium",children:a.title}),(0,b.jsx)(e.Badge,{variant:"outline",className:c.color,children:c.label}),(0,b.jsxs)(e.Badge,{variant:a.status===I.NotificationStatus.READ?"secondary":"default",children:[a.status===I.NotificationStatus.PENDING&&"대기",a.status===I.NotificationStatus.SENT&&"발송",a.status===I.NotificationStatus.READ&&"읽음",a.status===I.NotificationStatus.DISMISSED&&"해제"]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.message}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,U.formatDistanceToNow)(new Date(a.created_at),{addSuffix:!0,locale:V.ko})})]}),a.status!==I.NotificationStatus.READ&&a.status!==I.NotificationStatus.DISMISSED&&(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>w(a.id),disabled:t.isPending,children:(0,b.jsx)(L.CheckCircle,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>x(a.id),disabled:u.isPending,children:(0,b.jsx)(M.X,{className:"h-4 w-4"})})]})]},a.id)})}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(J.Bell,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"알림이 없습니다"})]})})]})]}),(0,b.jsx)(g.TabsContent,{value:"settings",className:"space-y-4",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(K.Settings,{className:"h-5 w-5"}),"알림 설정"]}),(0,b.jsx)(d.CardDescription,{children:"알림 유형별 활성화 설정 및 주기 조정"})]}),(0,b.jsx)(d.CardContent,{className:"space-y-6",children:k&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{className:"text-base font-medium",children:"마감일 알림"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"작업 마감일 기반 알림"})]}),(0,b.jsx)(z,{checked:k.enable_due_date_reminders,onCheckedChange:a=>y("enable_due_date_reminders",a)})]}),k.enable_due_date_reminders&&(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)(B.Label,{htmlFor:"due_date_days",children:"마감 며칠 전에 알림"}),(0,b.jsx)(A.Input,{id:"due_date_days",type:"number",min:"1",max:"30",value:k.due_date_reminder_days,onChange:a=>y("due_date_reminder_days",parseInt(a.target.value)),className:"w-20 mt-1"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{className:"text-base font-medium",children:"5SB 미작성 알림"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"5문장 브리프가 없는 작업 알림"})]}),(0,b.jsx)(z,{checked:k.enable_missing_brief_alerts,onCheckedChange:a=>y("enable_missing_brief_alerts",a)})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{className:"text-base font-medium",children:"DoD 미설정 알림"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"완료 정의가 없는 작업 알림"})]}),(0,b.jsx)(z,{checked:k.enable_missing_dod_alerts,onCheckedChange:a=>y("enable_missing_dod_alerts",a)})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{className:"text-base font-medium",children:"장기 미진행 작업 알림"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"오래된 진행중 작업 알림"})]}),(0,b.jsx)(z,{checked:k.enable_stale_task_alerts,onCheckedChange:a=>y("enable_stale_task_alerts",a)})]}),k.enable_stale_task_alerts&&(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)(B.Label,{htmlFor:"stale_days",children:"며칠 후 장기 미진행으로 간주"}),(0,b.jsx)(A.Input,{id:"stale_days",type:"number",min:"1",max:"30",value:k.stale_task_days,onChange:a=>y("stale_task_days",parseInt(a.target.value)),className:"w-20 mt-1"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(B.Label,{className:"text-base font-medium",children:"정기 리뷰 알림"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"프로젝트 정기 리뷰 스케줄 알림"})]}),(0,b.jsx)(z,{checked:k.enable_review_reminders,onCheckedChange:a=>y("enable_review_reminders",a)})]}),k.enable_review_reminders&&(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)(B.Label,{htmlFor:"review_frequency",children:"리뷰 주기 (일)"}),(0,b.jsx)(A.Input,{id:"review_frequency",type:"number",min:"1",max:"30",value:k.review_reminder_frequency_days,onChange:a=>y("review_reminder_frequency_days",parseInt(a.target.value)),className:"w-20 mt-1"})]})]}),(0,b.jsx)(f.Button,{onClick:()=>{v.mutate(k)},disabled:v.isPending,children:v.isPending?"저장 중...":"설정 저장"})]})})]})})]})]})}}];

//# sourceMappingURL=src_app_notifications_page_tsx_8f062b72._.js.map