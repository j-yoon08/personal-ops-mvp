module.exports=[92405,a=>{"use strict";a.s(["default",()=>_],92405);var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(86304),f=a.i(66718),g=a.i(75083),h=a.i(70121),i=a.i(50104),j=a.i(7554),k=a.i(25152),l=a.i(77994),m=a.i(3688),n=a.i(77192),o=a.i(30553),p="Checkbox",[q,r]=(0,i.createContextScope)(p),[s,t]=q(p);function u(a){let{__scopeCheckbox:d,checked:e,children:f,defaultChecked:g,disabled:h,form:i,name:j,onCheckedChange:l,required:m,value:n="on",internal_do_not_use_render:o}=a,[q,r]=(0,k.useControllableState)({prop:e,defaultProp:g??!1,onChange:l,caller:p}),[t,u]=c.useState(null),[v,w]=c.useState(null),x=c.useRef(!1),y=!t||!!i||!!t.closest("form"),z={checked:q,disabled:h,setChecked:r,control:t,setControl:u,name:j,form:i,value:n,hasConsumerStoppedPropagationRef:x,required:m,defaultChecked:!C(g)&&g,isFormControl:y,bubbleInput:v,setBubbleInput:w};return(0,b.jsx)(s,{scope:d,...z,children:"function"==typeof o?o(z):f})}var v="CheckboxTrigger",w=c.forwardRef(({__scopeCheckbox:a,onKeyDown:d,onClick:e,...f},g)=>{let{control:i,value:k,disabled:l,checked:m,required:n,setControl:p,setChecked:q,hasConsumerStoppedPropagationRef:r,isFormControl:s,bubbleInput:u}=t(v,a),w=(0,h.useComposedRefs)(g,p),x=c.useRef(m);return c.useEffect(()=>{let a=i?.form;if(a){let b=()=>q(x.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[i,q]),(0,b.jsx)(o.Primitive.button,{type:"button",role:"checkbox","aria-checked":C(m)?"mixed":m,"aria-required":n,"data-state":D(m),"data-disabled":l?"":void 0,disabled:l,value:k,...f,ref:w,onKeyDown:(0,j.composeEventHandlers)(d,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,j.composeEventHandlers)(e,a=>{q(a=>!!C(a)||!a),u&&s&&(r.current=a.isPropagationStopped(),r.current||a.stopPropagation())})})});w.displayName=v;var x=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,b.jsx)(u,{__scopeCheckbox:d,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w,{...m,ref:c,__scopeCheckbox:d}),a&&(0,b.jsx)(B,{__scopeCheckbox:d})]})})});x.displayName=p;var y="CheckboxIndicator",z=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=t(y,d);return(0,b.jsx)(n.Presence,{present:e||C(g.checked)||!0===g.checked,children:(0,b.jsx)(o.Primitive.span,{"data-state":D(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});z.displayName=y;var A="CheckboxBubbleInput",B=c.forwardRef(({__scopeCheckbox:a,...d},e)=>{let{control:f,hasConsumerStoppedPropagationRef:g,checked:i,defaultChecked:j,required:k,disabled:n,name:p,value:q,form:r,bubbleInput:s,setBubbleInput:u}=t(A,a),v=(0,h.useComposedRefs)(e,u),w=(0,l.usePrevious)(i),x=(0,m.useSize)(f);c.useEffect(()=>{if(!s)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!g.current;if(w!==i&&a){let c=new Event("click",{bubbles:b});s.indeterminate=C(i),a.call(s,!C(i)&&i),s.dispatchEvent(c)}},[s,w,i,g]);let y=c.useRef(!C(i)&&i);return(0,b.jsx)(o.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:j??y.current,required:k,disabled:n,name:p,value:q,form:r,...d,tabIndex:-1,ref:v,style:{...d.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(a){return"indeterminate"===a}function D(a){return C(a)?"indeterminate":a?"checked":"unchecked"}B.displayName=A;var E=a.i(6406),F=a.i(68114);function G({className:a,...c}){return(0,b.jsx)(x,{"data-slot":"checkbox",className:(0,F.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(z,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,b.jsx)(E.CheckIcon,{className:"size-3.5"})})})}var H=a.i(33217);a.i(37927);var I=a.i(84391);let J={all:["search"],unified:(a,b,c)=>[...J.all,"unified",{query:a,types:b,limit:c}],similarProjects:(a,b)=>[...J.all,"similar",a,{limit:b}],decisionPatterns:(a,b)=>[...J.all,"patterns",{query:a,limit:b}],suggestions:a=>[...J.all,"suggestions",a],stats:()=>[...J.all,"stats"]};var K=a.i(87532),L=a.i(4720),M=a.i(96101),N=a.i(87534),O=a.i(50429),P=a.i(63588),Q=a.i(60246),R=a.i(24669),S=a.i(41710),T=a.i(70106);let U=(0,T.default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),V=(0,T.default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);var W=a.i(94632),X=a.i(2491),Y=a.i(38246);let Z={projects:{label:"프로젝트",icon:M.FolderOpen,color:"bg-blue-100 text-blue-800"},tasks:{label:"작업",icon:N.CheckSquare,color:"bg-green-100 text-green-800"},briefs:{label:"5SB",icon:L.FileText,color:"bg-purple-100 text-purple-800"},dod:{label:"DoD",icon:O.Target,color:"bg-orange-100 text-orange-800"},decisions:{label:"의사결정",icon:P.MessageSquare,color:"bg-red-100 text-red-800"},reviews:{label:"리뷰",icon:Q.Users,color:"bg-indigo-100 text-indigo-800"}},$=(a,b)=>{let[d,e]=(0,c.useState)(a);return(0,c.useEffect)(()=>{let c=setTimeout(()=>{e(a)},b);return()=>{clearTimeout(c)}},[a,b]),d};function _(){let[a,h]=(0,c.useState)(""),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)("search"),[m,n]=(0,c.useState)(""),o=$(a,300),p=$(m,300),{data:q,isLoading:r}=function(a,b,c,d=!0){return(0,H.useQuery)({queryKey:J.unified(a,b,50),queryFn:()=>I.searchApi.unified(a,b,50).then(a=>a.data),enabled:d&&a.length>=2,staleTime:3e5})}(o,i.length>0?i:void 0,50,o.length>=2),{data:s,isLoading:t}=function(a,b,c=!0){return(0,H.useQuery)({queryKey:J.decisionPatterns(a,20),queryFn:()=>I.searchApi.decisionPatterns(a,20).then(a=>a.data),enabled:c&&a.length>=3,staleTime:3e5})}(p,20,p.length>=3),{data:u}=(0,H.useQuery)({queryKey:J.stats(),queryFn:()=>I.searchApi.stats().then(a=>a.data),staleTime:36e5}),v=(0,c.useMemo)(()=>{if(!q?.results)return{};let a={};return Object.entries(q.results).forEach(([b,c])=>{c&&c.length>0&&(a[b]=[...c].sort((a,b)=>b.relevance_score-a.relevance_score))}),a},[q]);return(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(K.Search,{className:"h-8 w-8"}),"지식 검색"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"축적된 프로젝트 경험과 지식을 검색하고 재활용하세요"})]}),u&&(0,b.jsx)(d.Card,{children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-2xl font-bold",children:u.content_summary.total}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"총 콘텐츠"})]}),Object.entries(Z).map(([a,c])=>{let d=u.content_summary[a],e=c.icon;return(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,b.jsx)(e,{className:"h-4 w-4"}),(0,b.jsx)("p",{className:"text-lg font-bold",children:d})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c.label})]},a)})]})})})]}),(0,b.jsxs)(g.Tabs,{value:k,onValueChange:l,children:[(0,b.jsxs)(g.TabsList,{className:"grid w-full grid-cols-2",children:[(0,b.jsx)(g.TabsTrigger,{value:"search",children:"통합 검색"}),(0,b.jsx)(g.TabsTrigger,{value:"patterns",children:"의사결정 패턴"})]}),(0,b.jsxs)(g.TabsContent,{value:"search",className:"space-y-6",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(K.Search,{className:"h-5 w-5"}),"통합 검색"]}),(0,b.jsx)(d.CardDescription,{children:"모든 프로젝트 데이터에서 키워드를 검색합니다"})]}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(K.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"검색어를 입력하세요 (최소 2글자)",value:a,onChange:a=>h(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"검색 대상 (선택하지 않으면 전체 검색)"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-4",children:Object.entries(Z).map(([a,c])=>{let d=c.icon;return(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(G,{id:a,checked:i.includes(a),onCheckedChange:b=>{b?j(b=>[...b,a]):j(b=>b.filter(b=>b!==a))}}),(0,b.jsxs)("label",{htmlFor:a,className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,b.jsx)(d,{className:"h-4 w-4"}),c.label]})]},a)})})]})]})]}),o.length>=2&&(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(R.TrendingUp,{className:"h-5 w-5"}),"검색 결과",q&&(0,b.jsxs)(e.Badge,{variant:"outline",children:[q.total_results,"개 결과"]})]}),q&&(0,b.jsxs)(d.CardDescription,{children:['"',q.query,'"에 대한 검색 결과']})]}),(0,b.jsx)(d.CardContent,{children:r?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-primary border-t-transparent mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"검색 중..."})]}):0===Object.keys(v).length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(K.Search,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"검색 결과가 없습니다"})]}):(0,b.jsx)("div",{className:"space-y-6",children:Object.entries(v).map(([a,c])=>{let d=Z[a],f=d.icon;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(f,{className:"h-5 w-5"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:d.label}),(0,b.jsxs)(e.Badge,{variant:"outline",children:[c.length,"개"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:c.map(a=>(0,b.jsx)("div",{className:"border rounded-lg p-4 hover:bg-muted/50",children:(0,b.jsx)("div",{className:"flex items-start justify-between gap-4",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(Y.default,{href:"project"===a.type?`/projects/${a.id}`:`/projects/${a.project_id}`,className:"font-medium text-primary hover:underline",children:a.title}),(0,b.jsx)(e.Badge,{variant:"outline",className:d.color,children:d.label}),(0,b.jsxs)(e.Badge,{variant:"secondary",children:["관련도 ",a.relevance_score,"%"]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:a.content}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(S.Clock,{className:"h-3 w-3"}),(0,W.formatDistanceToNow)(new Date(a.created_at),{addSuffix:!0,locale:X.ko})]}),a.project_id&&(0,b.jsxs)(Y.default,{href:`/projects/${a.project_id}`,className:"text-primary hover:underline",children:["프로젝트 #",a.project_id]}),a.task_id&&(0,b.jsxs)("span",{children:["작업 #",a.task_id]})]})]})})},`${a.type}-${a.id}`))})]},a)})})})]})]}),(0,b.jsx)(g.TabsContent,{value:"patterns",className:"space-y-6",children:(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)(d.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(U,{className:"h-5 w-5"}),"의사결정 패턴 분석"]}),(0,b.jsx)(d.CardDescription,{children:"과거 유사한 문제 상황의 의사결정 사례를 분석합니다"})]}),(0,b.jsxs)(d.CardContent,{children:[(0,b.jsxs)("div",{className:"relative mb-4",children:[(0,b.jsx)(K.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"문제 상황이나 키워드를 입력하세요 (최소 3글자)",value:m,onChange:a=>n(a.target.value),className:"pl-10"})]}),p.length>=3&&(0,b.jsx)(b.Fragment,{children:t?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-primary border-t-transparent mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"패턴 분석 중..."})]}):s?.decision_patterns?.length?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(V,{className:"h-5 w-5"}),(0,b.jsxs)("h3",{className:"text-lg font-semibold",children:['"',s.query,'"와 관련된 과거 의사결정']}),(0,b.jsxs)(e.Badge,{variant:"outline",children:[s.decision_patterns.length,"개 패턴"]})]}),s.decision_patterns.map(a=>(0,b.jsxs)(d.Card,{className:"border-l-4 border-l-blue-500",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.CardTitle,{className:"text-base",children:a.problem}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(e.Badge,{variant:"secondary",children:["관련도 ",a.relevance_score,"%"]}),a.has_review&&(0,b.jsx)(e.Badge,{variant:"outline",className:"bg-green-100 text-green-800",children:"리뷰 완료"})]})]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"선택지"}),(0,b.jsx)("p",{className:"text-sm",children:a.options})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"결정"}),(0,b.jsx)("p",{className:"text-sm",children:a.decision})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"위험요소"}),(0,b.jsx)("p",{className:"text-sm",children:a.risks})]}),a.d_plus_7_review&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"D+7 리뷰"}),(0,b.jsx)("p",{className:"text-sm bg-muted p-2 rounded",children:a.d_plus_7_review})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground pt-2 border-t",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(S.Clock,{className:"h-3 w-3"}),(0,W.formatDistanceToNow)(new Date(a.created_at),{addSuffix:!0,locale:X.ko})]}),(0,b.jsxs)(Y.default,{href:"/tasks",className:"text-primary hover:underline",children:["작업 #",a.task_id]})]})]})]},a.id))]}):(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)(U,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"관련 의사결정 패턴을 찾을 수 없습니다"})]})})]})]})})]})]})}}];

//# sourceMappingURL=src_app_search_page_tsx_d54179f3._.js.map