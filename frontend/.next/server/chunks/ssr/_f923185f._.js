module.exports=[41710,a=>{"use strict";a.s(["Clock",()=>b],41710);let b=(0,a.i(70106).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},97580,a=>{"use strict";a.s(["useCreateTask",()=>j,"useTasks",()=>i,"useUpdateTaskState",()=>k]);var b=a.i(33217),c=a.i(70025),d=a.i(37927),e=a.i(84391),f=a.i(86456),g=a.i(69583);let h={all:["tasks"],lists:()=>[...h.all,"list"],list:a=>[...h.lists(),{filters:a}],details:()=>[...h.all,"detail"],detail:a=>[...h.details(),a]};function i(){return(0,b.useQuery)({queryKey:h.lists(),queryFn:()=>e.tasksApi.getAll().then(a=>a.data)})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.tasksApi.create(a).then(a=>a.data),onSuccess:()=>{a.invalidateQueries({queryKey:h.lists()}),a.invalidateQueries({queryKey:f.projectKeys.lists()}),a.invalidateQueries({queryKey:g.dashboardKeys.kpis()})}})}function k(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,data:b})=>e.tasksApi.updateState(a,b).then(a=>a.data),onSuccess:b=>{a.invalidateQueries({queryKey:h.lists()}),a.setQueryData(h.detail(b.id),b),a.invalidateQueries({queryKey:g.dashboardKeys.kpis()})}})}},69583,a=>{"use strict";a.s(["dashboardKeys",()=>d,"useKPIs",()=>e]);var b=a.i(33217),c=a.i(84391);let d={all:["dashboard"],kpis:()=>[...d.all,"kpis"]};function e(){return(0,b.useQuery)({queryKey:d.kpis(),queryFn:()=>c.dashboardApi.getKPIs().then(a=>a.data),refetchInterval:3e4})}},86456,a=>{"use strict";a.s(["projectKeys",()=>g,"useCreateProject",()=>j,"useDeleteProject",()=>l,"useProject",()=>i,"useProjects",()=>h,"useUpdateProject",()=>k]);var b=a.i(33217),c=a.i(70025),d=a.i(37927),e=a.i(84391),f=a.i(69583);let g={all:["projects"],lists:()=>[...g.all,"list"],list:a=>[...g.lists(),{filters:a}],details:()=>[...g.all,"detail"],detail:a=>[...g.details(),a]};function h(){return(0,b.useQuery)({queryKey:g.lists(),queryFn:()=>e.projectsApi.getAll().then(a=>a.data)})}function i(a){return(0,b.useQuery)({queryKey:g.detail(a),queryFn:()=>e.projectsApi.getById(a).then(a=>a.data),enabled:!!a})}function j(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.projectsApi.create(a).then(a=>a.data),onSuccess:()=>{a.invalidateQueries({queryKey:g.lists()}),a.invalidateQueries({queryKey:f.dashboardKeys.kpis()})}})}function k(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({id:a,data:b})=>e.projectsApi.update(a,b).then(a=>a.data),onSuccess:b=>{a.invalidateQueries({queryKey:g.lists()}),a.setQueryData(g.detail(b.id),b),a.invalidateQueries({queryKey:f.dashboardKeys.kpis()})}})}function l(){let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>e.projectsApi.delete(a),onSuccess:(b,c)=>{a.invalidateQueries({queryKey:g.lists()}),a.removeQueries({queryKey:g.detail(c)}),a.invalidateQueries({queryKey:f.dashboardKeys.kpis()})}})}},41675,a=>{"use strict";a.s(["Calendar",()=>b],41675);let b=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},66718,a=>{"use strict";a.s(["Input",()=>d]);var b=a.i(87924),c=a.i(68114);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}},70025,a=>{"use strict";a.s(["useMutation",()=>i],70025);var b=a.i(72131),c=a.i(12794),d=a.i(18544),e=a.i(33791),f=a.i(42871),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context;a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c),this.#d.onSettled?.(a.data,null,b,c)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c),this.#d.onSettled?.(void 0,a.error,b,c))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(37927);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}},60178,a=>{"use strict";a.s(["parseISO",()=>e]);var b=a.i(59296),c=a.i(42724),d=a.i(74016);function e(a,e){let n,o,p=()=>(0,c.constructFrom)(e?.in,NaN),q=e?.additionalDigits??2,r=function(a){let b,c={},d=a.split(f.dateTimeDelimiter);if(d.length>2)return c;if(/:/.test(d[0])?b=d[0]:(c.date=d[0],b=d[1],f.timeZoneDelimiter.test(c.date)&&(c.date=a.split(f.timeZoneDelimiter)[0],b=a.substr(c.date.length,a.length))),b){let a=f.timezone.exec(b);a?(c.time=b.replace(a[1],""),c.timezone=a[1]):c.time=b}return c}(a);if(r.date){let a=function(a,b){let c=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+b)+"})|(\\d{2}|[+-]\\d{"+(2+b)+"})$)"),d=a.match(c);if(!d)return{year:NaN,restDateString:""};let e=d[1]?parseInt(d[1]):null,f=d[2]?parseInt(d[2]):null;return{year:null===f?e:100*f,restDateString:a.slice((d[1]||d[2]).length)}}(r.date,q);n=function(a,b){var c,d,e,f,h,i,k;if(null===b)return new Date(NaN);let n=a.match(g);if(!n)return new Date(NaN);let o=!!n[4],p=j(n[1]),q=j(n[2])-1,r=j(n[3]),s=j(n[4]),t=j(n[5])-1;if(o){return(c=s,d=t,c>=1&&c<=53&&d>=0&&d<=6)?function(a,b,c){let d=new Date(0);d.setUTCFullYear(a,0,4);let e=d.getUTCDay()||7;return d.setUTCDate(d.getUTCDate()+((b-1)*7+c+1-e)),d}(b,s,t):new Date(NaN)}{let a=new Date(0);return(e=b,f=q,h=r,f>=0&&f<=11&&h>=1&&h<=(l[f]||(m(e)?29:28))&&(i=b,(k=p)>=1&&k<=(m(i)?366:365)))?(a.setUTCFullYear(b,q,Math.max(p,r)),a):new Date(NaN)}}(a.restDateString,a.year)}if(!n||isNaN(+n))return p();let s=+n,t=0;if(r.time&&isNaN(t=function(a){var c,d,e;let f=a.match(h);if(!f)return NaN;let g=k(f[1]),i=k(f[2]),j=k(f[3]);return(c=g,d=i,e=j,24===c?0===d&&0===e:e>=0&&e<60&&d>=0&&d<60&&c>=0&&c<25)?g*b.millisecondsInHour+i*b.millisecondsInMinute+1e3*j:NaN}(r.time)))return p();if(r.timezone){if(isNaN(o=function(a){var c;if("Z"===a)return 0;let d=a.match(i);if(!d)return 0;let e="+"===d[1]?-1:1,f=parseInt(d[2]),g=d[3]&&parseInt(d[3])||0;return(c=g)>=0&&c<=59?e*(f*b.millisecondsInHour+g*b.millisecondsInMinute):NaN}(r.timezone)))return p()}else{let a=new Date(s+t),b=(0,d.toDate)(0,e?.in);return b.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),b.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),b}return(0,d.toDate)(s+t+o,e?.in)}let f={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,h=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,i=/^([+-])(\d{2})(?::?(\d{2}))?$/;function j(a){return a?parseInt(a):1}function k(a){return a&&parseFloat(a.replace(",","."))||0}let l=[31,null,31,30,31,30,31,31,30,31,30,31];function m(a){return a%400==0||a%4==0&&a%100!=0}},41208,a=>{"use strict";a.s(["createDoD",()=>c,"deleteDoD",()=>f,"getDoDByTask",()=>d,"updateDoD",()=>e]);var b=a.i(84391);let c=async a=>{try{let c=await b.default.post("/dod",a,{validateStatus:a=>200===a||201===a||409===a});if(409===c.status)return null;return(await b.default.get(`/dod/task/${a.task_id}`)).data}catch{return null}},d=async a=>{try{let c=await b.default.get(`/dod/task/${a}`,{validateStatus:a=>200===a||404===a});return 200===c.status?c.data:null}catch{return null}},e=(a,c)=>b.default.patch(`/dod/${a}`,c).then(a=>a.data),f=a=>b.default.delete(`/dod/${a}`).then(a=>a.data)},56437,a=>{"use strict";a.s(["default",()=>v]);var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(86304),f=a.i(99570),g=a.i(66718),h=a.i(33217),i=a.i(41208),j=a.i(97580),k=a.i(86456),l=a.i(50429),m=a.i(87532),n=a.i(41675),o=a.i(96101),p=a.i(87534),q=a.i(4720),r=a.i(41710),s=a.i(56711),t=a.i(60178),u=a.i(38246);function v(){let[a,v]=(0,c.useState)(""),{data:w,isLoading:x}=(0,j.useTasks)(),{data:y,isLoading:z}=(0,k.useProjects)(),A=y?.reduce((a,b)=>(a[b.id]=b,a),{})||{},B=(0,h.useQuery)({queryKey:["all-dods",w?.map(a=>a.id).join(",")],queryFn:async()=>w?(await Promise.allSettled(w.map(async a=>{let b=await (0,i.getDoDByTask)(a.id);return b?{task:a,dod:b,project:A[a.project_id]}:null}))).filter(a=>"fulfilled"===a.status&&null!==a.value).map(a=>a.value):[],enabled:!!w&&!!y,retry:!1}),C=B.data||[],D=C.filter(b=>{if(!a)return!0;let c=a.toLowerCase();return b.task.title.toLowerCase().includes(c)||b.dod.deliverable_formats.toLowerCase().includes(c)||b.dod.mandatory_checks.some(a=>a.toLowerCase().includes(c))||b.dod.quality_bar.toLowerCase().includes(c)||b.dod.verification.toLowerCase().includes(c)||(b.project?.name??"").toLowerCase().includes(c)});return x||z||B.isLoading?(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"DoD를 불러오는 중..."})]})})}):(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(l.Target,{className:"h-8 w-8"}),"DoD (Definition of Done)"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"작성된 모든 완료 정의를 한 곳에서 관리"})]}),(0,b.jsxs)("div",{className:"relative max-w-md",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"DoD 내용, 작업명, 프로젝트명으로 검색...",value:a,onChange:a=>v(a.target.value),className:"pl-10"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-lg",children:"전체 DoD"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-3xl font-bold",children:C.length})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-lg",children:"전체 작업"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-3xl font-bold",children:w?.length||0})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsx)(d.CardTitle,{className:"text-lg",children:"작성율"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"text-3xl font-bold",children:[w?.length?Math.round(C.length/w.length*100):0,"%"]})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"DoD 목록"}),(0,b.jsx)(d.CardDescription,{children:D.length?`${D.length}개의 완료 정의`:"검색 조건에 맞는 DoD가 없습니다"})]}),(0,b.jsx)(d.CardContent,{children:0===D.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(l.Target,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:0===C.length?"작성된 DoD가 없습니다":"검색 결과가 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:0===C.length?"프로젝트 상세 페이지에서 작업별로 DoD를 작성해보세요":"다른 검색어로 시도해보세요"}),0===C.length&&(0,b.jsx)(f.Button,{asChild:!0,children:(0,b.jsx)(u.default,{href:"/projects",children:"프로젝트 보기"})})]}):(0,b.jsx)("div",{className:"space-y-6",children:D.map(a=>(0,b.jsxs)(d.Card,{className:"border-l-4 border-l-green-500",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{className:"text-xl mb-2",children:a.task.title}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.FolderOpen,{className:"h-4 w-4"}),(0,b.jsx)(u.default,{href:`/projects/${a.task.project_id}`,className:"hover:underline",children:a.project?.name||`프로젝트 ${a.task.project_id}`})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(n.Calendar,{className:"h-4 w-4"}),(0,s.format)((0,t.parseISO)(a.dod.created_at),"yyyy-MM-dd")]}),(0,b.jsx)(e.Badge,{variant:"outline",children:a.dod.version_tag})]})]}),(0,b.jsxs)(e.Badge,{variant:"secondary",children:["P",a.task.priority]})]})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)(q.FileText,{className:"h-3 w-3"}),"결과물 형식"]}),(0,b.jsx)("p",{className:"text-sm",children:a.dod.deliverable_formats})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1 flex items-center gap-1",children:[(0,b.jsx)(p.CheckSquare,{className:"h-3 w-3"}),"검증 방법"]}),(0,b.jsx)("p",{className:"text-sm",children:a.dod.verification})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"font-semibold text-sm text-muted-foreground mb-2 flex items-center gap-1",children:[(0,b.jsx)(p.CheckSquare,{className:"h-3 w-3"}),"필수 체크 항목"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:a.dod.mandatory_checks.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"}),(0,b.jsx)("span",{children:a})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-semibold text-sm text-muted-foreground mb-1",children:"품질 기준"}),(0,b.jsx)("p",{className:"text-sm",children:a.dod.quality_bar})]}),a.dod.deadline&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(r.Clock,{className:"h-4 w-4"}),(0,b.jsxs)("span",{children:["마감일: ",a.dod.deadline]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-2",children:(0,b.jsx)(f.Button,{asChild:!0,variant:"outline",size:"sm",children:(0,b.jsx)(u.default,{href:`/projects/${a.task.project_id}`,children:"작업 보기"})})})]})]},a.task.id))})})]})]})}}];

//# sourceMappingURL=_f923185f._.js.map