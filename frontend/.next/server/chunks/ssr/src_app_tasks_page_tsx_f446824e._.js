module.exports=[44343,a=>{"use strict";a.s(["default",()=>K],44343);var b=a.i(87924),c=a.i(72131),d=a.i(91119),e=a.i(86304),f=a.i(99570),g=a.i(66718),h=a.i(80701),i=a.i(97580),j=a.i(86456),k=a.i(14574),l=a.i(41921),m=a.i(15618),n=a.i(95245),o=a.i(59501),p=a.i(54714),q=a.i(23292);let r=p.object({project_id:p.string().min(1,"프로젝트를 선택해주세요"),title:p.string().min(1,"작업 제목을 입력해주세요"),priority:p.string().min(1,"우선순위를 선택해주세요"),due_date:p.string().optional()});function s(){let[a,d]=(0,c.useState)(!1),e=(0,i.useCreateTask)(),{data:p,isLoading:s}=(0,j.useProjects)(),t=p&&p.length>0,u=(0,n.useForm)({resolver:(0,o.zodResolver)(r),defaultValues:{project_id:"",title:"",priority:"3",due_date:""}}),v=async a=>{try{let b={project_id:parseInt(a.project_id),title:a.title,priority:parseInt(a.priority),due_date:a.due_date||void 0};await e.mutateAsync(b),q.toast.success("작업이 생성되었습니다!"),u.reset(),d(!1)}catch(b){let a=b?.response?.data?.detail||"작업 생성에 실패했습니다.";q.toast.error(a),console.error("Error creating task:",b)}};return(0,b.jsxs)(k.Dialog,{open:a,onOpenChange:d,children:[(0,b.jsx)(k.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",disabled:!t,title:t?"":"먼저 프로젝트를 생성해주세요",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"새 작업"]})}),(0,b.jsxs)(k.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(k.DialogHeader,{children:[(0,b.jsx)(k.DialogTitle,{children:"새 작업 생성"}),(0,b.jsx)(k.DialogDescription,{children:t?"새로운 작업을 생성합니다. 프로젝트와 작업 제목은 필수입니다.":"작업을 생성하려면 먼저 프로젝트를 생성해주세요."})]}),t?(0,b.jsx)(l.Form,{...u,children:(0,b.jsxs)("form",{onSubmit:u.handleSubmit(v),className:"space-y-4",children:[(0,b.jsx)(l.FormField,{control:u.control,name:"project_id",render:({field:a})=>(0,b.jsxs)(l.FormItem,{children:[(0,b.jsx)(l.FormLabel,{children:"프로젝트 *"}),(0,b.jsxs)(h.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(l.FormControl,{children:(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"프로젝트를 선택하세요"})})}),(0,b.jsx)(h.SelectContent,{children:p?.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),(0,b.jsx)(l.FormMessage,{})]})}),(0,b.jsx)(l.FormField,{control:u.control,name:"title",render:({field:a})=>(0,b.jsxs)(l.FormItem,{children:[(0,b.jsx)(l.FormLabel,{children:"작업 제목 *"}),(0,b.jsx)(l.FormControl,{children:(0,b.jsx)(g.Input,{placeholder:"예: 데이터베이스 설계",...a})}),(0,b.jsx)(l.FormMessage,{})]})}),(0,b.jsx)(l.FormField,{control:u.control,name:"priority",render:({field:a})=>(0,b.jsxs)(l.FormItem,{children:[(0,b.jsx)(l.FormLabel,{children:"우선순위 *"}),(0,b.jsxs)(h.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(l.FormControl,{children:(0,b.jsx)(h.SelectTrigger,{children:(0,b.jsx)(h.SelectValue,{placeholder:"우선순위 선택"})})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"1",children:"1 - 최고"}),(0,b.jsx)(h.SelectItem,{value:"2",children:"2 - 높음"}),(0,b.jsx)(h.SelectItem,{value:"3",children:"3 - 보통"}),(0,b.jsx)(h.SelectItem,{value:"4",children:"4 - 낮음"}),(0,b.jsx)(h.SelectItem,{value:"5",children:"5 - 최하"})]})]}),(0,b.jsx)(l.FormMessage,{})]})}),(0,b.jsx)(l.FormField,{control:u.control,name:"due_date",render:({field:a})=>(0,b.jsxs)(l.FormItem,{children:[(0,b.jsx)(l.FormLabel,{children:"마감일 (선택)"}),(0,b.jsx)(l.FormControl,{children:(0,b.jsx)(g.Input,{type:"date",...a})}),(0,b.jsx)(l.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:e.isPending,children:e.isPending?"생성 중...":"생성"})]})]})}):(0,b.jsxs)("div",{className:"text-center py-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:s?"프로젝트를 불러오는 중...":"생성된 프로젝트가 없습니다."}),(0,b.jsx)(f.Button,{onClick:()=>d(!1),children:"확인"})]})]})]})}var t=a.i(35785),u=a.i(87534),v=a.i(41710),w=a.i(92e3),x=a.i(16201),y=a.i(8549),z=a.i(33508),A=a.i(87532),B=a.i(70106);let C=(0,B.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),D=(0,B.default)("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),E=(0,B.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var F=a.i(50429),G=a.i(41675),H=a.i(38246),I=a.i(56711);let J={[t.TaskState.BACKLOG]:{label:"대기",icon:v.Clock,color:"bg-gray-500",variant:"secondary"},[t.TaskState.IN_PROGRESS]:{label:"진행중",icon:w.AlertCircle,color:"bg-blue-500",variant:"default"},[t.TaskState.DONE]:{label:"완료",icon:x.CheckCircle,color:"bg-green-500",variant:"secondary"},[t.TaskState.PAUSED]:{label:"중단",icon:y.Pause,color:"bg-yellow-500",variant:"outline"},[t.TaskState.CANCELED]:{label:"취소",icon:z.X,color:"bg-red-500",variant:"destructive"}};function K(){let{data:a,isLoading:k}=(0,i.useTasks)(),{data:l,isLoading:m}=(0,j.useProjects)(),n=(0,i.useUpdateTaskState)(),[o,p]=(0,c.useState)(""),[r,v]=(0,c.useState)("ALL"),[w,x]=(0,c.useState)("ALL"),[y,B]=(0,c.useState)("created"),[K,L]=(0,c.useState)("desc"),M=[...a?.filter(a=>{if(o){let b=o.toLowerCase(),c=a.title.toLowerCase().includes(b),d=l?.find(b=>b.id===a.project_id),e=d?.name.toLowerCase().includes(b);if(!c&&!e)return!1}return("ALL"===r||a.state===r)&&("ALL"===w||a.project_id===w)})||[]].sort((a,b)=>{let c,d;switch(y){case"title":c=a.title.toLowerCase(),d=b.title.toLowerCase();break;case"priority":c=a.priority,d=b.priority;break;case"due_date":c=new Date(a.due_date?a.due_date:"9999-12-31"),d=new Date(b.due_date?b.due_date:"9999-12-31");break;default:c=new Date(a.created_at),d=new Date(b.created_at)}return c<d?"asc"===K?-1:1:c>d?"asc"===K?1:-1:0}),N={total:a?.length||0,backlog:a?.filter(a=>a.state===t.TaskState.BACKLOG).length||0,inProgress:a?.filter(a=>a.state===t.TaskState.IN_PROGRESS).length||0,done:a?.filter(a=>a.state===t.TaskState.DONE).length||0,paused:a?.filter(a=>a.state===t.TaskState.PAUSED).length||0,canceled:a?.filter(a=>a.state===t.TaskState.CANCELED).length||0},O={total:M.length,backlog:M.filter(a=>a.state===t.TaskState.BACKLOG).length,inProgress:M.filter(a=>a.state===t.TaskState.IN_PROGRESS).length,done:M.filter(a=>a.state===t.TaskState.DONE).length,paused:M.filter(a=>a.state===t.TaskState.PAUSED).length,canceled:M.filter(a=>a.state===t.TaskState.CANCELED).length},P=a=>J[a]||{label:a,variant:"outline"},Q=async(a,b)=>{try{await n.mutateAsync({id:a,data:{state:b}}),q.toast.success("작업 상태가 변경되었습니다")}catch(b){let a=b?.response?.data?.detail||"상태 변경에 실패했습니다";q.toast.error(a)}};return k||m?(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"작업을 불러오는 중..."})]})})}):(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(u.CheckSquare,{className:"h-8 w-8"}),"작업 관리"]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"전체 작업 현황 및 상태 관리 - 모든 프로젝트의 작업을 한 곳에서"})]}),(0,b.jsx)(s,{})]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(A.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"작업명이나 프로젝트명으로 검색...",value:o,onChange:a=>p(a.target.value),className:"pl-10"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(h.Select,{value:r.toString(),onValueChange:a=>v(a),children:[(0,b.jsxs)(h.SelectTrigger,{className:"w-[140px]",children:[(0,b.jsx)(C,{className:"mr-2 h-4 w-4"}),(0,b.jsx)(h.SelectValue,{placeholder:"상태"})]}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"ALL",children:"모든 상태"}),Object.entries(t.TaskState).map(([a,c])=>{let d=J[c];return(0,b.jsx)(h.SelectItem,{value:c,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.icon,{className:"h-4 w-4"}),d.label]})},c)})]})]}),(0,b.jsxs)(h.Select,{value:w.toString(),onValueChange:a=>x("ALL"===a?"ALL":parseInt(a)),children:[(0,b.jsx)(h.SelectTrigger,{className:"w-[180px]",children:(0,b.jsx)(h.SelectValue,{placeholder:"프로젝트"})}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"ALL",children:"모든 프로젝트"}),l?.map(a=>(0,b.jsx)(h.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),(0,b.jsxs)(h.Select,{value:`${y}-${K}`,onValueChange:a=>{let[b,c]=a.split("-");B(b),L(c)},children:[(0,b.jsxs)(h.SelectTrigger,{className:"w-[140px]",children:[(0,b.jsx)(D,{className:"mr-2 h-4 w-4"}),(0,b.jsx)(h.SelectValue,{placeholder:"정렬"})]}),(0,b.jsxs)(h.SelectContent,{children:[(0,b.jsx)(h.SelectItem,{value:"created-desc",children:"최신순"}),(0,b.jsx)(h.SelectItem,{value:"created-asc",children:"오래된순"}),(0,b.jsx)(h.SelectItem,{value:"title-asc",children:"이름순 (A-Z)"}),(0,b.jsx)(h.SelectItem,{value:"title-desc",children:"이름순 (Z-A)"}),(0,b.jsx)(h.SelectItem,{value:"priority-asc",children:"우선순위 (낮음)"}),(0,b.jsx)(h.SelectItem,{value:"priority-desc",children:"우선순위 (높음)"}),(0,b.jsx)(h.SelectItem,{value:"due_date-asc",children:"마감일 (빠름)"}),(0,b.jsx)(h.SelectItem,{value:"due_date-desc",children:"마감일 (늦음)"})]})]})]})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:Object.entries(N).map(([a,c])=>{let e="total"===a?null:J[a],f=e?.icon||u.CheckSquare,g=O[a];return(0,b.jsx)(d.Card,{className:`cursor-pointer hover:shadow-md transition-shadow ${"total"===a&&"ALL"===r||r===a.toUpperCase()?"ring-2 ring-primary":""}`,onClick:()=>v("total"===a?"ALL":a.toUpperCase()),children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"total"===a?"전체":"backlog"===a?"대기":"inProgress"===a?"진행중":"done"===a?"완료":"paused"===a?"중단":"취소"}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:o||"ALL"!==w?g:c}),(o||"ALL"!==w)&&c!==g&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["전체: ",c]})]}),(0,b.jsx)(f,{className:"h-8 w-8 text-muted-foreground"})]})})},a)})}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(d.CardTitle,{children:"작업 목록"}),(0,b.jsx)(d.CardDescription,{children:M.length?(0,b.jsxs)(b.Fragment,{children:[M.length,"개의 작업",(o||"ALL"!==r||"ALL"!==w)&&` (전체 ${a?.length||0}개 중)`]}):"조건에 맞는 작업이 없습니다"})]}),(o||"ALL"!==r||"ALL"!==w)&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[o&&(0,b.jsxs)(e.Badge,{variant:"outline",children:["검색: ",o,(0,b.jsx)(z.X,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>p("")})]}),"ALL"!==r&&(0,b.jsxs)(e.Badge,{variant:"outline",children:["상태: ",J[r].label,(0,b.jsx)(z.X,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>v("ALL")})]}),"ALL"!==w&&(0,b.jsxs)(e.Badge,{variant:"outline",children:["프로젝트: ",l?.find(a=>a.id===w)?.name,(0,b.jsx)(z.X,{className:"ml-1 h-3 w-3 cursor-pointer",onClick:()=>x("ALL")})]}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>{p(""),v("ALL"),x("ALL")},children:"전체 초기화"})]})]})}),(0,b.jsx)(d.CardContent,{children:0===M.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(u.CheckSquare,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:a?.length?"조건에 맞는 작업이 없습니다":"작업이 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:a?.length?"다른 검색어나 필터를 사용해보세요":"새로운 작업을 생성해보세요"}),!a?.length&&(0,b.jsx)(s,{})]}):(0,b.jsx)("div",{className:"space-y-4",children:M.map(a=>{let c=l?.find(b=>b.id===a.project_id),g=P(a.state),h=(a=>{switch(a){case 1:return"최고";case 2:return"높음";case 3:return"보통";case 4:return"낮음";case 5:return"최하";default:return a.toString()}})(a.priority);return(0,b.jsxs)(d.Card,{className:"border-l-4 border-l-blue-500 hover:shadow-sm transition-shadow",children:[(0,b.jsx)(d.CardHeader,{className:"pb-3",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:a.title}),(0,b.jsx)(e.Badge,{variant:g.variant,children:g.label})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(E,{className:"h-4 w-4"}),(0,b.jsx)(H.default,{href:`/projects/${a.project_id}`,className:"hover:underline",children:c?.name||`프로젝트 ${a.project_id}`})]}),a.due_date&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(G.Calendar,{className:"h-4 w-4"}),(0,I.format)(new Date(a.due_date),"yyyy-MM-dd")]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(F.Target,{className:"h-4 w-4"}),"우선순위: ",h]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",asChild:!0,children:(0,b.jsx)(H.default,{href:`/tasks/${a.id}`,children:"상세보기"})}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,b.jsx)(H.default,{href:`/projects/${a.project_id}`,children:"프로젝트 보기"})})]})]})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,b.jsxs)("span",{children:["생성: ",(0,I.format)(new Date(a.created_at),"MM/dd")]}),(0,b.jsxs)("span",{children:["컨텍스트 스위치: ",a.context_switch_count||0,"회"]}),(0,b.jsxs)("span",{children:["재작업: ",a.rework_count||0,"회"]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:Object.values(t.TaskState).map(c=>(0,b.jsx)(f.Button,{variant:a.state===c?"default":"outline",size:"sm",onClick:()=>Q(a.id,c),disabled:n.isPending,className:"min-w-[80px]",children:P(c).label},c))})]})})]},a.id)})})})]})]})}}];

//# sourceMappingURL=src_app_tasks_page_tsx_f446824e._.js.map