module.exports=[41400,a=>{"use strict";a.s(["default",()=>cr],41400);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(91119),f=a.i(99570),g=a.i(86456),h=a.i(97580),i=a.i(14574),j=a.i(41921),k=a.i(66718),l=a.i(80701),m=a.i(15618),n=a.i(95245),o=a.i(59501),p=a.i(54714),q=a.i(23292);let r=p.object({project_id:p.string().min(1,"프로젝트를 선택해주세요"),title:p.string().min(1,"작업 제목을 입력해주세요"),priority:p.string().min(1,"우선순위를 선택해주세요"),due_date:p.string().optional()});function s({defaultProjectId:a,triggerText:d="새 작업"}){let[e,p]=(0,c.useState)(!1),s=(0,h.useCreateTask)(),{data:t,isLoading:u}=(0,g.useProjects)(),v=t&&t.length>0,w=(0,n.useForm)({resolver:(0,o.zodResolver)(r),defaultValues:{project_id:a?a.toString():"",title:"",priority:"3",due_date:""}});(0,c.useState)(()=>{a&&w.setValue("project_id",a.toString())});let x=async b=>{try{let c={project_id:parseInt(b.project_id),title:b.title,priority:parseInt(b.priority),due_date:b.due_date||void 0};await s.mutateAsync(c),q.toast.success("작업이 생성되었습니다!"),w.reset({project_id:a?a.toString():"",title:"",priority:"3",due_date:""}),p(!1)}catch(b){let a=b?.response?.data?.detail||"작업 생성에 실패했습니다.";q.toast.error(a),console.error("Error creating task:",b)}};return(0,b.jsxs)(i.Dialog,{open:e,onOpenChange:p,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",disabled:!v,title:v?"":"먼저 프로젝트를 생성해주세요",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),d]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"새 작업 생성"}),(0,b.jsx)(i.DialogDescription,{children:v?"새로운 작업을 생성합니다. 프로젝트와 작업 제목은 필수입니다.":"작업을 생성하려면 먼저 프로젝트를 생성해주세요."})]}),v?(0,b.jsx)(j.Form,{...w,children:(0,b.jsxs)("form",{onSubmit:w.handleSubmit(x),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:w.control,name:"project_id",render:({field:c})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"프로젝트 *"}),(0,b.jsxs)(l.Select,{onValueChange:c.onChange,value:c.value,disabled:!!a,children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"프로젝트를 선택하세요"})})}),(0,b.jsx)(l.SelectContent,{children:t?.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:w.control,name:"title",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"작업 제목 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"예: 데이터베이스 설계",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:w.control,name:"priority",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"우선순위 *"}),(0,b.jsxs)(l.Select,{onValueChange:a.onChange,value:a.value,children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"우선순위 선택"})})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"1",children:"1 - 최고"}),(0,b.jsx)(l.SelectItem,{value:"2",children:"2 - 높음"}),(0,b.jsx)(l.SelectItem,{value:"3",children:"3 - 보통"}),(0,b.jsx)(l.SelectItem,{value:"4",children:"4 - 낮음"}),(0,b.jsx)(l.SelectItem,{value:"5",children:"5 - 최하"})]})]}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:w.control,name:"due_date",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"마감일 (선택)"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{type:"date",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>p(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:s.isPending,children:s.isPending?"생성 중...":"생성"})]})]})}):(0,b.jsxs)("div",{className:"text-center py-4",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:u?"프로젝트를 불러오는 중...":"생성된 프로젝트가 없습니다."}),(0,b.jsx)(f.Button,{onClick:()=>p(!1),children:"확인"})]})]})]})}var t=a.i(50104),u=a.i(70121),v=a.i(97942),w=a.i(7554),x=a.i(11011),y="AlertDialog",[z,A]=(0,t.createContextScope)(y,[v.createDialogScope]),B=(0,v.createDialogScope)(),C=a=>{let{__scopeAlertDialog:c,...d}=a,e=B(c);return(0,b.jsx)(v.Root,{...e,...d,modal:!0})};C.displayName=y,c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=B(d);return(0,b.jsx)(v.Trigger,{...f,...e,ref:c})}).displayName="AlertDialogTrigger";var D=a=>{let{__scopeAlertDialog:c,...d}=a,e=B(c);return(0,b.jsx)(v.Portal,{...e,...d})};D.displayName="AlertDialogPortal";var E=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=B(d);return(0,b.jsx)(v.Overlay,{...f,...e,ref:c})});E.displayName="AlertDialogOverlay";var F="AlertDialogContent",[G,H]=z(F),I=(0,x.createSlottable)("AlertDialogContent"),J=c.forwardRef((a,d)=>{let{__scopeAlertDialog:e,children:f,...g}=a,h=B(e),i=c.useRef(null),j=(0,u.useComposedRefs)(d,i),k=c.useRef(null);return(0,b.jsx)(v.WarningProvider,{contentName:F,titleName:K,docsSlug:"alert-dialog",children:(0,b.jsx)(G,{scope:e,cancelRef:k,children:(0,b.jsxs)(v.Content,{role:"alertdialog",...h,...g,ref:j,onOpenAutoFocus:(0,w.composeEventHandlers)(g.onOpenAutoFocus,a=>{a.preventDefault(),k.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,b.jsx)(I,{children:f}),(0,b.jsx)(R,{contentRef:i})]})})})});J.displayName=F;var K="AlertDialogTitle",L=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=B(d);return(0,b.jsx)(v.Title,{...f,...e,ref:c})});L.displayName=K;var M="AlertDialogDescription",N=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=B(d);return(0,b.jsx)(v.Description,{...f,...e,ref:c})});N.displayName=M;var O=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=B(d);return(0,b.jsx)(v.Close,{...f,...e,ref:c})});O.displayName="AlertDialogAction";var P="AlertDialogCancel",Q=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:f}=H(P,d),g=B(d),h=(0,u.useComposedRefs)(c,f);return(0,b.jsx)(v.Close,{...g,...e,ref:h})});Q.displayName=P;var R=({contentRef:a})=>{let b=`\`${F}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${F}\` by passing a \`${M}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${F}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},S=a.i(68114);function T({...a}){return(0,b.jsx)(C,{"data-slot":"alert-dialog",...a})}function U({...a}){return(0,b.jsx)(D,{"data-slot":"alert-dialog-portal",...a})}function V({className:a,...c}){return(0,b.jsx)(E,{"data-slot":"alert-dialog-overlay",className:(0,S.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...c})}function W({className:a,...c}){return(0,b.jsxs)(U,{children:[(0,b.jsx)(V,{}),(0,b.jsx)(J,{"data-slot":"alert-dialog-content",className:(0,S.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...c})]})}function X({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,S.cn)("flex flex-col gap-2 text-center sm:text-left",a),...c})}function Y({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,S.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...c})}function Z({className:a,...c}){return(0,b.jsx)(L,{"data-slot":"alert-dialog-title",className:(0,S.cn)("text-lg font-semibold",a),...c})}function $({className:a,...c}){return(0,b.jsx)(N,{"data-slot":"alert-dialog-description",className:(0,S.cn)("text-muted-foreground text-sm",a),...c})}function _({className:a,...c}){return(0,b.jsx)(O,{className:(0,S.cn)((0,f.buttonVariants)(),a),...c})}function aa({className:a,...c}){return(0,b.jsx)(Q,{className:(0,S.cn)((0,f.buttonVariants)({variant:"outline"}),a),...c})}var ab=a.i(25152),ac=a.i(30553),ad=a.i(37738),ae=a.i(7827),af=a.i(96743),ag=a.i(86228),ah=a.i(22297),ai=a.i(92843),aj=a.i(4691),ak=a.i(92616),al=a.i(77192),am=a.i(24050),an=a.i(46872),ao=a.i(41852),ap=a.i(52081),aq=["Enter"," "],ar=["ArrowUp","PageDown","End"],as=["ArrowDown","PageUp","Home",...ar],at={ltr:[...aq,"ArrowRight"],rtl:[...aq,"ArrowLeft"]},au={ltr:["ArrowLeft"],rtl:["ArrowRight"]},av="Menu",[aw,ax,ay]=(0,ad.createCollection)(av),[az,aA]=(0,t.createContextScope)(av,[ay,aj.createPopperScope,am.createRovingFocusGroupScope]),aB=(0,aj.createPopperScope)(),aC=(0,am.createRovingFocusGroupScope)(),[aD,aE]=az(av),[aF,aG]=az(av),aH=a=>{let{__scopeMenu:d,open:e=!1,children:f,dir:g,onOpenChange:h,modal:i=!0}=a,j=aB(d),[k,l]=c.useState(null),m=c.useRef(!1),n=(0,an.useCallbackRef)(h),o=(0,ae.useDirection)(g);return c.useEffect(()=>{let a=()=>{m.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>m.current=!1;return document.addEventListener("keydown",a,{capture:!0}),()=>{document.removeEventListener("keydown",a,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),(0,b.jsx)(aj.Root,{...j,children:(0,b.jsx)(aD,{scope:d,open:e,onOpenChange:n,content:k,onContentChange:l,children:(0,b.jsx)(aF,{scope:d,onClose:c.useCallback(()=>n(!1),[n]),isUsingKeyboardRef:m,dir:o,modal:i,children:f})})})};aH.displayName=av;var aI=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a,f=aB(d);return(0,b.jsx)(aj.Anchor,{...f,...e,ref:c})});aI.displayName="MenuAnchor";var aJ="MenuPortal",[aK,aL]=az(aJ,{forceMount:void 0}),aM=a=>{let{__scopeMenu:c,forceMount:d,children:e,container:f}=a,g=aE(aJ,c);return(0,b.jsx)(aK,{scope:c,forceMount:d,children:(0,b.jsx)(al.Presence,{present:d||g.open,children:(0,b.jsx)(ak.Portal,{asChild:!0,container:f,children:e})})})};aM.displayName=aJ;var aN="MenuContent",[aO,aP]=az(aN),aQ=c.forwardRef((a,c)=>{let d=aL(aN,a.__scopeMenu),{forceMount:e=d.forceMount,...f}=a,g=aE(aN,a.__scopeMenu),h=aG(aN,a.__scopeMenu);return(0,b.jsx)(aw.Provider,{scope:a.__scopeMenu,children:(0,b.jsx)(al.Presence,{present:e||g.open,children:(0,b.jsx)(aw.Slot,{scope:a.__scopeMenu,children:h.modal?(0,b.jsx)(aR,{...f,ref:c}):(0,b.jsx)(aS,{...f,ref:c})})})})}),aR=c.forwardRef((a,d)=>{let e=aE(aN,a.__scopeMenu),f=c.useRef(null),g=(0,u.useComposedRefs)(d,f);return c.useEffect(()=>{let a=f.current;if(a)return(0,ao.hideOthers)(a)},[]),(0,b.jsx)(aU,{...a,ref:g,trapFocus:e.open,disableOutsidePointerEvents:e.open,disableOutsideScroll:!0,onFocusOutside:(0,w.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>e.onOpenChange(!1)})}),aS=c.forwardRef((a,c)=>{let d=aE(aN,a.__scopeMenu);return(0,b.jsx)(aU,{...a,ref:c,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>d.onOpenChange(!1)})}),aT=(0,x.createSlot)("MenuContent.ScrollLock"),aU=c.forwardRef((a,d)=>{let{__scopeMenu:e,loop:f=!1,trapFocus:g,onOpenAutoFocus:h,onCloseAutoFocus:i,disableOutsidePointerEvents:j,onEntryFocus:k,onEscapeKeyDown:l,onPointerDownOutside:m,onFocusOutside:n,onInteractOutside:o,onDismiss:p,disableOutsideScroll:q,...r}=a,s=aE(aN,e),t=aG(aN,e),v=aB(e),x=aC(e),y=ax(e),[z,A]=c.useState(null),B=c.useRef(null),C=(0,u.useComposedRefs)(d,B,s.onContentChange),D=c.useRef(0),E=c.useRef(""),F=c.useRef(0),G=c.useRef(null),H=c.useRef("right"),I=c.useRef(0),J=q?ap.RemoveScroll:c.Fragment;c.useEffect(()=>()=>window.clearTimeout(D.current),[]),(0,ag.useFocusGuards)();let K=c.useCallback(a=>H.current===G.current?.side&&function(a,b){return!!b&&function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}({x:a.clientX,y:a.clientY},b)}(a,G.current?.area),[]);return(0,b.jsx)(aO,{scope:e,searchRef:E,onItemEnter:c.useCallback(a=>{K(a)&&a.preventDefault()},[K]),onItemLeave:c.useCallback(a=>{K(a)||(B.current?.focus(),A(null))},[K]),onTriggerLeave:c.useCallback(a=>{K(a)&&a.preventDefault()},[K]),pointerGraceTimerRef:F,onPointerGraceIntentChange:c.useCallback(a=>{G.current=a},[]),children:(0,b.jsx)(J,{...q?{as:aT,allowPinchZoom:!0}:void 0,children:(0,b.jsx)(ah.FocusScope,{asChild:!0,trapped:g,onMountAutoFocus:(0,w.composeEventHandlers)(h,a=>{a.preventDefault(),B.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:(0,b.jsx)(af.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:j,onEscapeKeyDown:l,onPointerDownOutside:m,onFocusOutside:n,onInteractOutside:o,onDismiss:p,children:(0,b.jsx)(am.Root,{asChild:!0,...x,dir:t.dir,orientation:"vertical",loop:f,currentTabStopId:z,onCurrentTabStopIdChange:A,onEntryFocus:(0,w.composeEventHandlers)(k,a=>{t.isUsingKeyboardRef.current||a.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,b.jsx)(aj.Content,{role:"menu","aria-orientation":"vertical","data-state":bi(s.open),"data-radix-menu-content":"",dir:t.dir,...v,...r,ref:C,style:{outline:"none",...r.style},onKeyDown:(0,w.composeEventHandlers)(r.onKeyDown,a=>{let b=a.target.closest("[data-radix-menu-content]")===a.currentTarget,c=a.ctrlKey||a.altKey||a.metaKey,d=1===a.key.length;b&&("Tab"===a.key&&a.preventDefault(),!c&&d&&(a=>{let b=E.current+a,c=y().filter(a=>!a.disabled),d=document.activeElement,e=c.find(a=>a.ref.current===d)?.textValue,f=function(a,b,c){var d;let e=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,f=c?a.indexOf(c):-1,g=(d=Math.max(f,0),a.map((b,c)=>a[(d+c)%a.length]));1===e.length&&(g=g.filter(a=>a!==c));let h=g.find(a=>a.toLowerCase().startsWith(e.toLowerCase()));return h!==c?h:void 0}(c.map(a=>a.textValue),b,e),g=c.find(a=>a.textValue===f)?.ref.current;!function a(b){E.current=b,window.clearTimeout(D.current),""!==b&&(D.current=window.setTimeout(()=>a(""),1e3))}(b),g&&setTimeout(()=>g.focus())})(a.key));let e=B.current;if(a.target!==e||!as.includes(a.key))return;a.preventDefault();let f=y().filter(a=>!a.disabled).map(a=>a.ref.current);ar.includes(a.key)&&f.reverse(),function(a){let b=document.activeElement;for(let c of a)if(c===b||(c.focus(),document.activeElement!==b))return}(f)}),onBlur:(0,w.composeEventHandlers)(a.onBlur,a=>{a.currentTarget.contains(a.target)||(window.clearTimeout(D.current),E.current="")}),onPointerMove:(0,w.composeEventHandlers)(a.onPointerMove,bl(a=>{let b=a.target,c=I.current!==a.clientX;a.currentTarget.contains(b)&&c&&(H.current=a.clientX>I.current?"right":"left",I.current=a.clientX)}))})})})})})})});aQ.displayName=aN;var aV=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a;return(0,b.jsx)(ac.Primitive.div,{role:"group",...e,ref:c})});aV.displayName="MenuGroup";var aW=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a;return(0,b.jsx)(ac.Primitive.div,{...e,ref:c})});aW.displayName="MenuLabel";var aX="MenuItem",aY="menu.itemSelect",aZ=c.forwardRef((a,d)=>{let{disabled:e=!1,onSelect:f,...g}=a,h=c.useRef(null),i=aG(aX,a.__scopeMenu),j=aP(aX,a.__scopeMenu),k=(0,u.useComposedRefs)(d,h),l=c.useRef(!1);return(0,b.jsx)(a$,{...g,ref:k,disabled:e,onClick:(0,w.composeEventHandlers)(a.onClick,()=>{let a=h.current;if(!e&&a){let b=new CustomEvent(aY,{bubbles:!0,cancelable:!0});a.addEventListener(aY,a=>f?.(a),{once:!0}),(0,ac.dispatchDiscreteCustomEvent)(a,b),b.defaultPrevented?l.current=!1:i.onClose()}}),onPointerDown:b=>{a.onPointerDown?.(b),l.current=!0},onPointerUp:(0,w.composeEventHandlers)(a.onPointerUp,a=>{l.current||a.currentTarget?.click()}),onKeyDown:(0,w.composeEventHandlers)(a.onKeyDown,a=>{let b=""!==j.searchRef.current;e||b&&" "===a.key||aq.includes(a.key)&&(a.currentTarget.click(),a.preventDefault())})})});aZ.displayName=aX;var a$=c.forwardRef((a,d)=>{let{__scopeMenu:e,disabled:f=!1,textValue:g,...h}=a,i=aP(aX,e),j=aC(e),k=c.useRef(null),l=(0,u.useComposedRefs)(d,k),[m,n]=c.useState(!1),[o,p]=c.useState("");return c.useEffect(()=>{let a=k.current;a&&p((a.textContent??"").trim())},[h.children]),(0,b.jsx)(aw.ItemSlot,{scope:e,disabled:f,textValue:g??o,children:(0,b.jsx)(am.Item,{asChild:!0,...j,focusable:!f,children:(0,b.jsx)(ac.Primitive.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":f||void 0,"data-disabled":f?"":void 0,...h,ref:l,onPointerMove:(0,w.composeEventHandlers)(a.onPointerMove,bl(a=>{f?i.onItemLeave(a):(i.onItemEnter(a),a.defaultPrevented||a.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,w.composeEventHandlers)(a.onPointerLeave,bl(a=>i.onItemLeave(a))),onFocus:(0,w.composeEventHandlers)(a.onFocus,()=>n(!0)),onBlur:(0,w.composeEventHandlers)(a.onBlur,()=>n(!1))})})})}),a_=c.forwardRef((a,c)=>{let{checked:d=!1,onCheckedChange:e,...f}=a;return(0,b.jsx)(a7,{scope:a.__scopeMenu,checked:d,children:(0,b.jsx)(aZ,{role:"menuitemcheckbox","aria-checked":bj(d)?"mixed":d,...f,ref:c,"data-state":bk(d),onSelect:(0,w.composeEventHandlers)(f.onSelect,()=>e?.(!!bj(d)||!d),{checkForDefaultPrevented:!1})})})});a_.displayName="MenuCheckboxItem";var a0="MenuRadioGroup",[a1,a2]=az(a0,{value:void 0,onValueChange:()=>{}}),a3=c.forwardRef((a,c)=>{let{value:d,onValueChange:e,...f}=a,g=(0,an.useCallbackRef)(e);return(0,b.jsx)(a1,{scope:a.__scopeMenu,value:d,onValueChange:g,children:(0,b.jsx)(aV,{...f,ref:c})})});a3.displayName=a0;var a4="MenuRadioItem",a5=c.forwardRef((a,c)=>{let{value:d,...e}=a,f=a2(a4,a.__scopeMenu),g=d===f.value;return(0,b.jsx)(a7,{scope:a.__scopeMenu,checked:g,children:(0,b.jsx)(aZ,{role:"menuitemradio","aria-checked":g,...e,ref:c,"data-state":bk(g),onSelect:(0,w.composeEventHandlers)(e.onSelect,()=>f.onValueChange?.(d),{checkForDefaultPrevented:!1})})})});a5.displayName=a4;var a6="MenuItemIndicator",[a7,a8]=az(a6,{checked:!1}),a9=c.forwardRef((a,c)=>{let{__scopeMenu:d,forceMount:e,...f}=a,g=a8(a6,d);return(0,b.jsx)(al.Presence,{present:e||bj(g.checked)||!0===g.checked,children:(0,b.jsx)(ac.Primitive.span,{...f,ref:c,"data-state":bk(g.checked)})})});a9.displayName=a6;var ba=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a;return(0,b.jsx)(ac.Primitive.div,{role:"separator","aria-orientation":"horizontal",...e,ref:c})});ba.displayName="MenuSeparator";var bb=c.forwardRef((a,c)=>{let{__scopeMenu:d,...e}=a,f=aB(d);return(0,b.jsx)(aj.Arrow,{...f,...e,ref:c})});bb.displayName="MenuArrow";var[bc,bd]=az("MenuSub"),be="MenuSubTrigger",bf=c.forwardRef((a,d)=>{let e=aE(be,a.__scopeMenu),f=aG(be,a.__scopeMenu),g=bd(be,a.__scopeMenu),h=aP(be,a.__scopeMenu),i=c.useRef(null),{pointerGraceTimerRef:j,onPointerGraceIntentChange:k}=h,l={__scopeMenu:a.__scopeMenu},m=c.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return c.useEffect(()=>m,[m]),c.useEffect(()=>{let a=j.current;return()=>{window.clearTimeout(a),k(null)}},[j,k]),(0,b.jsx)(aI,{asChild:!0,...l,children:(0,b.jsx)(a$,{id:g.triggerId,"aria-haspopup":"menu","aria-expanded":e.open,"aria-controls":g.contentId,"data-state":bi(e.open),...a,ref:(0,u.composeRefs)(d,g.onTriggerChange),onClick:b=>{a.onClick?.(b),a.disabled||b.defaultPrevented||(b.currentTarget.focus(),e.open||e.onOpenChange(!0))},onPointerMove:(0,w.composeEventHandlers)(a.onPointerMove,bl(b=>{h.onItemEnter(b),!b.defaultPrevented&&(a.disabled||e.open||i.current||(h.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{e.onOpenChange(!0),m()},100)))})),onPointerLeave:(0,w.composeEventHandlers)(a.onPointerLeave,bl(a=>{m();let b=e.content?.getBoundingClientRect();if(b){let c=e.content?.dataset.side,d="right"===c,f=b[d?"left":"right"],g=b[d?"right":"left"];h.onPointerGraceIntentChange({area:[{x:a.clientX+(d?-5:5),y:a.clientY},{x:f,y:b.top},{x:g,y:b.top},{x:g,y:b.bottom},{x:f,y:b.bottom}],side:c}),window.clearTimeout(j.current),j.current=window.setTimeout(()=>h.onPointerGraceIntentChange(null),300)}else{if(h.onTriggerLeave(a),a.defaultPrevented)return;h.onPointerGraceIntentChange(null)}})),onKeyDown:(0,w.composeEventHandlers)(a.onKeyDown,b=>{let c=""!==h.searchRef.current;a.disabled||c&&" "===b.key||at[f.dir].includes(b.key)&&(e.onOpenChange(!0),e.content?.focus(),b.preventDefault())})})})});bf.displayName=be;var bg="MenuSubContent",bh=c.forwardRef((a,d)=>{let e=aL(aN,a.__scopeMenu),{forceMount:f=e.forceMount,...g}=a,h=aE(aN,a.__scopeMenu),i=aG(aN,a.__scopeMenu),j=bd(bg,a.__scopeMenu),k=c.useRef(null),l=(0,u.useComposedRefs)(d,k);return(0,b.jsx)(aw.Provider,{scope:a.__scopeMenu,children:(0,b.jsx)(al.Presence,{present:f||h.open,children:(0,b.jsx)(aw.Slot,{scope:a.__scopeMenu,children:(0,b.jsx)(aU,{id:j.contentId,"aria-labelledby":j.triggerId,...g,ref:l,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:a=>{i.isUsingKeyboardRef.current&&k.current?.focus(),a.preventDefault()},onCloseAutoFocus:a=>a.preventDefault(),onFocusOutside:(0,w.composeEventHandlers)(a.onFocusOutside,a=>{a.target!==j.trigger&&h.onOpenChange(!1)}),onEscapeKeyDown:(0,w.composeEventHandlers)(a.onEscapeKeyDown,a=>{i.onClose(),a.preventDefault()}),onKeyDown:(0,w.composeEventHandlers)(a.onKeyDown,a=>{let b=a.currentTarget.contains(a.target),c=au[i.dir].includes(a.key);b&&c&&(h.onOpenChange(!1),j.trigger?.focus(),a.preventDefault())})})})})})});function bi(a){return a?"open":"closed"}function bj(a){return"indeterminate"===a}function bk(a){return bj(a)?"indeterminate":a?"checked":"unchecked"}function bl(a){return b=>"mouse"===b.pointerType?a(b):void 0}bh.displayName=bg;var bm="DropdownMenu",[bn,bo]=(0,t.createContextScope)(bm,[aA]),bp=aA(),[bq,br]=bn(bm),bs=a=>{let{__scopeDropdownMenu:d,children:e,dir:f,open:g,defaultOpen:h,onOpenChange:i,modal:j=!0}=a,k=bp(d),l=c.useRef(null),[m,n]=(0,ab.useControllableState)({prop:g,defaultProp:h??!1,onChange:i,caller:bm});return(0,b.jsx)(bq,{scope:d,triggerId:(0,ai.useId)(),triggerRef:l,contentId:(0,ai.useId)(),open:m,onOpenChange:n,onOpenToggle:c.useCallback(()=>n(a=>!a),[n]),modal:j,children:(0,b.jsx)(aH,{...k,open:m,onOpenChange:n,dir:f,modal:j,children:e})})};bs.displayName=bm;var bt="DropdownMenuTrigger",bu=c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,disabled:e=!1,...f}=a,g=br(bt,d),h=bp(d);return(0,b.jsx)(aI,{asChild:!0,...h,children:(0,b.jsx)(ac.Primitive.button,{type:"button",id:g.triggerId,"aria-haspopup":"menu","aria-expanded":g.open,"aria-controls":g.open?g.contentId:void 0,"data-state":g.open?"open":"closed","data-disabled":e?"":void 0,disabled:e,...f,ref:(0,u.composeRefs)(c,g.triggerRef),onPointerDown:(0,w.composeEventHandlers)(a.onPointerDown,a=>{!e&&0===a.button&&!1===a.ctrlKey&&(g.onOpenToggle(),g.open||a.preventDefault())}),onKeyDown:(0,w.composeEventHandlers)(a.onKeyDown,a=>{!e&&(["Enter"," "].includes(a.key)&&g.onOpenToggle(),"ArrowDown"===a.key&&g.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});bu.displayName=bt;var bv=a=>{let{__scopeDropdownMenu:c,...d}=a,e=bp(c);return(0,b.jsx)(aM,{...e,...d})};bv.displayName="DropdownMenuPortal";var bw="DropdownMenuContent",bx=c.forwardRef((a,d)=>{let{__scopeDropdownMenu:e,...f}=a,g=br(bw,e),h=bp(e),i=c.useRef(!1);return(0,b.jsx)(aQ,{id:g.contentId,"aria-labelledby":g.triggerId,...h,...f,ref:d,onCloseAutoFocus:(0,w.composeEventHandlers)(a.onCloseAutoFocus,a=>{i.current||g.triggerRef.current?.focus(),i.current=!1,a.preventDefault()}),onInteractOutside:(0,w.composeEventHandlers)(a.onInteractOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey,d=2===b.button||c;(!g.modal||d)&&(i.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bx.displayName=bw,c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(aV,{...f,...e,ref:c})}).displayName="DropdownMenuGroup",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(aW,{...f,...e,ref:c})}).displayName="DropdownMenuLabel";var by=c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(aZ,{...f,...e,ref:c})});by.displayName="DropdownMenuItem",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(a_,{...f,...e,ref:c})}).displayName="DropdownMenuCheckboxItem",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(a3,{...f,...e,ref:c})}).displayName="DropdownMenuRadioGroup",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(a5,{...f,...e,ref:c})}).displayName="DropdownMenuRadioItem",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(a9,{...f,...e,ref:c})}).displayName="DropdownMenuItemIndicator",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(ba,{...f,...e,ref:c})}).displayName="DropdownMenuSeparator",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(bb,{...f,...e,ref:c})}).displayName="DropdownMenuArrow",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(bf,{...f,...e,ref:c})}).displayName="DropdownMenuSubTrigger",c.forwardRef((a,c)=>{let{__scopeDropdownMenu:d,...e}=a,f=bp(d);return(0,b.jsx)(bh,{...f,...e,ref:c,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})}).displayName="DropdownMenuSubContent",a.i(6406);var bz=a.i(70106);function bA({...a}){return(0,b.jsx)(bs,{"data-slot":"dropdown-menu",...a})}function bB({...a}){return(0,b.jsx)(bu,{"data-slot":"dropdown-menu-trigger",...a})}function bC({className:a,sideOffset:c=4,...d}){return(0,b.jsx)(bv,{children:(0,b.jsx)(bx,{"data-slot":"dropdown-menu-content",sideOffset:c,className:(0,S.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...d})})}function bD({className:a,inset:c,variant:d="default",...e}){return(0,b.jsx)(by,{"data-slot":"dropdown-menu-item","data-inset":c,"data-variant":d,className:(0,S.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...e})}(0,bz.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),(0,bz.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);let bE=(0,bz.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);var bF=a.i(24569),bG=a.i(81560);let bH=p.object({name:p.string().min(1,"프로젝트 이름을 입력해주세요"),description:p.string().optional()});function bI({project:a}){let[e,h]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),p=(0,d.useRouter)(),r=(0,g.useUpdateProject)(),s=(0,g.useDeleteProject)(),t=(0,n.useForm)({resolver:(0,o.zodResolver)(bH),defaultValues:{name:a.name,description:a.description||""}}),u=async b=>{try{await r.mutateAsync({id:a.id,data:{name:b.name,description:b.description||void 0}}),q.toast.success("프로젝트가 수정되었습니다!"),h(!1)}catch(a){q.toast.error("프로젝트 수정에 실패했습니다."),console.error("Error updating project:",a)}},v=async()=>{try{await s.mutateAsync(a.id),q.toast.success("프로젝트가 삭제되었습니다!"),m(!1),p.push("/projects")}catch(a){q.toast.error("프로젝트 삭제에 실패했습니다."),console.error("Error deleting project:",a)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(bA,{children:[(0,b.jsx)(bB,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"outline",size:"icon",children:(0,b.jsx)(bE,{className:"h-4 w-4"})})}),(0,b.jsxs)(bC,{align:"end",children:[(0,b.jsxs)(bD,{onClick:()=>h(!0),children:[(0,b.jsx)(bF.Edit,{className:"mr-2 h-4 w-4"}),"프로젝트 수정"]}),(0,b.jsxs)(bD,{onClick:()=>m(!0),className:"text-red-600",children:[(0,b.jsx)(bG.Trash2,{className:"mr-2 h-4 w-4"}),"프로젝트 삭제"]})]})]}),(0,b.jsx)(i.Dialog,{open:e,onOpenChange:h,children:(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[425px]",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"프로젝트 수정"}),(0,b.jsx)(i.DialogDescription,{children:"프로젝트 정보를 수정합니다."})]}),(0,b.jsx)(j.Form,{...t,children:(0,b.jsxs)("form",{onSubmit:t.handleSubmit(u),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:t.control,name:"name",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"프로젝트 이름 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"프로젝트 이름",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:t.control,name:"description",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"설명 (선택)"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"프로젝트 설명",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>h(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:r.isPending,children:r.isPending?"수정 중...":"수정"})]})]})})]})}),(0,b.jsx)(T,{open:l,onOpenChange:m,children:(0,b.jsxs)(W,{children:[(0,b.jsxs)(X,{children:[(0,b.jsx)(Z,{children:"프로젝트 삭제"}),(0,b.jsxs)($,{children:["정말로 ",(0,b.jsxs)("strong",{children:['"',a.name,'"']})," 프로젝트를 삭제하시겠습니까?",(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-red-600 font-medium",children:"이 작업은 되돌릴 수 없으며, 프로젝트와 관련된 모든 작업도 함께 삭제됩니다."})]})]}),(0,b.jsxs)(Y,{children:[(0,b.jsx)(aa,{children:"취소"}),(0,b.jsx)(_,{onClick:v,disabled:s.isPending,className:"bg-red-600 hover:bg-red-700",children:s.isPending?"삭제 중...":"삭제"})]})]})})]})}var bJ=a.i(86304),bK=a.i(35785),bL=a.i(41710),bM=a.i(92e3),bN=a.i(16201),bO=a.i(8549),bP=a.i(33508),bQ=a.i(56711),bR=a.i(60178),bS=a.i(79608),bT=a.i(33217),bU=a.i(70162),bV=a.i(41208),bW=a.i(87097),bX=a.i(56143),bY=a.i(29246),bZ=a.i(4720),b$=a.i(70025),b_=a.i(37927);let b0=p.object({purpose:p.string().min(1,"목적을 입력해주세요"),success_criteria:p.string().min(1,"성공 기준을 입력해주세요"),constraints:p.string().min(1,"제약사항을 입력해주세요"),priority:p.string().min(1,"우선순위를 입력해주세요"),validation:p.string().min(1,"검증 방법을 입력해주세요")});function b1({taskId:a,triggerText:d="5SB 작성"}){let[e,g]=(0,c.useState)(!1),h=(0,b_.useQueryClient)(),k=(0,n.useForm)({resolver:(0,o.zodResolver)(b0),defaultValues:{purpose:"",success_criteria:"",constraints:"",priority:"",validation:""}}),l=(0,b$.useMutation)({mutationFn:bU.createBrief,onSuccess:b=>{if(null===b)return void q.toast.error("5문장 브리프 생성에 실패했습니다. (이미 존재하거나 서버 오류)");q.toast.success("5문장 브리프가 생성되었습니다!"),h.invalidateQueries({queryKey:["brief",a]}),h.invalidateQueries({queryKey:["dashboard","kpi"]}),h.invalidateQueries({queryKey:["all-briefs"]}),k.reset(),g(!1)},onError:a=>{q.toast.error("브리프 생성 중 오류가 발생했습니다."),console.error("Error creating brief:",a)}}),m=async b=>{let c={task_id:a,...b};l.mutate(c)};return(0,b.jsxs)(i.Dialog,{open:e,onOpenChange:g,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(bZ.FileText,{className:"mr-2 h-4 w-4"}),d]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"5문장 브리프 (5SB) 작성"}),(0,b.jsx)(i.DialogDescription,{children:"작업의 핵심 내용을 5문장으로 요약합니다. 각 항목을 명확하게 작성해주세요."})]}),(0,b.jsx)(j.Form,{...k,children:(0,b.jsxs)("form",{onSubmit:k.handleSubmit(m),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:k.control,name:"purpose",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"1. 목적 (Purpose) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"이 작업의 목적과 배경을 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:k.control,name:"success_criteria",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"2. 성공 기준 (Success Criteria) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"어떤 상태가 되면 성공한 것인지 구체적으로 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:k.control,name:"constraints",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"3. 제약사항 (Constraints) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"시간, 자원, 기술적 제약사항을 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:k.control,name:"priority",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"4. 우선순위 (Priority) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"왜 이 작업이 중요한지, 다른 작업과의 우선순위를 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:k.control,name:"validation",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"5. 검증 방법 (Validation) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"결과물을 어떻게 검증하고 확인할 것인지 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>g(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:l.isPending,children:l.isPending?"생성 중...":"생성"})]})]})})]})]})}let b2=p.object({purpose:p.string().min(1,"목적을 입력해주세요"),success_criteria:p.string().min(1,"성공 기준을 입력해주세요"),constraints:p.string().min(1,"제약사항을 입력해주세요"),priority:p.string().min(1,"우선순위를 입력해주세요"),validation:p.string().min(1,"검증 방법을 입력해주세요")});function b3({taskId:a,triggerText:d="5SB 수정"}){let[e,g]=(0,c.useState)(!1),h=(0,b_.useQueryClient)(),{data:k,isLoading:l}=(0,bT.useQuery)({queryKey:["brief",a],queryFn:()=>(0,bU.getBriefByTask)(a),enabled:e}),m=(0,n.useForm)({resolver:(0,o.zodResolver)(b2),defaultValues:{purpose:"",success_criteria:"",constraints:"",priority:"",validation:""}});(0,c.useEffect)(()=>{k&&m.reset({purpose:k.purpose,success_criteria:k.success_criteria,constraints:k.constraints,priority:k.priority,validation:k.validation})},[k,m]);let p=(0,b$.useMutation)({mutationFn:({id:a,data:b})=>(0,bU.updateBrief)(a,b),onSuccess:()=>{q.toast.success("5문장 브리프가 수정되었습니다!"),h.invalidateQueries({queryKey:["brief",a]}),h.invalidateQueries({queryKey:["dashboard","kpi"]}),h.invalidateQueries({queryKey:["all-briefs"]}),g(!1)},onError:a=>{let b=a?.response?.data?.detail||"브리프 수정에 실패했습니다.";q.toast.error(b),console.error("Error updating brief:",a)}}),r=(0,b$.useMutation)({mutationFn:bU.deleteBrief,onSuccess:()=>{q.toast.success("5문장 브리프가 삭제되었습니다!"),h.invalidateQueries({queryKey:["brief",a]}),h.invalidateQueries({queryKey:["dashboard","kpi"]}),h.invalidateQueries({queryKey:["all-briefs"]}),g(!1)},onError:a=>{let b=a?.response?.data?.detail||"브리프 삭제에 실패했습니다.";q.toast.error(b),console.error("Error deleting brief:",a)}}),s=async a=>{k&&p.mutate({id:k.id,data:a})};return(0,b.jsxs)(i.Dialog,{open:e,onOpenChange:g,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(bF.Edit,{className:"mr-2 h-4 w-4"}),d]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[600px]",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"5문장 브리프 (5SB) 수정"}),(0,b.jsx)(i.DialogDescription,{children:"작업의 핵심 내용을 5문장으로 요약합니다. 각 항목을 명확하게 작성해주세요."})]}),l?(0,b.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-primary border-t-transparent"}),(0,b.jsx)("span",{className:"ml-2",children:"브리프를 불러오는 중..."})]}):(0,b.jsx)(j.Form,{...m,children:(0,b.jsxs)("form",{onSubmit:m.handleSubmit(s),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:m.control,name:"purpose",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"1. 목적 (Purpose) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"이 작업의 목적과 배경을 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:m.control,name:"success_criteria",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"2. 성공 기준 (Success Criteria) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"어떤 상태가 되면 성공한 것인지 구체적으로 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:m.control,name:"constraints",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"3. 제약사항 (Constraints) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"시간, 자원, 기술적 제약사항을 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:m.control,name:"priority",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"4. 우선순위 (Priority) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"왜 이 작업이 중요한지, 다른 작업과의 우선순위를 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:m.control,name:"validation",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"5. 검증 방법 (Validation) *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"결과물을 어떻게 검증하고 확인할 것인지 설명하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"destructive",onClick:()=>{k&&window.confirm("정말로 5문장 브리프를 삭제하시겠습니까?")&&r.mutate(k.id)},disabled:r.isPending,children:r.isPending?"삭제 중...":"삭제"}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>g(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:p.isPending,children:p.isPending?"수정 중...":"수정"})]})]})]})})]})]})}var b4=a.i(50429);let b5=p.object({deliverable_formats:p.string().min(1,"결과물 형식을 입력해주세요"),mandatory_checks:p.array(p.object({value:p.string().min(1,"체크 항목을 입력해주세요")})).min(1,"최소 1개의 체크 항목이 필요합니다"),quality_bar:p.string().min(1,"품질 기준을 입력해주세요"),verification:p.string().min(1,"검증 방법을 입력해주세요"),deadline:p.string().optional(),version_tag:p.string().min(1,"버전 태그를 입력해주세요")});function b6({taskId:a,triggerText:d="DoD 작성"}){let[e,g]=(0,c.useState)(!1),h=(0,b_.useQueryClient)(),l=(0,n.useForm)({resolver:(0,o.zodResolver)(b5),defaultValues:{deliverable_formats:"",mandatory_checks:[{value:""}],quality_bar:"",verification:"",deadline:"",version_tag:"v0.1"}}),{fields:p,append:r,remove:s}=(0,n.useFieldArray)({control:l.control,name:"mandatory_checks"}),t=(0,b$.useMutation)({mutationFn:bV.createDoD,onSuccess:b=>{if(null===b)return void q.toast.error("DoD 생성에 실패했습니다. (이미 존재하거나 서버 오류)");q.toast.success("DoD가 생성되었습니다!"),h.invalidateQueries({queryKey:["dod",a]}),h.invalidateQueries({queryKey:["dashboard","kpi"]}),h.invalidateQueries({queryKey:["all-dods"]}),h.invalidateQueries({queryKey:["tasks"]}),l.reset(),g(!1)},onError:a=>{q.toast.error("DoD 생성 중 오류가 발생했습니다."),console.error("Error creating DoD:",a)}}),u=async b=>{let c={task_id:a,deliverable_formats:b.deliverable_formats,mandatory_checks:b.mandatory_checks.map(a=>a.value).filter(a=>""!==a.trim()),quality_bar:b.quality_bar,verification:b.verification,deadline:b.deadline||void 0,version_tag:b.version_tag};t.mutate(c)};return(0,b.jsxs)(i.Dialog,{open:e,onOpenChange:g,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(b4.Target,{className:"mr-2 h-4 w-4"}),d]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"DoD (Definition of Done) 작성"}),(0,b.jsx)(i.DialogDescription,{children:"작업 완료를 위한 명확한 기준과 체크리스트를 정의합니다."})]}),(0,b.jsx)(j.Form,{...l,children:(0,b.jsxs)("form",{onSubmit:l.handleSubmit(u),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:l.control,name:"deliverable_formats",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"결과물 형식 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"예: MD, PDF, PPTX, Code Repository",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.FormLabel,{children:"필수 체크 항목 *"}),(0,b.jsxs)("div",{className:"space-y-2 mt-2",children:[p.map((a,c)=>(0,b.jsx)(j.FormField,{control:l.control,name:`mandatory_checks.${c}.value`,render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:`체크 항목 ${c+1}`,...a})}),p.length>1&&(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>s(c),children:(0,b.jsx)(bP.X,{className:"h-4 w-4"})})]}),(0,b.jsx)(j.FormMessage,{})]})},a.id)),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>r({value:""}),className:"w-full",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"체크 항목 추가"]})]})]}),(0,b.jsx)(j.FormField,{control:l.control,name:"quality_bar",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"품질 기준 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"예: 오타율 0%, 최소 2명 리뷰 완료, 모든 테스트 통과",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:l.control,name:"verification",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"검증 방법 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"예: 10% 샘플링 검토, 동료 리뷰, 자동 테스트",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(j.FormField,{control:l.control,name:"deadline",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"마감일"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{type:"date",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:l.control,name:"version_tag",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"버전 태그 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"v0.1",...a})}),(0,b.jsx)(j.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>g(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:t.isPending,children:t.isPending?"생성 중...":"생성"})]})]})})]})]})}let b7=p.object({deliverable_formats:p.string().min(1,"결과물 형식을 입력해주세요"),mandatory_checks:p.array(p.object({value:p.string().min(1,"체크 항목을 입력해주세요")})).min(1,"최소 1개의 체크 항목이 필요합니다"),quality_bar:p.string().min(1,"품질 기준을 입력해주세요"),verification:p.string().min(1,"검증 방법을 입력해주세요"),deadline:p.string().optional(),version_tag:p.string().min(1,"버전 태그를 입력해주세요")});function b8({taskId:a,triggerText:d="DoD 수정"}){let[e,g]=(0,c.useState)(!1),h=(0,b_.useQueryClient)(),{data:l,isLoading:p}=(0,bT.useQuery)({queryKey:["dod",a],queryFn:()=>(0,bV.getDoDByTask)(a),enabled:e}),r=(0,n.useForm)({resolver:(0,o.zodResolver)(b7),defaultValues:{deliverable_formats:"",mandatory_checks:[{value:""}],quality_bar:"",verification:"",deadline:"",version_tag:"v0.1"}}),{fields:s,append:t,remove:u,replace:v}=(0,n.useFieldArray)({control:r.control,name:"mandatory_checks"});(0,c.useEffect)(()=>{l&&(r.reset({deliverable_formats:l.deliverable_formats,mandatory_checks:l.mandatory_checks.length>0?l.mandatory_checks.map(a=>({value:a})):[{value:""}],quality_bar:l.quality_bar,verification:l.verification,deadline:l.deadline||"",version_tag:l.version_tag}),v(l.mandatory_checks.length>0?l.mandatory_checks.map(a=>({value:a})):[{value:""}]))},[l,r,v]);let w=(0,b$.useMutation)({mutationFn:({id:a,data:b})=>(0,bV.updateDoD)(a,b),onSuccess:()=>{q.toast.success("DoD가 수정되었습니다!"),h.invalidateQueries({queryKey:["dod",a]}),h.invalidateQueries({queryKey:["dashboard","kpi"]}),h.invalidateQueries({queryKey:["all-dods"]}),g(!1)},onError:a=>{let b=a?.response?.data?.detail||"DoD 수정에 실패했습니다.";q.toast.error(b),console.error("Error updating DoD:",a)}}),x=(0,b$.useMutation)({mutationFn:bV.deleteDoD,onSuccess:()=>{q.toast.success("DoD가 삭제되었습니다!"),h.invalidateQueries({queryKey:["dod",a]}),h.invalidateQueries({queryKey:["dashboard","kpi"]}),h.invalidateQueries({queryKey:["all-dods"]}),h.invalidateQueries({queryKey:["tasks"]}),g(!1)},onError:a=>{let b=a?.response?.data?.detail||"DoD 삭제에 실패했습니다.";q.toast.error(b),console.error("Error deleting DoD:",a)}}),y=async a=>{if(!l)return;let b={deliverable_formats:a.deliverable_formats,mandatory_checks:a.mandatory_checks.map(a=>a.value).filter(a=>""!==a.trim()),quality_bar:a.quality_bar,verification:a.verification,deadline:a.deadline||void 0,version_tag:a.version_tag};w.mutate({id:l.id,data:b})};return(0,b.jsxs)(i.Dialog,{open:e,onOpenChange:g,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(bF.Edit,{className:"mr-2 h-4 w-4"}),d]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"DoD (Definition of Done) 수정"}),(0,b.jsx)(i.DialogDescription,{children:"작업 완료를 위한 명확한 기준과 체크리스트를 수정합니다."})]}),p?(0,b.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-primary border-t-transparent"}),(0,b.jsx)("span",{className:"ml-2",children:"DoD를 불러오는 중..."})]}):(0,b.jsx)(j.Form,{...r,children:(0,b.jsxs)("form",{onSubmit:r.handleSubmit(y),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:r.control,name:"deliverable_formats",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"결과물 형식 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"예: MD, PDF, PPTX, Code Repository",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.FormLabel,{children:"필수 체크 항목 *"}),(0,b.jsxs)("div",{className:"space-y-2 mt-2",children:[s.map((a,c)=>(0,b.jsx)(j.FormField,{control:r.control,name:`mandatory_checks.${c}.value`,render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:`체크 항목 ${c+1}`,...a})}),s.length>1&&(0,b.jsx)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>u(c),children:(0,b.jsx)(bP.X,{className:"h-4 w-4"})})]}),(0,b.jsx)(j.FormMessage,{})]})},a.id)),(0,b.jsxs)(f.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>t({value:""}),className:"w-full",children:[(0,b.jsx)(m.Plus,{className:"mr-2 h-4 w-4"}),"체크 항목 추가"]})]})]}),(0,b.jsx)(j.FormField,{control:r.control,name:"quality_bar",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"품질 기준 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"예: 오타율 0%, 최소 2명 리뷰 완료, 모든 테스트 통과",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:r.control,name:"verification",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"검증 방법 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"예: 10% 샘플링 검토, 동료 리뷰, 자동 테스트",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(j.FormField,{control:r.control,name:"deadline",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"마감일"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{type:"date",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:r.control,name:"version_tag",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"버전 태그 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{placeholder:"v0.1",...a})}),(0,b.jsx)(j.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"destructive",onClick:()=>{l&&window.confirm("정말로 DoD를 삭제하시겠습니까?")&&x.mutate(l.id)},disabled:x.isPending,children:x.isPending?"삭제 중...":"삭제"}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>g(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:w.isPending,children:w.isPending?"수정 중...":"수정"})]})]})]})})]})]})}var b9=a.i(63588);let ca=p.object({date:p.string().min(1,"날짜를 선택해주세요"),problem:p.string().min(1,"문제 상황을 입력해주세요"),options:p.string().min(1,"검토한 옵션들을 입력해주세요"),decision_reason:p.string().min(1,"결정 이유를 입력해주세요"),assumptions_risks:p.string().min(1,"가정사항과 리스크를 입력해주세요")});function cb({taskId:a,triggerText:d="의사결정 추가"}){let[e,g]=(0,c.useState)(!1),h=(0,b_.useQueryClient)(),l=(0,n.useForm)({resolver:(0,o.zodResolver)(ca),defaultValues:{date:(0,bQ.format)(new Date,"yyyy-MM-dd"),problem:"",options:"",decision_reason:"",assumptions_risks:""}}),m=(0,b$.useMutation)({mutationFn:bW.createDecision,onSuccess:b=>{if(null===b)return void q.toast.error("의사결정 생성에 실패했습니다.");q.toast.success("의사결정이 생성되었습니다!"),h.invalidateQueries({queryKey:["decisions",a]}),h.invalidateQueries({queryKey:["all-decisions"]}),l.reset({date:(0,bQ.format)(new Date,"yyyy-MM-dd"),problem:"",options:"",decision_reason:"",assumptions_risks:""}),g(!1)},onError:a=>{q.toast.error("의사결정 생성 중 오류가 발생했습니다."),console.error("Error creating decision:",a)}}),p=async b=>{let c={task_id:a,date:b.date,problem:b.problem,options:b.options,decision_reason:b.decision_reason,assumptions_risks:b.assumptions_risks};m.mutate(c)};return(0,b.jsxs)(i.Dialog,{open:e,onOpenChange:g,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(b9.MessageSquare,{className:"mr-2 h-4 w-4"}),d]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"의사결정 로그 추가"}),(0,b.jsx)(i.DialogDescription,{children:"중요한 의사결정 과정과 결과를 기록합니다. 7일 후 리뷰를 위해 상세히 작성해주세요."})]}),(0,b.jsx)(j.Form,{...l,children:(0,b.jsxs)("form",{onSubmit:l.handleSubmit(p),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:l.control,name:"date",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"결정 날짜 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(k.Input,{type:"date",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:l.control,name:"problem",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"문제 상황 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"어떤 문제나 상황에 대해 결정이 필요했나요?",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:l.control,name:"options",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"검토한 옵션들 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"어떤 선택지들을 고려했나요? 각각의 장단점을 포함해서 설명해주세요.",className:"min-h-[100px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:l.control,name:"decision_reason",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"결정 이유 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"왜 이 선택을 했나요? 결정의 근거와 이유를 설명해주세요.",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:l.control,name:"assumptions_risks",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"가정사항 & 리스크 *"}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:"이 결정에 포함된 가정사항들과 예상되는 리스크는 무엇인가요?",className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>g(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:m.isPending,children:m.isPending?"추가 중...":"추가"})]})]})})]})]})}var cc=a.i(60246),cd=a.i(38602);let ce=p.object({review_type:p.nativeEnum(cd.ReviewType,{message:"리뷰 타입을 선택해주세요"}),positives:p.string().min(1,"긍정적인 점을 입력해주세요"),negatives:p.string().min(1,"부정적인 점을 입력해주세요"),changes_next:p.string().min(1,"다음에 바꿀 점을 입력해주세요")}),cf={[cd.ReviewType.PREMORTEM]:{label:"사전 검토 (Premortem)",description:"프로젝트 시작 전 위험 요소와 개선점 분석",positiveLabel:"예상되는 장점",positivePlaceholder:"이 작업/프로젝트의 예상되는 장점과 성공 요소는 무엇인가요?",negativeLabel:"예상되는 위험",negativePlaceholder:"어떤 위험 요소나 실패 가능성이 있나요?",changesLabel:"사전 준비사항",changesPlaceholder:"위험을 줄이고 성공 확률을 높이기 위해 미리 준비할 것은 무엇인가요?"},[cd.ReviewType.MIDMORTEM]:{label:"중간 검토 (Midmortem)",description:"프로젝트 진행 중 현황 점검과 조정",positiveLabel:"잘 되고 있는 점",positivePlaceholder:"현재까지 잘 진행되고 있는 부분은 무엇인가요?",negativeLabel:"문제점",negativePlaceholder:"현재 겪고 있는 문제나 우려사항은 무엇인가요?",changesLabel:"조정할 점",changesPlaceholder:"남은 기간 동안 어떤 것을 조정하거나 개선해야 하나요?"},[cd.ReviewType.RETRO]:{label:"회고 (Retrospective)",description:"프로젝트 완료 후 결과 분석과 학습",positiveLabel:"잘했던 점",positivePlaceholder:"이번 작업에서 잘했던 점과 성공 요소는 무엇인가요?",negativeLabel:"아쉬웠던 점",negativePlaceholder:"아쉽거나 개선이 필요했던 점은 무엇인가요?",changesLabel:"다음에 바꿀 점",changesPlaceholder:"다음 비슷한 작업에서는 어떤 것을 다르게 해야 할까요?"}};function cg({taskId:a,triggerText:d="리뷰 추가"}){let[e,g]=(0,c.useState)(!1),h=(0,b_.useQueryClient)(),k=(0,n.useForm)({resolver:(0,o.zodResolver)(ce),defaultValues:{review_type:void 0,positives:"",negatives:"",changes_next:""}}),m=k.watch("review_type"),p=m?cf[m]:null,r=(0,b$.useMutation)({mutationFn:bX.createReview,onSuccess:b=>{if(null===b)return void q.toast.error("리뷰 생성에 실패했습니다.");q.toast.success("리뷰가 생성되었습니다!"),h.invalidateQueries({queryKey:["reviews",a]}),h.invalidateQueries({queryKey:["all-reviews"]}),k.reset({review_type:void 0,positives:"",negatives:"",changes_next:""}),g(!1)},onError:a=>{q.toast.error("리뷰 생성 중 오류가 발생했습니다."),console.error("Error creating review:",a)}}),s=async b=>{let c={task_id:a,review_type:b.review_type,positives:b.positives,negatives:b.negatives,changes_next:b.changes_next};r.mutate(c)};return(0,b.jsxs)(i.Dialog,{open:e,onOpenChange:g,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",children:[(0,b.jsx)(cc.Users,{className:"mr-2 h-4 w-4"}),d]})}),(0,b.jsxs)(i.DialogContent,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsx)(i.DialogTitle,{children:"리뷰 추가"}),(0,b.jsx)(i.DialogDescription,{children:"체계적인 리뷰를 통해 작업의 품질과 학습을 개선합니다."})]}),(0,b.jsx)(j.Form,{...k,children:(0,b.jsxs)("form",{onSubmit:k.handleSubmit(s),className:"space-y-4",children:[(0,b.jsx)(j.FormField,{control:k.control,name:"review_type",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsx)(j.FormLabel,{children:"리뷰 타입 *"}),(0,b.jsxs)(l.Select,{onValueChange:a.onChange,defaultValue:a.value,children:[(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(l.SelectTrigger,{children:(0,b.jsx)(l.SelectValue,{placeholder:"리뷰 타입을 선택해주세요"})})}),(0,b.jsx)(l.SelectContent,{children:Object.entries(cf).map(([a,c])=>(0,b.jsx)(l.SelectItem,{value:a,children:c.label},a))})]}),p&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:p.description}),(0,b.jsx)(j.FormMessage,{})]})}),p&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.FormField,{control:k.control,name:"positives",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsxs)(j.FormLabel,{children:[p.positiveLabel," *"]}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:p.positivePlaceholder,className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:k.control,name:"negatives",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsxs)(j.FormLabel,{children:[p.negativeLabel," *"]}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:p.negativePlaceholder,className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})}),(0,b.jsx)(j.FormField,{control:k.control,name:"changes_next",render:({field:a})=>(0,b.jsxs)(j.FormItem,{children:[(0,b.jsxs)(j.FormLabel,{children:[p.changesLabel," *"]}),(0,b.jsx)(j.FormControl,{children:(0,b.jsx)(bY.Textarea,{placeholder:p.changesPlaceholder,className:"min-h-[80px]",...a})}),(0,b.jsx)(j.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>g(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:r.isPending,children:r.isPending?"추가 중...":"추가"})]})]})})]})]})}function ch(a,b="yyyy-MM-dd",c="—"){let d=function(a){if(!a)return null;try{let b="string"==typeof a?(0,bR.parseISO)(a):a;return(0,bS.isValid)(b)?b:null}catch{return null}}(a);return d?(0,bQ.format)(d,b):c}let ci={[bK.TaskState.BACKLOG]:{label:"대기",icon:bL.Clock,variant:"secondary"},[bK.TaskState.IN_PROGRESS]:{label:"진행중",icon:bM.AlertCircle,variant:"default"},[bK.TaskState.DONE]:{label:"완료",icon:bN.CheckCircle,variant:"secondary"},[bK.TaskState.PAUSED]:{label:"중단",icon:bO.Pause,variant:"outline"},[bK.TaskState.CANCELED]:{label:"취소",icon:bP.X,variant:"destructive"}};function cj({task:a,onStateChange:c,isUpdating:d}){let g=ci[a.state],h=g.icon,{data:i}=(0,bT.useQuery)({queryKey:["brief",a.id],queryFn:()=>(0,bU.getBriefByTask)(a.id),retry:!1}),{data:j}=(0,bT.useQuery)({queryKey:["dod",a.id],queryFn:()=>(0,bV.getDoDByTask)(a.id),retry:!1}),{data:k}=(0,bT.useQuery)({queryKey:["decisions",a.id],queryFn:()=>(0,bW.getDecisionsByTask)(a.id),retry:!1}),{data:l}=(0,bT.useQuery)({queryKey:["reviews",a.id],queryFn:()=>(0,bX.getReviewsByTask)(a.id),retry:!1}),m=!!i,n=!!j,o=k&&k.length>0,p=l&&l.length>0;return(0,b.jsx)(e.Card,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2 flex-wrap",children:[(0,b.jsxs)(bJ.Badge,{variant:g.variant,className:"flex items-center gap-1",children:[(0,b.jsx)(h,{className:"h-3 w-3"}),g.label]}),(0,b.jsxs)(bJ.Badge,{variant:"outline",children:["P",a.priority]}),n&&(0,b.jsx)(bJ.Badge,{variant:"secondary",children:"DoD ✓"}),m&&(0,b.jsx)(bJ.Badge,{variant:"secondary",children:"5SB ✓"}),o&&(0,b.jsxs)(bJ.Badge,{variant:"secondary",children:["결정 ",k?.length||0]}),p&&(0,b.jsxs)(bJ.Badge,{variant:"secondary",children:["리뷰 ",l?.length||0]})]}),(0,b.jsx)("h3",{className:"font-semibold text-lg mb-1",children:a.title}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["생성: ",ch(a.created_at),a.due_date&&(0,b.jsxs)("span",{className:"ml-4",children:["마감: ",ch(a.due_date)]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("div",{className:"flex gap-1",children:(0,b.jsx)(cg,{taskId:a.id,triggerText:"리뷰"})}),(0,b.jsx)("div",{className:"flex gap-1",children:(0,b.jsx)(cb,{taskId:a.id,triggerText:"결정"})}),(0,b.jsx)("div",{className:"flex gap-1",children:n?(0,b.jsx)(b8,{taskId:a.id,triggerText:"DoD"}):(0,b.jsx)(b6,{taskId:a.id,triggerText:"DoD"})}),(0,b.jsx)("div",{className:"flex gap-1",children:m?(0,b.jsx)(b3,{taskId:a.id,triggerText:"5SB"}):(0,b.jsx)(b1,{taskId:a.id,triggerText:"5SB"})}),a.state!==bK.TaskState.DONE&&(0,b.jsxs)(b.Fragment,{children:[a.state===bK.TaskState.BACKLOG&&(0,b.jsx)(f.Button,{size:"sm",onClick:()=>c(a.id,bK.TaskState.IN_PROGRESS),disabled:d,children:"시작"}),a.state===bK.TaskState.IN_PROGRESS&&(0,b.jsx)(f.Button,{size:"sm",variant:"secondary",onClick:()=>c(a.id,bK.TaskState.DONE),disabled:d,children:"완료"})]})]})]})},a.id)}var ck=a.i(96101),cl=a.i(210),cm=a.i(41675),cn=a.i(87534),co=a.i(84505),cp=a.i(5163);let cq={[bK.TaskState.BACKLOG]:{label:"대기",icon:bL.Clock,variant:"secondary"},[bK.TaskState.IN_PROGRESS]:{label:"진행중",icon:bM.AlertCircle,variant:"default"},[bK.TaskState.DONE]:{label:"완료",icon:bN.CheckCircle,variant:"secondary"},[bK.TaskState.PAUSED]:{label:"중단",icon:bO.Pause,variant:"outline"},[bK.TaskState.CANCELED]:{label:"취소",icon:bP.X,variant:"destructive"}};function cr(){let a=(0,d.useParams)(),i=(0,d.useRouter)(),j=parseInt(a.id),{data:k,isLoading:l}=(0,g.useProject)(j),{data:m,isLoading:n}=(0,h.useTasks)(),o=(0,h.useUpdateTaskState)(),[p,r]=(0,c.useState)("ALL"),t=m?.filter(a=>a.project_id===j)||[],u=t.filter(a=>"ALL"===p||a.state===p),v={total:t.length,backlog:t.filter(a=>a.state===bK.TaskState.BACKLOG).length,inProgress:t.filter(a=>a.state===bK.TaskState.IN_PROGRESS).length,done:t.filter(a=>a.state===bK.TaskState.DONE).length,paused:t.filter(a=>a.state===bK.TaskState.PAUSED).length,canceled:t.filter(a=>a.state===bK.TaskState.CANCELED).length},w=v.total>0?v.done/v.total*100:0,x=(0,b$.useMutation)({mutationFn:async()=>{let a=await (0,cp.exportProjectToMarkdown)(j),b=`${k?.name||"project"}_${(0,bQ.format)(new Date,"yyyy-MM-dd")}.md`;return(0,cp.downloadMarkdownFile)(a,b),b},onSuccess:a=>{q.toast.success(`${a} 파일이 다운로드되었습니다!`)},onError:a=>{let b=a?.response?.data?.detail||"내보내기에 실패했습니다.";q.toast.error(b),console.error("Export error:",a)}}),y=async(a,b)=>{try{await o.mutateAsync({id:a,data:{state:b}}),q.toast.success("작업 상태가 변경되었습니다")}catch(b){let a=b?.response?.data?.detail||"상태 변경에 실패했습니다";q.toast.error(a)}};return l||n?(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"프로젝트 정보를 불러오는 중..."})]})})}):k?(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)(f.Button,{variant:"ghost",onClick:()=>i.push("/projects"),className:"flex items-center space-x-2",children:[(0,b.jsx)(cl.ArrowLeft,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:"뒤로"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(ck.FolderOpen,{className:"h-8 w-8"}),k.name]}),(0,b.jsx)("p",{className:"text-muted-foreground",children:k.description||"설명이 없습니다"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(s,{defaultProjectId:j,triggerText:"작업 추가"}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>{x.mutate()},disabled:x.isPending,children:[(0,b.jsx)(co.Download,{className:"mr-2 h-4 w-4"}),x.isPending?"내보내는 중...":"MD 내보내기"]}),(0,b.jsx)(bI,{project:k})]})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsx)(e.CardHeader,{children:(0,b.jsx)(e.CardTitle,{children:"프로젝트 정보"})}),(0,b.jsx)(e.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"생성일"}),(0,b.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,b.jsx)(cm.Calendar,{className:"h-4 w-4"}),(0,bQ.format)(new Date(k.created_at),"yyyy-MM-dd")]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"총 작업 수"}),(0,b.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,b.jsx)(cn.CheckSquare,{className:"h-4 w-4"}),v.total,"개"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"완료율"}),(0,b.jsxs)("p",{className:"text-lg font-semibold",children:[w.toFixed(1),"%"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"진행중 작업"}),(0,b.jsxs)("p",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,b.jsx)(bM.AlertCircle,{className:"h-4 w-4"}),v.inProgress,"개"]})]})]})})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(v).filter(([a])=>"total"!==a).map(([a,c])=>{let d=cq["inProgress"===a?bK.TaskState.IN_PROGRESS:"backlog"===a?bK.TaskState.BACKLOG:"done"===a?bK.TaskState.DONE:"paused"===a?bK.TaskState.PAUSED:bK.TaskState.CANCELED],f=d.icon;return(0,b.jsx)(e.Card,{className:"cursor-pointer hover:shadow-md transition-shadow",children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:d.label}),(0,b.jsx)("p",{className:"text-2xl font-bold",children:c})]}),(0,b.jsx)(f,{className:"h-8 w-8 text-muted-foreground"})]})})},a)})}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(f.Button,{variant:"ALL"===p?"default":"outline",onClick:()=>r("ALL"),children:["전체 (",v.total,")"]}),Object.entries(bK.TaskState).map(([a,c])=>{let d=cq[c],e=v["in_progress"===a.toLowerCase()?"inProgress":a.toLowerCase()];return(0,b.jsxs)(f.Button,{variant:p===c?"default":"outline",onClick:()=>r(c),className:"flex items-center gap-1",children:[(0,b.jsx)(d.icon,{className:"h-4 w-4"}),d.label," (",e,")"]},c)})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:"작업 목록"}),(0,b.jsx)(e.CardDescription,{children:u.length?`${u.length}개의 작업`:"작업이 없습니다"})]}),(0,b.jsx)(e.CardContent,{children:0===u.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(cn.CheckSquare,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"작업이 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"이 프로젝트에 새로운 작업을 추가해보세요"}),(0,b.jsx)(s,{defaultProjectId:j,triggerText:"작업 추가"})]}):(0,b.jsx)("div",{className:"space-y-4",children:u.map(a=>(0,b.jsx)(cj,{task:a,onStateChange:y,isUpdating:o.isPending},a.id))})})]})]}):(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(ck.FolderOpen,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"프로젝트를 찾을 수 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"요청하신 프로젝트가 존재하지 않습니다."}),(0,b.jsxs)(f.Button,{onClick:()=>i.push("/projects"),children:[(0,b.jsx)(cl.ArrowLeft,{className:"mr-2 h-4 w-4"}),"프로젝트 목록으로 돌아가기"]})]})})}}];

//# sourceMappingURL=src_app_projects_%5Bid%5D_page_tsx_58551f0d._.js.map