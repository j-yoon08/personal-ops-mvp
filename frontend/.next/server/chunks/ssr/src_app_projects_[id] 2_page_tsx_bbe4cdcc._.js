module.exports=[31085,a=>{"use strict";a.s(["default",()=>B],31085);var b=a.i(87924),c=a.i(50944),d=a.i(91119),e=a.i(86304),f=a.i(99570),g=a.i(210),h=a.i(41675),i=a.i(96101),j=a.i(50429),k=a.i(56711),l=a.i(33217),m=a.i(83490),n=a.i(72131),o=a.i(14574),p=a.i(41921),q=a.i(66718),r=a.i(29246),s=a.i(80701),t=a.i(15618),u=a.i(95245),v=a.i(59501),w=a.i(54714),x=a.i(97580),y=a.i(23292);let z=w.object({title:w.string().min(1,"작업 제목을 입력해주세요"),description:w.string().optional(),priority:w.number().min(1).max(5),due_date:w.string().optional()});function A({projectId:a}){let[c,d]=(0,n.useState)(!1),e=(0,x.useCreateTask)(),g=(0,u.useForm)({resolver:(0,v.zodResolver)(z),defaultValues:{title:"",description:"",priority:3,due_date:""}}),h=async b=>{try{let c={project_id:a,title:b.title,priority:b.priority,due_date:b.due_date||void 0};await e.mutateAsync(c),y.toast.success("작업이 생성되었습니다!"),g.reset(),d(!1)}catch(b){let a=b?.response?.data?.detail||"작업 생성에 실패했습니다.";y.toast.error(a),console.error("Error creating task:",b)}};return(0,b.jsxs)(o.Dialog,{open:c,onOpenChange:d,children:[(0,b.jsx)(o.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(f.Button,{size:"sm",children:[(0,b.jsx)(t.Plus,{className:"mr-2 h-4 w-4"}),"새 작업 추가"]})}),(0,b.jsxs)(o.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"새 작업 생성"}),(0,b.jsx)(o.DialogDescription,{children:"이 프로젝트에 새로운 작업을 추가합니다."})]}),(0,b.jsx)(p.Form,{...g,children:(0,b.jsxs)("form",{onSubmit:g.handleSubmit(h),className:"space-y-4",children:[(0,b.jsx)(p.FormField,{control:g.control,name:"title",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"작업 제목 *"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{placeholder:"예: 로그인 기능 구현",...a})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:g.control,name:"description",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"설명 (선택)"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(r.Textarea,{placeholder:"작업에 대한 상세 설명을 입력하세요",className:"min-h-[80px]",...a})}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(p.FormField,{control:g.control,name:"priority",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"우선순위 *"}),(0,b.jsxs)(s.Select,{onValueChange:b=>a.onChange(parseInt(b)),defaultValue:a.value?.toString(),children:[(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(s.SelectTrigger,{children:(0,b.jsx)(s.SelectValue,{placeholder:"우선순위 선택"})})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"1",children:"1 (높음)"}),(0,b.jsx)(s.SelectItem,{value:"2",children:"2 (보통)"}),(0,b.jsx)(s.SelectItem,{value:"3",children:"3 (낮음)"}),(0,b.jsx)(s.SelectItem,{value:"4",children:"4 (매우 낮음)"}),(0,b.jsx)(s.SelectItem,{value:"5",children:"5 (언젠가)"})]})]}),(0,b.jsx)(p.FormMessage,{})]})}),(0,b.jsx)(p.FormField,{control:g.control,name:"due_date",render:({field:a})=>(0,b.jsxs)(p.FormItem,{children:[(0,b.jsx)(p.FormLabel,{children:"마감일 (선택)"}),(0,b.jsx)(p.FormControl,{children:(0,b.jsx)(q.Input,{type:"date",...a})}),(0,b.jsx)(p.FormMessage,{})]})})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>d(!1),children:"취소"}),(0,b.jsx)(f.Button,{type:"submit",disabled:e.isPending,children:e.isPending?"생성 중...":"생성"})]})]})})]})]})}function B(){let a=(0,c.useParams)(),n=(0,c.useRouter)(),o=a.id,{data:p,isLoading:q}=(0,l.useQuery)({queryKey:["project",o],queryFn:async()=>(await m.default.get(`http://localhost:8000/projects/${o}`)).data}),{data:r,isLoading:s}=(0,l.useQuery)({queryKey:["project-tasks",o],queryFn:async()=>(await m.default.get(`http://localhost:8000/tasks?project_id=${o}`)).data});if(q)return(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mx-auto"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"프로젝트 정보를 불러오는 중..."})]})})});if(!p)return(0,b.jsx)("div",{className:"container mx-auto p-6",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"프로젝트를 찾을 수 없습니다"}),(0,b.jsx)(f.Button,{onClick:()=>n.push("/projects"),children:"프로젝트 목록으로 돌아가기"})]})});let t=r?.reduce((a,b)=>(a[b.state]=(a[b.state]||0)+1,a),{})||{};return(0,b.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:()=>n.push("/projects"),children:[(0,b.jsx)(g.ArrowLeft,{className:"h-4 w-4"}),"프로젝트 목록"]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[(0,b.jsx)(i.FolderOpen,{className:"h-8 w-8"}),p.name]}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:p.description||"설명이 없습니다"})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"프로젝트 정보"})}),(0,b.jsxs)(d.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"프로젝트명"}),(0,b.jsx)("p",{className:"mt-1",children:p.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"생성일"}),(0,b.jsxs)("p",{className:"mt-1 flex items-center gap-1",children:[(0,b.jsx)(h.Calendar,{className:"h-4 w-4"}),(0,k.format)(new Date(p.created_at),"yyyy년 MM월 dd일")]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"설명"}),(0,b.jsx)("p",{className:"mt-1",children:p.description||"설명이 없습니다"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"전체 작업"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:r?.length||0})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"백로그"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:t.BACKLOG||0})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"진행중"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:t.IN_PROGRESS||0})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"완료"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.DONE||0})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{className:"pb-2",children:(0,b.jsx)(d.CardTitle,{className:"text-sm",children:"일시정지"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:t.PAUSED||0})})]})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)(d.CardTitle,{children:"작업 목록"}),(0,b.jsx)(A,{projectId:parseInt(o)})]}),(0,b.jsx)(d.CardDescription,{children:r?.length?`${r.length}개의 작업이 있습니다`:"아직 작업이 없습니다"})]}),(0,b.jsx)(d.CardContent,{children:s?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent mx-auto"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"작업을 불러오는 중..."})]}):r&&0!==r.length?(0,b.jsx)("div",{className:"space-y-3",children:r.map(a=>(0,b.jsx)(d.Card,{className:"hover:shadow-sm transition-shadow",children:(0,b.jsx)(d.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-medium",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-sm text-muted-foreground",children:[a.due_date&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(h.Calendar,{className:"h-3 w-3"}),(0,k.format)(new Date(a.due_date),"MM/dd")]}),(0,b.jsxs)("span",{children:["우선순위: ",a.priority]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Badge,{variant:"DONE"===a.state?"default":"IN_PROGRESS"===a.state?"secondary":"PAUSED"===a.state?"destructive":"outline",children:"BACKLOG"===a.state?"백로그":"IN_PROGRESS"===a.state?"진행중":"DONE"===a.state?"완료":"PAUSED"===a.state?"일시정지":a.state}),(0,b.jsx)(f.Button,{variant:"ghost",size:"sm",onClick:()=>n.push(`/tasks/${a.id}`),children:"상세보기"})]})]})})},a.id))}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(j.Target,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"작업이 없습니다"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"첫 번째 작업을 생성해보세요"}),(0,b.jsx)(A,{projectId:parseInt(o)})]})})]})]})}}];

//# sourceMappingURL=src_app_projects_%5Bid%5D%202_page_tsx_bbe4cdcc._.js.map